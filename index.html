<html lang="es"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ModaStyle - Tienda de Ropa, Accesorios y Hogar (Configuración General)</title>
    
    <!-- Estilos CSS -->
    <style>body { margin: 0; }</style>
    <style>body { margin: 0; }</style>
    <style>body { margin: 0; }</style>
    <style>
        :root {
            --primary: #1a1a1a;
            --secondary: #333333;
            --accent: #D4AF37;
            --light: #f8f8f8;
            --medium: #e0e0e0;
            --dark: #0a0a0a;
            --text: #333333;
            --text-light: #666666;
            --success: #2e8b57;
            --warning: #ffa500;
            --error: #cc3333;
            --admin: #8B5CF6;
            
            --color-todo: #D4AF37;
            --color-hombre: #2563EB;
            --color-mujer: #DB2777;
            --color-kids: #059669;
            --color-accesorios: #7C3AED;
            
            --cupon-envio: #10b981;
            --cupon-descuento: #059669;
            --cupon-2x1: #3b82f6;
            --cupon-3x2: #8b5cf6;
            --cupon-flash: #f59e0b;
            
            --banner-hero: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --banner-oferta: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --banner-info: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --banner-flash: linear-gradient(135deg, #f43b47 0%, #453a94 100%);
            
            --border-radius: 8px;
            --border-radius-sm: 4px;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            --shadow-hover: 0 4px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.1);
            --container-width: 1200px;
            --header-height: 60px;

            /* Colores para tracking */
            --tracking-pendiente: #f59e0b;
            --tracking-preparacion: #3b82f6;
            --tracking-en-ruta: #8b5cf6;
            --tracking-entregado: #10b981;
            --tracking-problema: #ef4444;
            --tracking-cancelado: #64748b;
            
            /* Nuevas variables para configuración general */
            --social-facebook: #1877f2;
            --social-instagram: #e4405f;
            --social-whatsapp: #25D366;
            --social-twitter: #1DA1F2;
            --social-tiktok: #000000;
            --social-youtube: #FF0000;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            font-size: 14px;
        }

        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: transparent;
            color: var(--text);
            line-height: 1.4;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }

        /* Fondo de partículas */
        #particlesCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            background: radial-gradient(circle at 30% 30%, #1a0b2e, #0a0a0a 80%);
        }

        .container {
            max-width: var(--container-width);
            margin: 0 auto;
            padding: 0 15px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .main-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.85);
            backdrop-filter: blur(10px);
            height: var(--header-height);
            z-index: 1000;
            border-bottom: 1px solid rgba(139, 92, 246, 0.3);
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
            gap: 15px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            color: var(--primary);
            flex-shrink: 0;
        }

        .logo-icon {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #8B5CF6, #D4AF37);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8rem;
            box-shadow: 0 1px 4px rgba(139, 92, 246, 0.5);
        }

        .logo-text {
            font-size: 1.1rem;
            font-weight: 700;
            letter-spacing: -0.5px;
            background: linear-gradient(135deg, #D4AF37, #8B5CF6);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .search-container {
            flex: 1;
            max-width: 400px;
            position: relative;
            margin: 0 15px;
        }

        .search-input {
            width: 100%;
            padding: 10px 15px 10px 40px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius);
            background: rgba(26, 26, 26, 0.8);
            font-size: 0.85rem;
            transition: var(--transition);
            outline: none;
            color: #ffffff;
            backdrop-filter: blur(5px);
        }

        .search-input:focus {
            border-color: #8B5CF6;
            background: rgba(26, 26, 26, 0.95);
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.3);
        }

        .search-input::placeholder {
            color: #999999;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #8B5CF6;
            font-size: 0.9rem;
        }

        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-hover);
            margin-top: 5px;
            z-index: 1001;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .search-results.active {
            display: block;
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .search-result-item {
            padding: 12px 15px;
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: var(--transition);
            color: #ffffff;
        }

        .search-result-item:hover {
            background: rgba(139, 92, 246, 0.2);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-image {
            width: 45px;
            height: 45px;
            object-fit: cover;
            border-radius: var(--border-radius-sm);
            flex-shrink: 0;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .search-result-info {
            flex: 1;
            min-width: 0;
        }

        .search-result-name {
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: 3px;
            color: #ffffff;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .search-result-category {
            font-size: 0.7rem;
            color: #8B5CF6;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .search-result-price {
            font-weight: 700;
            color: #D4AF37;
            font-size: 0.85rem;
            flex-shrink: 0;
        }

        .search-no-results {
            padding: 20px;
            text-align: center;
            color: #ffffff;
        }

        .search-no-results i {
            font-size: 1.5rem;
            margin-bottom: 8px;
            color: #8B5CF6;
        }

        .search-no-results p {
            margin: 0;
            font-size: 0.85rem;
        }

        .clear-search {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #8B5CF6;
            cursor: pointer;
            padding: 5px;
            display: none;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .clear-search:hover {
            background: rgba(139, 92, 246, 0.3);
            color: #ffffff;
        }

        .clear-search.active {
            display: flex;
        }

        .admin-btn {
            background: linear-gradient(135deg, var(--admin), #7C3AED);
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            width: 40px;
            height: 40px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            box-shadow: 0 1px 4px rgba(139, 92, 246, 0.3);
            margin-left: auto;
            margin-right: 10px;
        }

        .admin-btn:hover {
            background: linear-gradient(135deg, #7C3AED, var(--admin));
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(139, 92, 246, 0.4);
        }

        .nav-links {
            display: flex;
            gap: 20px;
            list-style: none;
        }

        .nav-link {
            text-decoration: none;
            color: #ffffff;
            font-weight: 500;
            padding: 4px 0;
            position: relative;
            transition: var(--transition);
            font-size: 0.85rem;
            letter-spacing: 0.3px;
        }

        .nav-link:hover {
            color: #D4AF37;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 1px;
            background: linear-gradient(90deg, #D4AF37, #8B5CF6);
            transition: var(--transition);
        }

        .nav-link:hover::after {
            width: 100%;
        }

        /* Banner Section Styles */
        .banner-section {
            padding: 80px 0 20px;
            position: relative;
            overflow: hidden;
        }

        .banner-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .banner-card {
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.2);
            transition: var(--transition);
            position: relative;
            color: white;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            cursor: pointer;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .banner-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }

        .banner-content {
            padding: 30px 20px;
            z-index: 2;
            width: 100%;
        }

        .banner-title {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .banner-subtitle {
            font-size: 1rem;
            margin-bottom: 15px;
            opacity: 0.95;
        }

        .banner-button {
            display: inline-block;
            padding: 10px 25px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 30px;
            font-weight: 700;
            text-decoration: none;
            transition: var(--transition);
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .banner-button:hover {
            transform: scale(1.05);
            background: rgba(255, 255, 255, 0.3);
            box-shadow: 0 6px 15px rgba(0,0,0,0.4);
        }

        .banner-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(139, 92, 246, 0.3);
            backdrop-filter: blur(5px);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            z-index: 3;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .banner-flash-counter {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            color: #ffd700;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 700;
            z-index: 4;
            border: 1px solid #ffd700;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            animation: pulse-glow 2s infinite;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .banner-flash-counter i {
            color: #ffd700;
            font-size: 0.8rem;
        }

        @keyframes pulse-glow {
            0% { box-shadow: 0 0 5px #8B5CF6; }
            50% { box-shadow: 0 0 15px #8B5CF6; }
            100% { box-shadow: 0 0 5px #8B5CF6; }
        }

        .banner-close {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 3;
            transition: var(--transition);
        }

        .banner-close:hover {
            background: rgba(255, 255, 255, 0.4);
        }

        .hero-section {
            padding: 80px 0 30px;
            position: relative;
            overflow: hidden;
        }

        .hero-content {
            text-align: center;
            max-width: 700px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: var(--border-radius);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .hero-title {
            font-size: 2rem;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 15px;
            color: #ffffff;
            letter-spacing: -0.5px;
            text-shadow: 0 2px 10px rgba(139, 92, 246, 0.5);
        }

        .hero-highlight {
            color: #D4AF37;
            font-weight: 700;
        }

        .hero-badges {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 25px;
        }

        .badge {
            padding: 6px 12px;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            border-radius: var(--border-radius-sm);
            font-size: 0.8rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(139, 92, 246, 0.3);
            transition: var(--transition);
            color: #ffffff;
        }

        .badge:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);
            border-color: #8B5CF6;
        }

        .badge i {
            color: #D4AF37;
            font-size: 0.85rem;
        }

        .categories-section {
            padding: 40px 0;
        }

        .section-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.6rem;
            font-weight: 800;
            margin-bottom: 10px;
            color: #ffffff;
            position: relative;
            display: inline-block;
            text-shadow: 0 2px 10px rgba(139, 92, 246, 0.5);
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, #D4AF37, #8B5CF6);
            border-radius: 1px;
        }

        .section-subtitle {
            color: #cccccc;
            font-size: 0.9rem;
            max-width: 500px;
            margin: 0 auto;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .category-card {
            position: relative;
            border-radius: var(--border-radius);
            overflow: hidden;
            height: 250px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .category-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
        }

        .category-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .category-card:hover .category-image {
            transform: scale(1.05);
        }

        .category-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            color: white;
            padding: 20px 15px 15px;
        }

        .category-name {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .category-description {
            font-size: 0.85rem;
            opacity: 0.9;
            margin-bottom: 10px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 28px;
            color: #cccccc;
        }

        .category-badge {
            display: inline-block;
            padding: 4px 10px;
            background: #8B5CF6;
            color: white;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            font-size: 0.75rem;
        }

        .products-section {
            padding: 50px 0;
            position: relative;
        }

        .category-filters {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .category-filter {
            padding: 6px 12px;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            color: #ffffff;
            font-size: 0.8rem;
        }

        .category-filter:hover {
            border-color: #8B5CF6;
            transform: translateY(-1px);
            background: rgba(139, 92, 246, 0.3);
        }

        .category-filter.active {
            color: white;
            border-color: transparent;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
        }

        .category-filter[data-color="todo"].active {
            background: var(--color-todo);
        }
        .category-filter[data-color="hombre"].active {
            background: var(--color-hombre);
        }
        .category-filter[data-color="mujer"].active {
            background: var(--color-mujer);
        }
        .category-filter[data-color="kids"].active {
            background: var(--color-kids);
        }
        .category-filter[data-color="accesorios"].active {
            background: var(--color-accesorios);
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .product-card {
            background: rgba(20, 20, 20, 0.8);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            transition: var(--transition);
            border: 1px solid rgba(139, 92, 246, 0.3);
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4);
            border-color: #8B5CF6;
        }

        /* Carrusel en tarjeta - Botones siempre visibles */
        .product-image-carousel {
            position: relative;
            overflow: hidden;
            height: 180px;
        }

        .carousel-container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .carousel-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.3s ease;
        }

        .carousel-image:not(.active) {
            display: none;
        }

        .carousel-nav {
            position: absolute;
            bottom: 8px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            padding: 0 8px;
            opacity: 1;
            transition: opacity 0.2s ease;
            pointer-events: none;
            z-index: 5;
        }

        .carousel-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: rgba(139, 92, 246, 0.25);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 0.8rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
            pointer-events: auto;
        }

        .carousel-btn:hover {
            background: rgba(139, 92, 246, 0.5);
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .carousel-btn:active {
            transform: scale(0.95);
        }

        .carousel-indicators {
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 6px;
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            padding: 4px 10px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            z-index: 4;
            opacity: 1;
            transition: opacity 0.2s ease;
            pointer-events: none;
        }

        .indicator-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.2s ease;
            cursor: pointer;
            pointer-events: auto;
        }

        .indicator-dot.active {
            background: #8B5CF6;
            transform: scale(1.3);
            border-color: #8B5CF6;
        }

        .indicator-dot:hover {
            background: #8B5CF6;
            transform: scale(1.2);
        }

        .view-fullscreen-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: rgba(139, 92, 246, 0.25);
            backdrop-filter: blur(4px);
            -webkit-backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 0.75rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-shadow: 0 1px 2px rgba(0,0,0,0.2);
            z-index: 6;
            opacity: 1;
            pointer-events: auto;
        }

        .view-fullscreen-btn:hover {
            background: rgba(139, 92, 246, 0.5);
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .product-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 3px 8px;
            font-size: 0.65rem;
            font-weight: 700;
            border-radius: var(--border-radius-sm);
            text-transform: uppercase;
            letter-spacing: 0.3px;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
            z-index: 2;
        }

        .product-badge.oferta {
            background: #FFD700;
            color: #333;
        }
        .product-badge.nuevo {
            background: #8B5CF6;
            color: white;
        }
        .product-badge.agotado {
            background: #ff4757;
            color: white;
        }

        .product-info {
            padding: 8px;
            color: #ffffff;
        }

        .product-category {
            color: #8B5CF6;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .product-title {
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: 4px;
            color: #ffffff;
            line-height: 1.2;
            min-height: 28px;
        }

        .product-price-container {
            margin-bottom: 6px;
        }

        .sale-price-container {
            display: flex;
            align-items: center;
            gap: 4px;
            margin-bottom: 6px;
        }

        .original-price {
            font-size: 0.85rem;
            color: #999999;
            text-decoration: line-through;
            font-weight: 500;
        }

        .sale-price {
            font-size: 1rem;
            font-weight: 800;
            color: #D4AF37;
        }

        .discount-badge {
            padding: 1px 4px;
            background: #FFD700;
            color: #333;
            border-radius: var(--border-radius-sm);
            font-size: 0.6rem;
            font-weight: 700;
            text-transform: uppercase;
        }

        .product-description {
            color: #cccccc;
            margin-bottom: 6px;
            line-height: 1.3;
            font-size: 0.75rem;
            min-height: 28px;
        }

        .product-features {
            display: flex;
            flex-direction: column;
            gap: 3px;
            margin-bottom: 6px;
        }

        .feature {
            display: flex;
            align-items: center;
            gap: 4px;
            color: #ffffff;
            font-size: 0.7rem;
        }

        .feature i {
            color: #8B5CF6;
            width: 12px;
            font-size: 0.65rem;
        }

        .variant-selector {
            margin-bottom: 6px;
        }

        .variant-label {
            display: block;
            margin-bottom: 3px;
            font-weight: 600;
            color: #ffffff;
            font-size: 0.75rem;
        }

        .variant-options {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
        }

        .variant-btn {
            padding: 3px 6px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            background: rgba(0, 0, 0, 0.3);
            color: white;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            font-size: 0.7rem;
            min-width: 32px;
        }
        
        .variant-btn.color-swatch {
            width: 30px;
            height: 30px;
            padding: 0;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.2);
            min-width: unset;
            text-indent: -9999px;
            overflow: hidden;
            position: relative;
        }
        
        .variant-btn.color-swatch:hover:not(.disabled) {
            transform: translateY(-1px) scale(1.1);
            border-color: #8B5CF6;
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }
        
        .variant-btn.color-swatch.selected {
            border-color: #D4AF37;
            box-shadow: 0 0 0 2px #D4AF37;
            transform: scale(1.05);
        }
        
        .variant-btn.color-swatch.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .variant-btn:hover:not(.disabled) {
            border-color: #8B5CF6;
            transform: translateY(-1px);
            background: rgba(139, 92, 246, 0.3);
        }

        .variant-btn.selected {
            background: #8B5CF6;
            color: white;
            border-color: #8B5CF6;
        }

        .variant-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .product-actions {
            display: flex;
            gap: 4px;
            margin-top: 8px;
        }

        .add-to-cart-btn {
            flex: 1;
            padding: 6px 8px;
            background: linear-gradient(135deg, #8B5CF6, #6D28D9);
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            font-size: 0.75rem;
        }

        .add-to-cart-btn:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 3px 8px rgba(139, 92, 246, 0.4);
            background: linear-gradient(135deg, #7C3AED, #8B5CF6);
        }

        .add-to-cart-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .image-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .image-modal-overlay.active {
            display: flex;
        }

        .image-modal {
            max-width: 90%;
            max-height: 90vh;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-modal img {
            width: auto;
            height: auto;
            max-width: 100%;
            max-height: 85vh;
            object-fit: contain;
            border-radius: var(--border-radius);
            box-shadow: 0 5px 30px rgba(139, 92, 246, 0.5);
            border: 2px solid rgba(139, 92, 246, 0.3);
        }

        .close-image-modal {
            position: absolute;
            top: -40px;
            right: -40px;
            width: 40px;
            height: 40px;
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            backdrop-filter: blur(5px);
            z-index: 2010;
        }

        .close-image-modal:hover {
            background: rgba(139, 92, 246, 0.4);
            transform: rotate(90deg);
        }

        .modal-nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(139, 92, 246, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
            backdrop-filter: blur(5px);
            z-index: 2010;
        }

        .modal-nav-btn:hover {
            background: rgba(139, 92, 246, 0.4);
            transform: translateY(-50%) scale(1.1);
        }

        .modal-nav-btn.prev-btn {
            left: -60px;
        }

        .modal-nav-btn.next-btn {
            right: -60px;
        }

        .modal-image-counter {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 6px 15px;
            border-radius: 30px;
            font-size: 0.85rem;
            font-weight: 600;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        @media (max-width: 768px) {
            .modal-nav-btn.prev-btn {
                left: 5px;
            }
            .modal-nav-btn.next-btn {
                right: 5px;
            }
            .close-image-modal {
                top: 5px;
                right: 5px;
            }
            .modal-image-counter {
                bottom: 5px;
            }
        }

        .cart-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 65px;
            height: 65px;
            background: linear-gradient(135deg, #8B5CF6, #6D28D9);
            color: white;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
            transition: var(--transition);
            border: 3px solid rgba(255, 255, 255, 0.3);
            font-weight: 600;
        }

        .cart-icon:hover {
            transform: scale(1.08) translateY(-3px);
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.5);
            background: linear-gradient(135deg, #7C3AED, #8B5CF6);
        }

        .cart-icon:active {
            transform: scale(0.98);
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: linear-gradient(135deg, #D4AF37, #B8860B);
            color: white;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 700;
            border: 2px solid white;
            box-shadow: 0 2px 6px rgba(139, 92, 246, 0.4);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .cart-panel {
            position: fixed;
            top: 0;
            right: -350px;
            width: 320px;
            height: 100vh;
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: -3px 0 15px rgba(139, 92, 246, 0.3);
            z-index: 1001;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            border-left: 1px solid rgba(139, 92, 246, 0.3);
        }

        .cart-panel.open {
            right: 0;
        }

        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .cart-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .cart-header {
            padding: 15px;
            background: linear-gradient(135deg, #1a0b2e, #2d1b3a);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(139, 92, 246, 0.3);
        }

        .cart-title {
            font-size: 1.1rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .close-cart {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(139, 92, 246, 0.2);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .close-cart:hover {
            background: rgba(139, 92, 246, 0.4);
            transform: rotate(90deg);
            border-color: #D4AF37;
        }

        .cart-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            display: flex;
            flex-direction: column;
        }

        .coupon-section {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 12px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .coupon-title {
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #ffffff;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .coupon-title i {
            color: #8B5CF6;
        }

        .coupon-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
            max-height: 250px;
            overflow-y: auto;
            padding-right: 2px;
        }

        .coupon-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 10px;
            border-radius: var(--border-radius-sm);
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.2);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            flex-wrap: wrap;
        }

        .coupon-item:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.2);
            border-color: #8B5CF6;
        }

        .coupon-item.applied {
            background: linear-gradient(135deg, #8B5CF6, #6D28D9);
            border-color: #6D28D9;
            color: white;
            cursor: default;
        }

        .coupon-item.applied .coupon-code,
        .coupon-item.applied .coupon-description,
        .coupon-item.applied .coupon-icon {
            color: white;
        }

        .coupon-item.expired {
            opacity: 0.6;
            background: rgba(100, 116, 139, 0.1);
            border-color: rgba(100, 116, 139, 0.3);
            cursor: not-allowed;
            pointer-events: none;
        }

        .coupon-item.expired .coupon-code,
        .coupon-item.expired .coupon-description,
        .coupon-item.expired .coupon-icon {
            color: #64748b;
        }

        .coupon-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            flex-shrink: 0;
        }

        .coupon-info {
            flex: 1;
            min-width: 0;
        }

        .coupon-code {
            font-weight: 700;
            font-size: 0.8rem;
            margin-bottom: 2px;
            color: #8B5CF6;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .coupon-description {
            font-size: 0.7rem;
            color: #cccccc;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 4px;
        }

        .coupon-timer {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.65rem;
            color: #D4AF37;
            background: rgba(0, 0, 0, 0.3);
            padding: 3px 6px;
            border-radius: 12px;
            margin-top: 4px;
            width: fit-content;
        }

        .coupon-item.expired .coupon-timer {
            background: rgba(100, 116, 139, 0.15);
            color: #64748b;
        }

        .coupon-item.applied .coupon-timer {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .coupon-timer i {
            font-size: 0.6rem;
        }

        .timer-numbers {
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .applied-badge {
            background: white;
            color: #8B5CF6;
            padding: 2px 6px;
            border-radius: var(--border-radius-sm);
            font-size: 0.6rem;
            font-weight: 700;
            margin-left: 6px;
        }

        .expired-badge {
            background: #64748b;
            color: white;
            padding: 2px 6px;
            border-radius: var(--border-radius-sm);
            font-size: 0.6rem;
            font-weight: 700;
            margin-left: 6px;
        }

        .no-coupons {
            padding: 10px;
            text-align: center;
            color: var(--text-light);
            font-size: 0.75rem;
            background: rgba(0, 0, 0, 0.02);
            border-radius: var(--border-radius-sm);
        }

        .cart-items {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .cart-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
            display: flex;
            gap: 10px;
            transition: var(--transition);
        }

        .cart-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
            border-color: #8B5CF6;
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .cart-item-details {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .cart-item-title {
            font-weight: 700;
            font-size: 0.85rem;
            margin-bottom: 3px;
            color: #ffffff;
            line-height: 1.2;
        }

        .cart-item-variant {
            color: #cccccc;
            font-size: 0.7rem;
            margin-bottom: 2px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .cart-item-price {
            font-weight: 700;
            color: #D4AF37;
            font-size: 0.9rem;
            margin-top: 3px;
        }

        .cart-item-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 6px;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(0, 0, 0, 0.5);
            padding: 3px 6px;
            border-radius: var(--border-radius-sm);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .quantity-btn {
            width: 20px;
            height: 20px;
            border: none;
            background: rgba(139, 92, 246, 0.2);
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.8rem;
            transition: var(--transition);
            color: #ffffff;
        }

        .quantity-btn:hover:not(:disabled) {
            background: #8B5CF6;
            color: white;
            transform: scale(1.05);
        }

        /* SOLUCIÓN: Texto de cantidad visible */
        .quantity-value {
            color: #ffffff;
            font-weight: 700;
            min-width: 25px;
            text-align: center;
            font-size: 0.85rem;
        }

        .remove-item {
            padding: 4px 8px;
            background: linear-gradient(135deg, #ff6b6b, #ff5252);
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 600;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .remove-item:hover {
            background: linear-gradient(135deg, #ff5252, #ff3b3b);
            transform: translateY(-1px);
        }

        .empty-cart {
            text-align: center;
            padding: 30px 15px;
            color: #ffffff;
            display: none;
        }

        .empty-cart i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: #8B5CF6;
            opacity: 0.5;
        }

        .empty-cart h3 {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .continue-shopping {
            display: inline-block;
            padding: 6px 12px;
            background: rgba(139, 92, 246, 0.2);
            color: #ffffff;
            text-decoration: none;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            transition: var(--transition);
            border: 1px solid rgba(139, 92, 246, 0.3);
            font-size: 0.8rem;
        }

        .continue-shopping:hover {
            background: #8B5CF6;
            color: white;
            border-color: #8B5CF6;
            transform: translateY(-1px);
        }

        .cart-summary {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 12px;
            margin-top: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
            display: none;
        }

        .cart-summary.show {
            display: block;
        }

        .summary-title {
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: #ffffff;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.8rem;
            color: #ffffff;
        }

        .summary-coupon-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.8rem;
            color: #8B5CF6;
            background: rgba(139, 92, 246, 0.1);
            padding: 4px 8px;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
        }

        .summary-total {
            display: flex;
            justify-content: space-between;
            font-weight: 700;
            font-size: 1rem;
            padding-top: 12px;
            border-top: 2px solid rgba(139, 92, 246, 0.3);
            margin-top: 12px;
            color: #ffffff;
        }

        .total-amount {
            color: #D4AF37;
            font-size: 1.1rem;
        }

        .free-shipping-promo {
            background: rgba(139, 92, 246, 0.1);
            border: 1px dashed #8B5CF6;
            border-radius: var(--border-radius-sm);
            padding: 8px;
            margin: 12px 0;
            text-align: center;
            display: none;
        }

        .free-shipping-promo.show {
            display: block;
        }

        .promo-text {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 2px;
            font-size: 0.8rem;
        }

        .promo-subtext {
            font-size: 0.75rem;
            color: #cccccc;
        }

        .progress-bar {
            height: 3px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 1px;
            margin: 8px 0 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #8B5CF6, #D4AF37);
            border-radius: 1px;
            transition: width 0.4s ease;
        }

        .cart-actions {
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.5);
            border-top: 1px solid rgba(139, 92, 246, 0.3);
            display: flex;
            flex-direction: column;
            gap: 8px;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.3);
        }

        .checkout-btn {
            padding: 10px;
            background: linear-gradient(135deg, #8B5CF6, #6D28D9);
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            font-weight: 700;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .checkout-btn:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 3px 10px rgba(139, 92, 246, 0.4);
        }

        .clear-cart-btn {
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .clear-cart-btn:hover:not(:disabled) {
            background: rgba(139, 92, 246, 0.2);
            border-color: #8B5CF6;
            transform: translateY(-1px);
        }

        .checkout-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 12px;
        }

        .checkout-modal.active {
            display: flex;
        }

        .modal-content {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 15px;
            max-width: 400px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .modal-header h3 {
            margin: 0;
            color: #ffffff;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 0.9rem;
            cursor: pointer;
            color: #8B5CF6;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .close-modal:hover {
            background: rgba(139, 92, 246, 0.2);
            color: #ffffff;
        }

        .form-group {
            margin-bottom: 12px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600;
            color: #ffffff;
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.85rem;
        }

        .form-input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            font-family: inherit;
            font-size: 0.85rem;
            transition: var(--transition);
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
        }

        .form-input:focus {
            outline: none;
            border-color: #8B5CF6;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }

        .date-selector-container {
            position: relative;
        }

        .date-selector-container input[type="date"] {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            font-family: inherit;
            font-size: 0.85rem;
            transition: var(--transition);
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
        }

        .date-selector-container input[type="date"]:focus {
            outline: none;
            border-color: #8B5CF6;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }

        .date-selector-container input[type="date"].error {
            border-color: var(--error);
        }

        .date-error {
            color: var(--error);
            font-size: 0.7rem;
            margin-top: 4px;
            animation: fadeIn 0.2s ease;
        }

        .date-hint i {
            color: #8B5CF6;
        }

        .date-hint {
            font-size: 0.75rem; 
            color: #cccccc; 
            margin-top: 5px;
        }

        .delivery-options {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .delivery-option {
            padding: 10px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: flex-start;
            gap: 8px;
            background: rgba(0, 0, 0, 0.2);
        }

        .delivery-option:hover {
            border-color: #8B5CF6;
            background: rgba(139, 92, 246, 0.1);
        }

        .delivery-option.selected {
            border-color: #8B5CF6;
            background: rgba(139, 92, 246, 0.2);
        }

        .delivery-info {
            flex: 1;
        }

        .delivery-name {
            font-weight: 600;
            margin-bottom: 2px;
            color: #ffffff;
            font-size: 0.85rem;
        }

        .delivery-address {
            color: #cccccc;
            font-size: 0.75rem;
        }

        .map-link {
            font-size: 0.75rem;
            color: #8B5CF6;
            text-decoration: none;
            margin-top: 3px;
            display: inline-flex;
            align-items: center;
            gap: 3px;
            transition: var(--transition);
            opacity: 0.8;
        }

        .map-link:hover {
            opacity: 1;
            color: #D4AF37;
            text-decoration: underline;
        }

        .payment-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6px;
        }

        .payment-option {
            padding: 10px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            font-weight: 600;
            font-size: 0.8rem;
            background: rgba(0, 0, 0, 0.2);
            color: #ffffff;
        }

        .payment-option:hover {
            border-color: #8B5CF6;
            background: rgba(139, 92, 246, 0.1);
        }

        .payment-option.selected {
            border-color: #8B5CF6;
            background: rgba(139, 92, 246, 0.2);
        }

        .transfer-info {
            margin-top: 12px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            display: none;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .transfer-info.show {
            display: block;
        }

        .transfer-details {
            margin-top: 6px;
        }

        .transfer-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
            font-size: 0.75rem;
        }

        .transfer-label {
            color: #cccccc;
        }

        .transfer-value {
            font-weight: 600;
            color: #D4AF37;
        }

        .modal-actions {
            display: flex;
            gap: 8px;
            margin-top: 15px;
        }

        .btn-secondary {
            flex: 1;
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.85rem;
        }

        .btn-secondary:hover {
            background: rgba(139, 92, 246, 0.2);
            border-color: #8B5CF6;
        }

        .btn-primary {
            flex: 1;
            padding: 8px;
            background: linear-gradient(135deg, #8B5CF6, #6D28D9);
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }

        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 3000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 12px;
        }

        .auth-modal.active {
            display: flex;
        }

        .auth-content {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 20px;
            max-width: 400px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .auth-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .auth-icon {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #8B5CF6, #6D28D9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: white;
            font-size: 1.2rem;
        }

        .auth-title {
            font-size: 1.3rem;
            font-weight: 800;
            margin-bottom: 8px;
            color: #ffffff;
        }

        .auth-subtitle {
            color: #cccccc;
            font-size: 0.9rem;
        }

        .admin-panel {
            position: fixed;
            top: 0;
            right: -450px;
            width: 420px;
            height: 100vh;
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: -3px 0 15px rgba(139, 92, 246, 0.3);
            z-index: 3001;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            border-left: 1px solid rgba(139, 92, 246, 0.3);
        }

        .admin-panel.open {
            right: 0;
        }

        .admin-header {
            padding: 15px;
            background: linear-gradient(135deg, #1a0b2e, #2d1b3a);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(139, 92, 246, 0.3);
        }

        .admin-title {
            font-size: 1.1rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .close-admin {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(139, 92, 246, 0.2);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .close-admin:hover {
            background: rgba(139, 92, 246, 0.4);
            transform: rotate(90deg);
            border-color: #D4AF37;
        }

        .admin-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }

        .admin-view-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }
        .view-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: var(--border-radius-sm);
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }
        .view-btn.active {
            background: #8B5CF6;
            color: white;
            border-color: #8B5CF6;
        }

        .admin-tabs {
            display: flex;
            gap: 4px;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(139, 92, 246, 0.3);
            padding-bottom: 10px;
            flex-wrap: wrap;
        }

        .admin-tab {
            flex: 1;
            padding: 8px 10px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            text-align: center;
            font-size: 0.75rem;
            min-width: 70px;
            color: #ffffff;
        }

        .admin-tab:hover {
            border-color: #8B5CF6;
            transform: translateY(-1px);
            background: rgba(139, 92, 246, 0.2);
        }

        .admin-tab.active {
            background: #8B5CF6;
            color: white;
            border-color: #8B5CF6;
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
        }

        .section-title-admin {
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #ffffff;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .admin-form {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
            margin-bottom: 15px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 10px;
        }

        .form-group-admin {
            margin-bottom: 10px;
        }

        .form-label-admin {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #ffffff;
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.8rem;
        }

        .form-input-admin {
            width: 100%;
            padding: 7px 9px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            font-family: inherit;
            font-size: 0.8rem;
            transition: var(--transition);
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
        }

        .form-input-admin:focus {
            outline: none;
            border-color: #8B5CF6;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }

        .form-textarea {
            width: 100%;
            padding: 7px 9px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            font-family: inherit;
            font-size: 0.8rem;
            transition: var(--transition);
            resize: vertical;
            min-height: 70px;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
        }

        .form-select {
            width: 100%;
            padding: 7px 9px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            font-family: inherit;
            font-size: 0.8rem;
            transition: var(--transition);
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
        }

        .multi-input-container {
            display: flex;
            gap: 6px;
            margin-bottom: 6px;
        }

        .multi-input {
            flex: 1;
            padding: 7px 9px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            font-family: inherit;
            font-size: 0.8rem;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
        }

        .add-btn {
            padding: 7px 10px;
            background: #8B5CF6;
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .add-btn:hover {
            background: #7C3AED;
            transform: translateY(-1px);
        }

        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 8px;
            max-height: 100px;
            overflow-y: auto;
            padding: 5px;
            background: rgba(139, 92, 246, 0.1);
            border-radius: var(--border-radius-sm);
        }

        .tag {
            background: rgba(139, 92, 246, 0.2);
            color: #ffffff;
            padding: 3px 7px;
            border-radius: var(--border-radius-sm);
            font-size: 0.7rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .tag-remove {
            cursor: pointer;
            font-size: 0.65rem;
            opacity: 0.7;
        }

        .tag-remove:hover {
            opacity: 1;
        }

        .form-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .btn-save {
            flex: 1;
            padding: 8px;
            background: linear-gradient(135deg, #8B5CF6, #6D28D9);
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .btn-save:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }

        .btn-cancel {
            flex: 1;
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .btn-cancel:hover {
            background: rgba(139, 92, 246, 0.2);
            border-color: #8B5CF6;
            transform: translateY(-1px);
        }

        .variant-system-container {
            margin-bottom: 12px;
        }

        .variant-field {
            background: rgba(139, 92, 246, 0.1);
            border-radius: var(--border-radius-sm);
            padding: 8px;
            margin-bottom: 8px;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .variant-field-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }

        .variant-field-title {
            font-weight: 600;
            color: #8B5CF6;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .remove-variant-btn {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            width: 22px;
            height: 22px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.65rem;
            transition: var(--transition);
        }

        .remove-variant-btn:hover {
            transform: scale(1.1);
        }

        .variant-options-container {
            margin-top: 8px;
        }

        .variant-option-item {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 4px;
        }

        .stock-system-container {
            margin-top: 12px;
        }

        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .stock-table-container {
            max-height: 150px;
            overflow-y: auto;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            font-size: 0.7rem;
        }

        .stock-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.7rem;
        }

        .stock-table th {
            background: rgba(139, 92, 246, 0.2);
            padding: 5px;
            text-align: left;
            font-weight: 600;
            color: #ffffff;
            border-bottom: 1px solid rgba(139, 92, 246, 0.3);
            position: sticky;
            top: 0;
        }

        .stock-table td {
            padding: 5px;
            border-bottom: 1px solid rgba(139, 92, 246, 0.1);
            color: #ffffff;
        }

        .stock-input {
            width: 50px;
            padding: 3px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            text-align: center;
            font-size: 0.7rem;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
        }

        .coupon-admin-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
            margin-bottom: 15px;
        }

        .coupon-item-admin {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: var(--border-radius-sm);
            padding: 10px;
            margin-bottom: 8px;
            transition: var(--transition);
        }

        .coupon-item-admin:hover {
            background: rgba(139, 92, 246, 0.2);
            border-color: #8B5CF6;
        }

        .coupon-header-admin {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
        }

        .coupon-code-admin {
            font-weight: 700;
            color: #8B5CF6;
            background: rgba(139, 92, 246, 0.2);
            padding: 3px 8px;
            border-radius: var(--border-radius-sm);
            font-size: 0.8rem;
        }

        .coupon-actions-admin {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        .coupon-expiry-badge {
            font-size: 0.65rem;
            padding: 2px 6px;
            border-radius: 12px;
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            display: inline-flex;
            align-items: center;
            gap: 3px;
        }

        .coupon-details-admin {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid rgba(139, 92, 246, 0.2);
        }

        .coupon-detail-item {
            display: flex;
            flex-direction: column;
        }

        .coupon-detail-label {
            font-size: 0.7rem;
            color: #cccccc;
        }

        .coupon-detail-value {
            font-weight: 600;
            color: #ffffff;
            font-size: 0.8rem;
        }

        .coupon-detail-value i {
            color: #8B5CF6;
            margin-right: 4px;
        }

        .coupon-type-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .coupon-type-option {
            flex: 1;
            padding: 8px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            text-align: center;
            transition: var(--transition);
            font-size: 0.8rem;
            min-width: 100px;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
        }

        .coupon-type-option:hover {
            border-color: #8B5CF6;
            background: rgba(139, 92, 246, 0.2);
        }

        .coupon-type-option.selected {
            background: #8B5CF6;
            color: white;
            border-color: #8B5CF6;
        }

        .coupon-type-option.selected i {
            color: white;
        }

        .coupon-field-group {
            margin-bottom: 10px;
        }

        .coupon-field-label {
            display: block;
            margin-bottom: 4px;
            font-weight: 600;
            color: #ffffff;
            font-size: 0.75rem;
        }

        .coupon-input {
            width: 100%;
            padding: 6px 8px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            font-size: 0.8rem;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
        }

        .coupon-input:focus {
            border-color: #8B5CF6;
            outline: none;
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }

        .coupon-expiry-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .coupon-expiry-field {
            flex: 1;
            min-width: 80px;
        }

        .coupons-list-admin {
            max-height: 350px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .products-list-admin {
            max-height: 350px;
            overflow-y: auto;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            background: rgba(0, 0, 0, 0.3);
        }

        .product-item-admin {
            padding: 8px;
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: move;
            transition: var(--transition);
        }

        .product-item-admin:hover {
            background: rgba(139, 92, 246, 0.2);
        }

        .product-item-admin.dragging {
            opacity: 0.5;
            background: rgba(139, 92, 246, 0.3);
        }

        .products-grid-admin {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 15px;
            max-height: 350px;
            overflow-y: auto;
            padding: 5px;
        }
        .product-grid-item-admin {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
            transition: var(--transition);
            display: flex;
            flex-direction: column;
        }
        .product-grid-item-admin:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }

        .product-image-admin {
            width: 45px;
            height: 45px;
            object-fit: cover;
            border-radius: var(--border-radius-sm);
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .product-info-admin {
            flex: 1;
            min-width: 0;
        }

        .product-name-admin {
            font-weight: 700;
            font-size: 0.8rem;
            margin-bottom: 2px;
            color: #ffffff;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .product-category-admin {
            font-size: 0.7rem;
            color: #8B5CF6;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .product-price-admin {
            font-weight: 700;
            color: #D4AF37;
            font-size: 0.75rem;
        }

        .product-actions-admin {
            display: flex;
            gap: 4px;
            flex-shrink: 0;
        }

        .product-action-btn {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.65rem;
        }

        .edit-btn-admin {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }

        .delete-btn-admin {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
        }
        
        .clone-btn-admin {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .product-action-btn:hover {
            transform: scale(1.1);
        }

        .categories-list-admin {
            max-height: 350px;
            overflow-y: auto;
        }

        .category-item-admin {
            padding: 10px;
            border-bottom: 1px solid rgba(139, 92, 246, 0.2);
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: move;
            transition: var(--transition);
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            margin-bottom: 6px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .category-item-admin:hover {
            background: rgba(139, 92, 246, 0.2);
            transform: translateY(-1px);
        }

        .category-item-admin.dragging {
            opacity: 0.5;
            background: rgba(139, 92, 246, 0.3);
        }

        .category-info-admin {
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 0;
        }

        .category-icon-admin {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .category-details-admin {
            flex: 1;
            min-width: 0;
        }

        .category-name-admin {
            font-weight: 700;
            font-size: 0.85rem;
            margin-bottom: 3px;
            color: #ffffff;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .category-stats-admin {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.75rem;
        }

        .category-product-count {
            color: #cccccc;
        }

        .category-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.2);
            flex-shrink: 0;
        }

        .category-actions-admin {
            display: flex;
            gap: 4px;
            flex-shrink: 0;
        }

        .category-action-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.75rem;
        }

        .edit-category-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }

        .delete-category-btn {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
        }

        .category-action-btn:hover:not(:disabled) {
            transform: scale(1.1);
        }

        .delete-category-btn:disabled {
            background: #64748b;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .format-guide {
            margin-top: 8px;
            padding: 8px;
            background: rgba(139, 92, 246, 0.1);
            border-radius: var(--border-radius-sm);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .format-example {
            font-size: 0.7rem;
            padding: 3px 6px;
            background: rgba(139, 92, 246, 0.2);
            border-radius: var(--border-radius-sm);
            margin-bottom: 3px;
            color: #8B5CF6;
            font-family: 'Consolas', monospace;
            display: none;
        }

        .format-example.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-bottom: 12px;
        }

        .stat-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 10px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .stat-icon {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 6px;
            font-size: 0.9rem;
            color: white;
        }

        .stat-value {
            font-size: 1.1rem;
            font-weight: 800;
            color: #ffffff;
            margin-bottom: 2px;
        }

        .stat-label {
            font-size: 0.7rem;
            color: #cccccc;
        }

        .export-options {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
            margin-bottom: 12px;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 8px;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            color: #ffffff;
        }

        .status-message {
            padding: 8px;
            border-radius: var(--border-radius-sm);
            margin-bottom: 10px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 6px;
            display: none;
        }

        .status-success {
            background: rgba(46, 139, 87, 0.2);
            border: 1px solid rgba(46, 139, 87, 0.3);
            color: #2e8b57;
        }

        .status-error {
            background: rgba(204, 51, 51, 0.2);
            border: 1px solid rgba(204, 51, 51, 0.3);
            color: #cc3333;
        }

        .status-info {
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: #8B5CF6;
        }

        .editor-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.2);
            margin-bottom: 12px;
        }

        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .editor-actions {
            display: flex;
            gap: 6px;
        }

        .btn-preview {
            padding: 7px 10px;
            background: #8B5CF6;
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .btn-preview:hover {
            background: #7C3AED;
            transform: translateY(-1px);
        }

        .editor-categories-list {
            margin-top: 15px;
        }

        .editor-category-item {
            padding: 10px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            margin-bottom: 8px;
            background: rgba(0, 0, 0, 0.3);
            transition: var(--transition);
        }

        .editor-category-item:hover {
            border-color: #8B5CF6;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.2);
        }

        .editor-category-item.dragging {
            opacity: 0.5;
            background: rgba(139, 92, 246, 0.1);
        }

        .editor-category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .editor-category-title {
            font-weight: 700;
            font-size: 0.85rem;
            color: #ffffff;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .editor-category-actions {
            display: flex;
            gap: 4px;
        }

        .editor-category-content {
            display: grid;
            grid-template-columns: 80px 1fr;
            gap: 10px;
        }

        .editor-category-preview {
            width: 80px;
            height: 80px;
            border-radius: var(--border-radius-sm);
            overflow: hidden;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .editor-category-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .editor-category-fields {
            flex: 1;
        }

        .color-preview {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: inline-block;
            vertical-align: middle;
            margin-left: 4px;
        }

        .section-preview {
            display: none;
        }

        .banners-list-admin {
            max-height: 350px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .banner-item-admin {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 12px;
            margin-bottom: 10px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            transition: var(--transition);
            position: relative;
        }

        .banner-item-admin:hover {
            border-color: #8B5CF6;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.2);
        }

        .banner-header-admin {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .banner-title-admin {
            font-weight: 700;
            color: #ffffff;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .banner-badge-admin {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.65rem;
            font-weight: 600;
            color: white;
            background: #8B5CF6;
        }

        .banner-preview {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px dashed rgba(139, 92, 246, 0.3);
        }

        .banner-preview-color {
            width: 30px;
            height: 30px;
            border-radius: var(--border-radius-sm);
        }

        .banner-preview-info {
            flex: 1;
            font-size: 0.75rem;
            color: #ffffff;
        }

        .banner-preview-link {
            color: #8B5CF6;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .banner-actions-admin {
            display: flex;
            gap: 6px;
        }

        .delivery-editor-section {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            margin-bottom: 15px;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .delivery-editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(139, 92, 246, 0.3);
            padding-bottom: 8px;
        }

        .delivery-editor-title {
            font-weight: 700;
            color: #ffffff;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .delivery-editor-actions {
            display: flex;
            gap: 6px;
        }

        .delivery-points-list {
            margin-bottom: 15px;
        }

        .delivery-point-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 10px;
            margin-bottom: 8px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .delivery-point-info {
            flex: 1;
        }

        .delivery-point-name {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 2px;
            font-size: 0.85rem;
        }

        .delivery-point-address {
            color: #cccccc;
            font-size: 0.75rem;
        }

        .delivery-point-actions {
            display: flex;
            gap: 4px;
        }

        .delivery-point-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.75rem;
            flex-shrink: 0;
        }

        .edit-delivery-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }

        .delete-delivery-btn {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            color: white;
        }

        .delivery-point-btn:hover {
            transform: scale(1.1);
        }

        .delivery-times-list {
            margin-bottom: 15px;
        }

        .delivery-time-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 10px;
            margin-bottom: 8px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .delivery-time-value {
            font-weight: 600;
            color: #ffffff;
        }

        .delivery-time-actions {
            display: flex;
            gap: 4px;
        }

        .transfer-data-editor {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 12px;
            margin-bottom: 15px;
        }

        .transfer-data-row {
            display: flex;
            margin-bottom: 8px;
            align-items: center;
        }

        .transfer-data-label {
            width: 80px;
            font-weight: 600;
            color: #ffffff;
            font-size: 0.8rem;
        }

        .transfer-data-input {
            flex: 1;
            padding: 6px 8px;
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            font-size: 0.8rem;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
        }

        /* Estilos para Configuración General */
        .general-social-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 12px;
            margin-bottom: 8px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .general-social-icon {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .general-social-info {
            flex: 1;
        }

        .general-social-name {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 2px;
            font-size: 0.85rem;
        }

        .general-social-url {
            color: #8B5CF6;
            font-size: 0.75rem;
            word-break: break-all;
        }

        .general-social-actions {
            display: flex;
            gap: 4px;
            flex-shrink: 0;
        }

        .general-contact-item {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 12px;
            margin-bottom: 8px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .general-contact-icon {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #8B5CF6;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1rem;
            flex-shrink: 0;
        }

        .general-contact-info {
            flex: 1;
        }

        .general-contact-type {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 2px;
            font-size: 0.8rem;
            text-transform: capitalize;
        }

        .general-contact-value {
            color: #D4AF37;
            font-size: 0.85rem;
        }

        .general-contact-actions {
            display: flex;
            gap: 4px;
            flex-shrink: 0;
        }

        .general-btn-small {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.7rem;
            color: white;
        }

        .general-btn-edit {
            background: linear-gradient(135deg, #4CAF50, #45a049);
        }

        .general-btn-delete {
            background: linear-gradient(135deg, #f44336, #d32f2f);
        }

        .general-btn-add {
            background: linear-gradient(135deg, #8B5CF6, #6D28D9);
            color: white;
            border: none;
            border-radius: var(--border-radius-sm);
            padding: 8px 12px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.8rem;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .general-btn-add:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
        }

        .general-contact-row {
            margin-bottom: 12px;
            border-bottom: 1px dashed rgba(139, 92, 246, 0.3);
            padding-bottom: 12px;
        }

        .general-contact-row:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .main-footer {
            background: linear-gradient(135deg, #0a0a0a, #1a0b2e);
            color: white;
            padding: 30px 0 15px;
            border-top: 1px solid rgba(139, 92, 246, 0.3);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .footer-section h3 {
            font-size: 1rem;
            margin-bottom: 12px;
            color: white;
            position: relative;
            padding-bottom: 6px;
        }

        .footer-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 35px;
            height: 2px;
            background: linear-gradient(90deg, #8B5CF6, #D4AF37);
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 6px;
        }

        .footer-links a {
            color: #cccccc;
            text-decoration: none;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.8rem;
        }

        .footer-links a:hover {
            color: #8B5CF6;
            transform: translateX(2px);
        }

        .copyright {
            text-align: center;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #999999;
            font-size: 0.75rem;
        }

        /* Estilos para el sistema de tracking */
        .tracking-icon {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 65px;
            height: 65px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            transition: var(--transition);
            border: 3px solid rgba(255, 255, 255, 0.3);
            font-weight: 600;
            color: white;
        }

        .tracking-icon:hover {
            transform: scale(1.08) translateY(-3px);
        }

        .tracking-icon.pendiente { background: linear-gradient(135deg, var(--tracking-pendiente), #d97706); }
        .tracking-icon.preparacion { background: linear-gradient(135deg, var(--tracking-preparacion), #2563eb); }
        .tracking-icon.en-ruta { background: linear-gradient(135deg, var(--tracking-en-ruta), #6d28d9); }
        .tracking-icon.entregado { background: linear-gradient(135deg, var(--tracking-entregado), #047857); }
        .tracking-icon.problema { background: linear-gradient(135deg, var(--tracking-problema), #b91c1c); }
        .tracking-icon.cancelado { background: linear-gradient(135deg, var(--tracking-cancelado), #475569); }

        .tracking-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: white;
            color: #8B5CF6;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 700;
            border: 2px solid #8B5CF6;
        }

        .tracking-panel {
            position: fixed;
            top: 0;
            right: -450px;
            width: 400px;
            height: 100vh;
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: -3px 0 15px rgba(139, 92, 246, 0.3);
            z-index: 1002;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            border-left: 1px solid rgba(139, 92, 246, 0.3);
        }

        .tracking-panel.open {
            right: 0;
        }

        .tracking-header {
            padding: 15px;
            background: linear-gradient(135deg, #1a0b2e, #2d1b3a);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(139, 92, 246, 0.3);
        }

        .tracking-title {
            font-size: 1.1rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .close-tracking {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(139, 92, 246, 0.2);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .close-tracking:hover {
            background: rgba(139, 92, 246, 0.4);
            transform: rotate(90deg);
        }

        .tracking-content {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }

        .tracking-order-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius);
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            border-left: 4px solid #8B5CF6;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .tracking-order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .tracking-order-id {
            font-weight: 700;
            color: #ffffff;
            font-size: 0.9rem;
        }

        .tracking-order-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            color: white;
        }

        .status-pendiente { background: var(--tracking-pendiente); }
        .status-preparacion { background: var(--tracking-preparacion); }
        .status-en-ruta { background: var(--tracking-en-ruta); }
        .status-entregado { background: var(--tracking-entregado); }
        .status-problema { background: var(--tracking-problema); }
        .status-cancelado { background: var(--tracking-cancelado); }

        .tracking-timeline {
            margin: 15px 0;
            position: relative;
            padding-left: 20px;
        }

        .timeline-item {
            position: relative;
            padding-bottom: 15px;
            padding-left: 20px;
            border-left: 2px solid rgba(139, 92, 246, 0.3);
        }

        .timeline-item:last-child {
            border-left-color: transparent;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -6px;
            top: 0;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #8B5CF6;
        }

        .timeline-item.completed::before {
            background: #2e8b57;
        }

        .timeline-item.active::before {
            background: #D4AF37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.3);
            animation: pulse 2s infinite;
        }

        .timeline-time {
            font-size: 0.7rem;
            color: #cccccc;
            margin-bottom: 2px;
        }

        .timeline-title {
            font-weight: 600;
            font-size: 0.8rem;
            color: #ffffff;
            margin-bottom: 2px;
        }

        .timeline-description {
            font-size: 0.75rem;
            color: #cccccc;
        }

        .tracking-guide {
            background: rgba(0, 0, 0, 0.3);
            border-radius: var(--border-radius-sm);
            padding: 10px;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .guide-number {
            font-family: monospace;
            font-weight: 700;
            color: #D4AF37;
        }

        .copy-guide {
            padding: 4px 8px;
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            font-size: 0.7rem;
            transition: var(--transition);
            color: #ffffff;
        }

        .copy-guide:hover {
            background: #8B5CF6;
            color: white;
            border-color: #8B5CF6;
        }

        .tracking-actions {
            display: flex;
            gap: 8px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .tracking-btn {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            min-width: 100px;
        }

        .btn-confirm {
            background: linear-gradient(135deg, var(--success), #047857);
            color: white;
        }

        .btn-reschedule {
            background: linear-gradient(135deg, var(--tracking-problema), #b91c1c);
            color: white;
        }

        .btn-cancel-order {
            background: linear-gradient(135deg, var(--tracking-cancelado), #475569);
            color: white;
        }

        .tracking-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .reschedule-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2500;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 12px;
        }

        .reschedule-modal.active {
            display: flex;
        }

        /* Modal de confirmación */
        .confirm-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 3000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 12px;
        }

        .confirm-modal.active {
            display: flex;
        }

        .confirm-content {
            background: rgba(20, 20, 20, 0.95);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 20px;
            max-width: 350px;
            width: 100%;
            text-align: center;
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.3);
            animation: scaleIn 0.3s ease;
        }

        @keyframes scaleIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .confirm-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
        }

        .confirm-icon.warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .confirm-icon.success {
            background: linear-gradient(135deg, var(--success), #047857);
            color: white;
        }

        .confirm-icon.error {
            background: linear-gradient(135deg, var(--error), #b91c1c);
            color: white;
        }

        .confirm-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #ffffff;
        }

        .confirm-message {
            color: #cccccc;
            font-size: 0.9rem;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .confirm-buttons {
            display: flex;
            gap: 10px;
        }

        .confirm-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.85rem;
        }

        .confirm-btn.cancel {
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .confirm-btn.cancel:hover {
            background: rgba(139, 92, 246, 0.2);
        }

        .confirm-btn.confirm {
            background: linear-gradient(135deg, var(--error), #b91c1c);
            color: white;
        }

        .confirm-btn.confirm:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }

        .confirm-btn.success {
            background: linear-gradient(135deg, var(--success), #047857);
            color: white;
        }

        .confirm-btn.success:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        @media (max-width: 992px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .search-container {
                max-width: 300px;
            }
        }

        @media (max-width: 768px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .form-row {
                grid-template-columns: 1fr;
            }
            .admin-panel {
                width: 100%;
                right: -100%;
            }
            .tracking-panel {
                width: 100%;
                right: -100%;
            }
            .stock-table-container {
                max-height: 150px;
            }
            .editor-category-content {
                grid-template-columns: 1fr;
            }
            .editor-category-preview {
                width: 100%;
                height: 150px;
            }
            .search-container {
                max-width: 200px;
            }
            .nav-links {
                display: none;
            }
            .coupon-type-selector {
                flex-direction: column;
            }
            .coupon-expiry-row {
                flex-direction: column;
            }
        }

        @media (max-width: 576px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            .product-image-carousel {
                height: 150px;
            }
            .product-info {
                padding: 6px;
            }
            .admin-panel {
                width: 100%;
                right: -100%;
            }
            .tracking-panel {
                width: 100%;
                right: -100%;
            }
            .admin-tab {
                padding: 6px 8px;
                font-size: 0.7rem;
                min-width: 60px;
            }
            .form-input-admin, 
            .form-select, 
            .form-textarea {
                font-size: 0.75rem;
                padding: 6px 8px;
            }
            .cart-icon {
                width: 55px;
                height: 55px;
                bottom: 15px;
                right: 15px;
            }
            .tracking-icon {
                width: 55px;
                height: 55px;
                bottom: 80px;
                right: 15px;
            }
            .cart-count {
                width: 20px;
                height: 20px;
                font-size: 0.65rem;
            }
            .search-container {
                max-width: 150px;
                margin: 0 8px;
            }
            .search-input {
                padding: 8px 12px 8px 35px;
                font-size: 0.8rem;
            }
            .search-icon {
                left: 10px;
                font-size: 0.8rem;
            }
            .clear-search {
                right: 10px;
            }
            .coupon-details-admin {
                grid-template-columns: 1fr;
            }
            .coupon-expiry-row {
                flex-wrap: wrap;
            }
            .carousel-btn {
                width: 24px;
                height: 24px;
                font-size: 0.7rem;
            }
            .carousel-indicators {
                padding: 2px 8px;
                gap: 4px;
            }
            .indicator-dot {
                width: 5px;
                height: 5px;
            }
            .view-fullscreen-btn {
                width: 24px;
                height: 24px;
                font-size: 0.7rem;
            }
        }

        @media (max-width: 400px) {
            .search-container {
                max-width: 120px;
            }
            .search-input::placeholder {
                font-size: 0.75rem;
            }
        }
    </style>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800&amp;display=swap" rel="stylesheet">
</head>
<body style="overflow: hidden; margin: 0px;">
    <!-- Fondo de partículas morado y negro -->
    <canvas id="particlesCanvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; background: radial-gradient(circle at 30% 30%, #1a0b2e, #0a0a0a 80%);" width="767" height="695"></canvas>

    <!-- Image Modal con Carrusel (Integrado) -->
    <div class="image-modal-overlay" id="imageModal" data-gallery="[&quot;https://i.postimg.cc/PJLXL6vn/3_AZUL_MARINO.png&quot;]" data-current-index="0" data-product-id="1" data-color="Azul marino">
        <div class="image-modal">
            <button class="close-image-modal" id="closeImageModal">
                <i class="fas fa-times"></i>
            </button>
            <button class="modal-nav-btn prev-btn" id="prevImageBtn" style="display: none;">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="modal-nav-btn next-btn" id="nextImageBtn" style="display: none;">
                <i class="fas fa-chevron-right"></i>
            </button>
            <div class="modal-image-counter" id="imageCounter" style="display: none;">1 / 1</div>
            <img id="modalImage" src="https://i.postimg.cc/d1STH236/5.jpg" alt="LEGINS">
        </div>
    </div>

    <!-- Modal de confirmación para acciones importantes -->
    <div class="confirm-modal" id="confirmModal">
        <div class="confirm-content">
            <div class="confirm-icon" id="confirmIcon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h3 class="confirm-title" id="confirmTitle">¿Estás seguro?</h3>
            <p class="confirm-message" id="confirmMessage">Esta acción no se puede deshacer.</p>
            <div class="confirm-buttons">
                <button class="confirm-btn cancel" id="confirmCancel">Cancelar</button>
                <button class="confirm-btn confirm" id="confirmAccept">Confirmar</button>
            </div>
        </div>
    </div>

    <div class="auth-modal" id="authModal">
        <div class="auth-content">
            <div class="auth-header">
                <div class="auth-icon">
                    <i class="fas fa-lock"></i>
                </div>
                <h2 class="auth-title">Panel de Administración</h2>
                <p class="auth-subtitle">Ingresa el PIN de acceso</p>
            </div>
            
            <form id="authForm">
                <div class="form-group-admin">
                    <label class="form-label-admin">
                        <i class="fas fa-key"></i> PIN de Acceso:
                    </label>
                    <input type="password" id="pinInput" class="form-input-admin" maxlength="6" placeholder="Ingresa el PIN de 6 dígitos" required="">
                </div>
                
                <div class="status-message status-success" id="authMessage" style="display: none;"><i class="fas fa-check-circle"></i><span>PIN correcto. Accediendo al panel...</span></div>
                
                <div class="form-actions">
                    <button type="button" class="btn-cancel" id="cancelAuth">
                        <i class="fas fa-times"></i>
                        Cancelar
                    </button>
                    <button type="submit" class="btn-save" id="submitAuth">
                        <i class="fas fa-sign-in-alt"></i>
                        Acceder
                    </button>
                </div>
            </form>
        </div>
    </div>

    <div class="admin-panel open" id="adminPanel">
        <div class="admin-header">
            <h2 class="admin-title">
                <i class="fas fa-cogs"></i>
                Panel de Administración
            </h2>
            <button class="close-admin" id="closeAdmin">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="admin-content">
            <div class="admin-tabs">
                <button class="admin-tab" data-tab="products">
                    <i class="fas fa-box"></i> Productos
                </button>
                <button class="admin-tab" data-tab="add">
                    <i class="fas fa-plus"></i> Agregar
                </button>
                <button class="admin-tab" data-tab="categories">
                    <i class="fas fa-tags"></i> Categorías
                </button>
                <button class="admin-tab" data-tab="banners">
                    <i class="fas fa-images"></i> Banners
                </button>
                <button class="admin-tab" data-tab="section-editor">
                    <i class="fas fa-edit"></i> Editor de Sección
                </button>
                <button class="admin-tab" data-tab="delivery">
                    <i class="fas fa-truck"></i> Entrega y Pago
                </button>
                <button class="admin-tab" data-tab="coupons">
                    <i class="fas fa-ticket-alt"></i> Cupones
                </button>
                <button class="admin-tab" data-tab="general">
                    <i class="fas fa-cog"></i> Config. General
                </button>
                <button class="admin-tab active" data-tab="export">
                    <i class="fas fa-download"></i> Exportar
                </button>
            </div>
            
            <div class="admin-section" id="productsSection">
                <h3 class="section-title-admin">
                    <i class="fas fa-list"></i>
                    Lista de Productos
                </h3>

                <div class="admin-view-selector">
                    <button class="view-btn active" data-view="list">
                        <i class="fas fa-list"></i> Vista Lista
                    </button>
                    <button class="view-btn" data-view="compact">
                        <i class="fas fa-table"></i> Vista Tabla Compacta
                    </button>
                </div>

                <div class="status-message status-info" id="reorderMessage">
                    <i class="fas fa-info-circle"></i>
                    <span>Arrastra y suelta para reordenar los productos (solo en vista lista)</span>
                </div>

                <div class="products-list-admin" id="productsListAdmin" style="display: block;"><div class="product-item-admin" data-product-id="2" draggable="true">
                        <img src="https://i.postimg.cc/QtnW4QCb/1.jpg" alt="SUDADERA" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">SUDADERA</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                SUDADERA | Hombre
                            </div>
                            <div class="product-price-admin">$130</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(2)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(2)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(2)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="15" draggable="true">
                        <img src="https://i.postimg.cc/26XBcQyT/6.jpg" alt="Chamarra deportiva" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">Chamarra deportiva</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                Chamarra | Mujer
                            </div>
                            <div class="product-price-admin">$230</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(15)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(15)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(15)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="1" draggable="true">
                        <img src="https://i.postimg.cc/bJF2CxrR/2.jpg" alt="PANS" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">PANS</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                PANS DEPORTIVO | Hombre
                            </div>
                            <div class="product-price-admin">$130</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(1)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(1)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(1)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="13" draggable="true">
                        <img src="https://i.postimg.cc/DZzXPjvN/3.jpg" alt="LEGINS RECTOS" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">LEGINS RECTOS</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                LEGINS | Mujer
                            </div>
                            <div class="product-price-admin">$210</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(13)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(13)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(13)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="4" draggable="true">
                        <img src="https://i.postimg.cc/2SbbQ252/GORRA_UNISEX_20260220_171444_0000.jpg" alt="GORRA" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">GORRA</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                GORRA | Accesorios
                            </div>
                            <div class="product-price-admin">$85</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(4)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(4)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(4)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="3" draggable="true">
                        <img src="https://i.postimg.cc/mrSbCH7D/Mochilas_20260220_171827_0000.jpg" alt="MOCHILA" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">MOCHILA</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                MOCHILA | Accesorios
                            </div>
                            <div class="product-price-admin">$250</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(3)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(3)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(3)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="5" draggable="true">
                        <img src="https://i.postimg.cc/Bb0kgYsq/CINTURONES_20260220_172850_0000.jpg" alt="CINTURO" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">CINTURO</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                CINTURON | Accesorios
                            </div>
                            <div class="product-price-admin">$75</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(5)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(5)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(5)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="8" draggable="true">
                        <img src="https://i.postimg.cc/9QMPvdQj/MUJER_20260220_171039_0000.jpg" alt="CALCETIN SPORT SOCKS" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">CALCETIN SPORT SOCKS</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                CALCETIN NIKE | Mujer
                            </div>
                            <div class="product-price-admin">25</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(8)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(8)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(8)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="17" draggable="true">
                        <img src="https://i.postimg.cc/RFbns7hX/7.jpg" alt="CONJUNTO LEGINS MUJER" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">CONJUNTO LEGINS MUJER</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                CONJUNTO LEGINS | Mujer
                            </div>
                            <div class="product-price-admin">$490</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(17)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(17)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(17)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="12" draggable="true">
                        <img src="https://i.postimg.cc/631GjrqP/9.jpg" alt="TOP" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">TOP</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                Top | Mujer
                            </div>
                            <div class="product-price-admin">$185</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(12)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(12)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(12)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="11" draggable="true">
                        <img src="https://i.postimg.cc/mD6FXYkm/8.jpg" alt="FALDA SORT" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">FALDA SORT</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                FALDAS | Mujer
                            </div>
                            <div class="product-price-admin">$180</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(11)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(11)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(11)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="14" draggable="true">
                        <img src="https://i.postimg.cc/pTdFJGW7/4.jpg" alt="LEGINS ACAMPANADOS" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">LEGINS ACAMPANADOS</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                LEGINS | Mujer
                            </div>
                            <div class="product-price-admin">$230</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(14)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(14)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(14)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="16" draggable="true">
                        <img src="https://i.postimg.cc/d1STH236/5.jpg" alt="LEGINS" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">LEGINS</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                LEGINS | Mujer
                            </div>
                            <div class="product-price-admin">$110</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(16)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(16)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(16)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="6" draggable="true">
                        <img src="https://i.postimg.cc/4y8Cxvkn/HOMBRE_2_20260220_174822_0000.jpg" alt="CALCETAS MULAYA'S" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">CALCETAS MULAYA'S</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                CALCETAS FASHION | Hombre
                            </div>
                            <div class="product-price-admin">25</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(6)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(6)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(6)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="7" draggable="true">
                        <img src="https://i.postimg.cc/RZdtVNqG/HOMBRE_1_20260220_174351_0000.jpg" alt="CALCETIN SPORT" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">CALCETIN SPORT</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                CALCETIN SPORT SOCKS | Hombre
                            </div>
                            <div class="product-price-admin">25</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(7)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(7)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(7)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="9" draggable="true">
                        <img src="https://i.postimg.cc/XJ3k1TGW/MUJER_2_20260220_173613_0000.jpg" alt="CALCETIN NIKE" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">CALCETIN NIKE</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                CALCETIN | Mujer
                            </div>
                            <div class="product-price-admin">$25</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(9)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(9)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(9)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div><div class="product-item-admin" data-product-id="10" draggable="true">
                        <img src="https://i.postimg.cc/Hxs7yH8k/MUJER_3_20260220_173842_0000.jpg" alt="CALCETIN ADIDAS" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">CALCETIN ADIDAS</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                CALCETIN | Mujer
                            </div>
                            <div class="product-price-admin">$25</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(10)" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(10)" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(10)" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div></div>
            </div>

            <div class="admin-section" id="addSection">
                <h3 class="section-title-admin">
                    <i class="fas fa-plus-circle"></i>
                    Agregar Nuevo Producto
                </h3>
                <div class="status-message status-success" id="formMessage" style="display: flex;"><i class="fas fa-check-circle"></i><span>Datos importados correctamente. La página se recargará en 3 segundos...</span></div>
                <form class="admin-form" id="productForm">
                    <div class="form-row">
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-tag"></i> Nombre:
                            </label>
                            <input type="text" id="productName" class="form-input-admin" placeholder="Nombre del producto" required="">
                        </div>
                        
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-box"></i> Categoría:
                            </label>
                            <select id="productCategory" class="form-select" required=""><option value="">Selecciona categoría</option><option value="hombre">Hombre</option><option value="mujer">Mujer</option><option value="accesorios">Accesorios</option></select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-list"></i> Subcategoría:
                            </label>
                            <input type="text" id="productSubcategory" class="form-input-admin" placeholder="Ej: Sudaderas, Mochilas, Peluches, Camas" required="">
                        </div>
                        
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-dollar-sign"></i> Precio Regular:
                            </label>
                            <input type="text" id="productPrice" class="form-input-admin" placeholder="Ej: $250" required="">
                        </div>
                    </div>
                    
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-percentage"></i> Precio de Descuento (opcional):
                        </label>
                        <input type="text" id="productDiscountPrice" class="form-input-admin" placeholder="Ej: $200 (dejar vacío si no hay descuento)">
                    </div>
                    
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-image"></i> URL de Imagen Principal:
                        </label>
                        <input type="url" id="productImage" class="form-input-admin" placeholder="https://ejemplo.com/imagen.jpg" required="">
                    </div>
                    
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-images"></i> URLs de Imágenes por Color/Variante (una por línea):
                        </label>
                        <textarea id="productImages" class="form-textarea" placeholder="Formato: Variante|URL
Ej: Negro|https://ejemplo.com/negro.jpg
Azul|https://ejemplo.com/azul.jpg
Dejar vacío si no hay imágenes por variante" style="height: 78px;"></textarea>
                    </div>
                    
                    <div class="form-group-admin">
                        <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 5px;">
                            <label class="form-label-admin" style="margin-bottom: 0;">
                                <i class="fas fa-align-left"></i> Descripción:
                            </label>
                            <button type="button" class="add-btn" id="generateDescriptionBtn" style="padding: 4px 12px; font-size: 0.75rem;">
                                <i class="fas fa-robot"></i>
                                Generar texto automático
                            </button>
                        </div>
                        <textarea id="productDescription" class="form-textarea" placeholder="Describe el producto..." required="" style="transition: background-color 0.3s; height: 133px;"></textarea>
                        <div style="font-size: 0.7rem; color: var(--text-light); margin-top: 4px;">
                            <i class="fas fa-info-circle"></i> Sistema inteligente con 13.5 MILLONES de combinaciones - nunca se repite
                        </div>
                    </div>
                    
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-shapes"></i> Sistema de Variantes Personalizado:
                        </label>
                        <div id="variantSystemContainer"></div>
                        <button type="button" class="add-btn" id="addVariantBtn">
                            <i class="fas fa-plus"></i>
                            Agregar Campo de Variante
                        </button>
                    </div>
                    
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-check-circle"></i> Especificaciones:
                        </label>
                        <div class="multi-input-container">
                            <input type="text" id="specInput" class="multi-input" placeholder="Agrega una especificación">
                            <button type="button" class="add-btn" id="addSpecBtn">
                                <i class="fas fa-plus"></i>
                                Agregar
                            </button>
                        </div>
                        <div class="tags-container" id="specsContainer"></div>
                    </div>
                    
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-star"></i> Estado:
                        </label>
                        <select id="productEstado" class="form-select" required="">
                            <option value="nuevo">Nuevo</option>
                            <option value="oferta">Oferta</option>
                            <option value="normal">Normal</option>
                            <option value="agotado">Agotado</option>
                        </select>
                    </div>
                    
                    <div class="form-group-admin">
                        <div class="stock-system-container" id="stockSystemContainer"></div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-cancel" id="resetFormBtn">
                            <i class="fas fa-redo"></i>
                            Limpiar
                        </button>
                        <button type="submit" class="btn-save" id="saveProductBtn"><i class="fas fa-save"></i> Guardar Producto</button>
                    </div>
                </form>
            </div>

            <div class="admin-section" id="categoriesSection">
                <h3 class="section-title-admin">
                    <i class="fas fa-tags"></i>
                    Gestión de Categorías
                </h3>
                <div class="status-message status-info" id="categoriesReorderMessage">
                    <i class="fas fa-info-circle"></i>
                    <span>Arrastra y suelta para reordenar las categorías</span>
                </div>
                <div class="status-message" id="categoriesMessage" style="display: none;"></div>
                
                <div class="admin-form">
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-plus-circle"></i> Agregar Nueva Categoría:
                        </label>
                        <div class="form-row">
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-tag"></i> Nombre de Categoría:
                                </label>
                                <input type="text" id="newCategoryName" class="form-input-admin" placeholder="Ej: Hombre, Mujer, Kids, Accesorios" required="">
                            </div>
                            
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-palette"></i> Color:
                                </label>
                                <input type="color" id="newCategoryColor" class="form-input-admin" style="height: 38px; padding: 4px;" value="#D4AF37">
                            </div>
                        </div>
                        
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-icons"></i> Ícono FontAwesome (opcional):
                            </label>
                            <input type="text" id="newCategoryIcon" class="form-input-admin" placeholder="fa-tshirt, fa-user, fa-child">
                        </div>
                        
                        <button type="button" class="btn-save" id="addCategoryBtn"><i class="fas fa-plus"></i> Agregar Nueva Categoría</button>
                    </div>
                </div>
                
                <h4 class="section-title-admin" style="margin-top: 20px;">
                    <i class="fas fa-list"></i>
                    Categorías Existentes
                </h4>
                <div class="categories-list-admin" id="categoriesListAdmin">
                        <div class="category-item-admin" data-category-id="hombre" draggable="true">
                            <div class="category-info-admin">
                                <div class="category-icon-admin" style="background: #2563EB;">
                                    <i class="fas fa-user-tie"></i>
                                </div>
                                <div class="category-details-admin">
                                    <div class="category-name-admin">Hombre</div>
                                    <div class="category-stats-admin">
                                        <span class="category-product-count">4 productos</span>
                                        <span class="category-color" style="background: #2563EB;"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="category-actions-admin">
                                <button class="category-action-btn edit-category-btn" onclick="admin.editarCategoria('hombre')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="category-action-btn delete-category-btn" onclick="admin.eliminarCategoria('hombre')" disabled="">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    
                        <div class="category-item-admin" data-category-id="mujer" draggable="true">
                            <div class="category-info-admin">
                                <div class="category-icon-admin" style="background: #DB2777;">
                                    <i class="fas fa-female"></i>
                                </div>
                                <div class="category-details-admin">
                                    <div class="category-name-admin">Mujer</div>
                                    <div class="category-stats-admin">
                                        <span class="category-product-count">10 productos</span>
                                        <span class="category-color" style="background: #DB2777;"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="category-actions-admin">
                                <button class="category-action-btn edit-category-btn" onclick="admin.editarCategoria('mujer')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="category-action-btn delete-category-btn" onclick="admin.eliminarCategoria('mujer')" disabled="">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    
                        <div class="category-item-admin" data-category-id="accesorios" draggable="true">
                            <div class="category-info-admin">
                                <div class="category-icon-admin" style="background: #7C3AED;">
                                    <i class="fas fa-briefcase"></i>
                                </div>
                                <div class="category-details-admin">
                                    <div class="category-name-admin">Accesorios</div>
                                    <div class="category-stats-admin">
                                        <span class="category-product-count">3 productos</span>
                                        <span class="category-color" style="background: #7C3AED;"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="category-actions-admin">
                                <button class="category-action-btn edit-category-btn" onclick="admin.editarCategoria('accesorios')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="category-action-btn delete-category-btn" onclick="admin.eliminarCategoria('accesorios')" disabled="">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
            </div>

            <div class="admin-section" id="bannersSection">
                <h3 class="section-title-admin">
                    <i class="fas fa-images"></i>
                    Gestión de Banners Publicitarios
                </h3>
                
                <div class="status-message status-info" id="bannerInfoMessage">
                    <i class="fas fa-info-circle"></i>
                    <span>Los banners se muestran en la parte superior de la página. Puedes crear banners con diferentes estilos y enlaces.</span>
                </div>
                
                <div class="status-message status-success" id="bannerMessage" style="display: none;"><i class="fas fa-check-circle"></i><span>Banner eliminado</span></div>
                
                <div class="admin-form">
                    <h4 class="section-title-admin" style="margin-top: 0; margin-bottom: 15px;">
                        <i class="fas fa-plus-circle"></i>
                        Agregar Nuevo Banner
                    </h4>
                    
                    <div class="banner-type-selector" style="display: flex; gap: 8px; margin-bottom: 15px; flex-wrap: wrap;">
                        <div class="coupon-type-option selected" data-banner-type="hero" onclick="admin.seleccionarTipoBanner('hero')" style="background: rgb(139, 92, 246); color: white;">
                            <i class="fas fa-star"></i> Hero
                        </div>
                        <div class="coupon-type-option" data-banner-type="oferta" onclick="admin.seleccionarTipoBanner('oferta')">
                            <i class="fas fa-tag"></i> Oferta
                        </div>
                        <div class="coupon-type-option" data-banner-type="info" onclick="admin.seleccionarTipoBanner('info')">
                            <i class="fas fa-info-circle"></i> Informativo
                        </div>
                        <div class="coupon-type-option" data-banner-type="flash" onclick="admin.seleccionarTipoBanner('flash')">
                            <i class="fas fa-bolt"></i> Flash
                        </div>
                    </div>
                    
                    <div id="bannerFormFields">
                        <div class="form-row">
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-heading"></i> Título:
                                </label>
                                <input type="text" id="bannerTitle" class="form-input-admin" placeholder="Ej: ¡Ofertas de Verano!" value="¡Ofertas de Verano!">
                            </div>
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-subscript"></i> Subtítulo:
                                </label>
                                <input type="text" id="bannerSubtitle" class="form-input-admin" placeholder="Ej: Hasta 50% de descuento" value="Hasta 50% de descuento">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-link"></i> Texto del Botón:
                                </label>
                                <input type="text" id="bannerButtonText" class="form-input-admin" placeholder="Ej: Comprar Ahora" value="Comprar Ahora">
                            </div>
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-external-link-alt"></i> Acción del Banner:
                                </label>
                                <select id="bannerActionType" class="form-select" onchange="admin.cambiarAccionBanner(this.value)">
                                    <option value="category">Ir a categoría</option>
                                    <option value="products-oferta">Ver productos en oferta</option>
                                    <option value="coupons">Ver cupones disponibles</option>
                                    <option value="url">URL personalizada</option>
                                </select>
                            </div>
                        </div>
                        
                        <div id="bannerCategorySelector" style="display: block;">
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-tags"></i> Categoría a mostrar:
                                </label>
                                <select id="bannerCategory" class="form-select"><option value="todo">TODOS los productos</option><option value="hombre">Hombre</option><option value="mujer">Mujer</option><option value="accesorios">Accesorios</option></select>
                            </div>
                        </div>
                        
                        <div id="bannerUrlSelector" style="display: none;">
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-link"></i> URL personalizada:
                                </label>
                                <input type="text" id="bannerCustomUrl" class="form-input-admin" placeholder="https://ejemplo.com" value="#productos">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-palette"></i> Color de Fondo:
                                </label>
                                <select id="bannerColorPreset" class="form-select" onchange="admin.cambiarColorBannerPreset(this.value)">
                                    <option value="gradient1" selected="">Morado a Rosa</option>
                                    <option value="gradient2">Azul a Verde</option>
                                    <option value="gradient3">Naranja a Rojo</option>
                                    <option value="gradient4">Negro a Dorado</option>
                                    <option value="gradient5">Rosa a Naranja</option>
                                    <option value="custom">Personalizado</option>
                                </select>
                            </div>
                            <div class="form-group-admin" id="customColorContainer" style="display: none;">
                                <label class="form-label-admin">
                                    <i class="fas fa-fill-drip"></i> Color Personalizado:
                                </label>
                                <input type="color" id="bannerCustomColor" class="form-input-admin" style="height: 38px; padding: 4px;" value="#667eea">
                            </div>
                        </div>
                        
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-font"></i> Color del Texto:
                            </label>
                            <input type="color" id="bannerTextColor" class="form-input-admin" style="height: 38px; padding: 4px;" value="#ffffff">
                        </div>
                        
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-calendar-alt"></i> Fecha de Expiración (opcional):
                            </label>
                            <input type="date" id="bannerExpiryDate" class="form-input-admin">
                            <input type="time" id="bannerExpiryTime" class="form-input-admin" style="margin-top: 5px;" value="23:59">
                        </div>
                        
                        <div class="checkbox-label" style="margin: 10px 0;">
                            <input type="checkbox" id="bannerActive" checked="">
                            <span>Activar banner inmediatamente</span>
                        </div>
                    </div>
                    
                    <div class="form-actions" style="margin-top: 15px;">
                        <button type="button" class="btn-cancel" onclick="admin.resetBannerForm()">
                            <i class="fas fa-redo"></i>
                            Limpiar
                        </button>
                        <button type="button" class="btn-save" onclick="admin.guardarBanner()">
                            <i class="fas fa-save"></i>
                            Guardar Banner
                        </button>
                    </div>
                </div>
                
                <h4 class="section-title-admin" style="margin-top: 20px;">
                    <i class="fas fa-list"></i>
                    Banners Activos
                </h4>
                
                <div class="banners-list-admin" id="bannersListAdmin">
                        <div class="status-message status-info">
                            <i class="fas fa-info-circle"></i>
                            <span>No hay banners creados. Crea tu primer banner con el formulario de arriba.</span>
                        </div>
                    </div>
            </div>

            <div class="admin-section" id="section-editorSection">
                <h3 class="section-title-admin">
                    <i class="fas fa-edit"></i>
                    Editor de Sección "Nuestras Categorías"
                </h3>
                
                <div class="status-message status-info" id="editorInfoMessage">
                    <i class="fas fa-info-circle"></i>
                    <span>Desde aquí puedes modificar el título, subtítulo y las categorías que aparecen en la página principal.</span>
                </div>
                
                <div class="status-message status-success" id="editorMessage" style="display: none;"><i class="fas fa-check-circle"></i><span>Categoría actualizada</span></div>
                
                <div class="editor-container">
                    <div class="editor-header">
                        <h4 class="section-title-admin" style="margin: 0;">
                            <i class="fas fa-cog"></i>
                            Configuración de la Sección
                        </h4>
                        <div class="editor-actions">
                            <button type="button" class="btn-save" id="saveSectionBtn">
                                <i class="fas fa-save"></i>
                                Guardar Cambios
                            </button>
                        </div>
                    </div>
                    
                    <div class="admin-form">
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-heading"></i> Título de la Sección:
                            </label>
                            <input type="text" id="sectionTitle" class="form-input-admin" placeholder="Ej: Nuestras Categorías" value="Nuestras Categorías">
                        </div>
                        
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-align-left"></i> Subtítulo/Descripción:
                            </label>
                            <textarea id="sectionSubtitle" class="form-textarea" placeholder="Ej: Explora nuestra variedad de productos organizados por categorías">Explora nuestra variedad de productos organizados por categorías</textarea>
                        </div>
                    </div>
                </div>
                
                <div class="editor-container">
                    <div class="editor-header">
                        <h4 class="section-title-admin" style="margin: 0;">
                            <i class="fas fa-tags"></i>
                            Gestión de Categorías de la Sección
                        </h4>
                        <button type="button" class="btn-save" id="addSectionCategoryBtn">
                            <i class="fas fa-plus"></i>
                            Agregar Categoría
                        </button>
                    </div>
                    
                    <div class="status-message status-info">
                        <i class="fas fa-info-circle"></i>
                        <span>Arrastra y suelta para reordenar las categorías. Cada categoría incluye: Nombre, Descripción, Imagen, Color del botón y Enlace.</span>
                    </div>
                    
                    <div class="editor-categories-list" id="sectionCategoriesList">
                    <div class="editor-category-item" data-category-id="1" draggable="true">
                        <div class="editor-category-header">
                            <div class="editor-category-title">
                                <i class="fas fa-tag"></i> Hombre
                                <span class="color-preview" style="background: #2563eb;"></span>
                            </div>
                            <div class="editor-category-actions">
                                <button class="category-action-btn edit-category-btn" onclick="admin.editarSectionCategory(1)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="category-action-btn delete-category-btn" onclick="admin.eliminarSectionCategory(1)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="editor-category-content">
                            <div class="editor-category-preview">
                                <img src="https://i.postimg.cc/QtnW4QCb/1.jpg" alt="Hombre">
                            </div>
                            <div class="editor-category-fields">
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-font"></i> Nombre:
                                    </label>
                                    <input type="text" class="form-input-admin" value="Hombre" readonly="">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-align-left"></i> Descripción:
                                    </label>
                                    <input type="text" class="form-input-admin" value="Ropa para hombres para todos los estilos" readonly="">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-link"></i> Acción:
                                    </label>
                                    <input type="text" class="form-input-admin" value="carrito.filterProducts('hombre')" readonly="">
                                </div>
                            </div>
                        </div>
                    </div>
                
                    <div class="editor-category-item" data-category-id="2" draggable="true">
                        <div class="editor-category-header">
                            <div class="editor-category-title">
                                <i class="fas fa-tag"></i> Mujer
                                <span class="color-preview" style="background: #db2777;"></span>
                            </div>
                            <div class="editor-category-actions">
                                <button class="category-action-btn edit-category-btn" onclick="admin.editarSectionCategory(2)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="category-action-btn delete-category-btn" onclick="admin.eliminarSectionCategory(2)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="editor-category-content">
                            <div class="editor-category-preview">
                                <img src="https://i.postimg.cc/mD6FXYkm/8.jpg" alt="Mujer">
                            </div>
                            <div class="editor-category-fields">
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-font"></i> Nombre:
                                    </label>
                                    <input type="text" class="form-input-admin" value="Mujer" readonly="">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-align-left"></i> Descripción:
                                    </label>
                                    <input type="text" class="form-input-admin" value="Moda femenina para todos los estilos" readonly="">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-link"></i> Acción:
                                    </label>
                                    <input type="text" class="form-input-admin" value="carrito.filterProducts('mujer')" readonly="">
                                </div>
                            </div>
                        </div>
                    </div>
                
                    <div class="editor-category-item" data-category-id="4" draggable="true">
                        <div class="editor-category-header">
                            <div class="editor-category-title">
                                <i class="fas fa-tag"></i> Accesorios
                                <span class="color-preview" style="background: #7c3aed;"></span>
                            </div>
                            <div class="editor-category-actions">
                                <button class="category-action-btn edit-category-btn" onclick="admin.editarSectionCategory(4)">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="category-action-btn delete-category-btn" onclick="admin.eliminarSectionCategory(4)">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="editor-category-content">
                            <div class="editor-category-preview">
                                <img src="https://i.postimg.cc/mrSbCH7D/Mochilas_20260220_171827_0000.jpg" alt="Accesorios">
                            </div>
                            <div class="editor-category-fields">
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-font"></i> Nombre:
                                    </label>
                                    <input type="text" class="form-input-admin" value="Accesorios" readonly="">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-align-left"></i> Descripción:
                                    </label>
                                    <input type="text" class="form-input-admin" value="Complementos para elevar tu look" readonly="">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-link"></i> Acción:
                                    </label>
                                    <input type="text" class="form-input-admin" value="carrito.filterProducts('accesorios')" readonly="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
            </div>

            <div class="admin-section" id="deliverySection">
                <h3 class="section-title-admin">
                    <i class="fas fa-truck"></i>
                    Editor de Entrega y Pago
                </h3>
                
                <div class="status-message status-info" id="deliveryInfoMessage">
                    <i class="fas fa-info-circle"></i>
                    <span>Administra los puntos de entrega, horarios disponibles y datos de transferencia.</span>
                </div>
                
                <div class="status-message status-success" id="deliveryMessage" style="display: none;"><i class="fas fa-check-circle"></i><span>Cambios guardados</span></div>
                
                <div class="delivery-editor-section">
                    <div class="delivery-editor-header">
                        <h4 class="delivery-editor-title">
                            <i class="fas fa-map-marker-alt"></i>
                            Puntos de Entrega
                        </h4>
                        <div class="delivery-editor-actions">
                            <button class="btn-save" onclick="admin.agregarPuntoEntrega()" style="padding: 6px 12px;">
                                <i class="fas fa-plus"></i> Nuevo Punto
                            </button>
                        </div>
                    </div>
                    
                    <div id="deliveryPointsList" class="delivery-points-list">
                    <div class="delivery-point-item" data-point-id="xhala">
                        <div class="delivery-point-info">
                            <div class="delivery-point-name">San Sebastián Xhala</div>
                            <div class="delivery-point-address">San Sebastián, enfrente de la universidad</div>
                        </div>
                        <div class="delivery-point-actions">
                            <button class="delivery-point-btn edit-delivery-btn" onclick="admin.editarPuntoEntrega('xhala')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="delivery-point-btn delete-delivery-btn" onclick="admin.eliminarPuntoEntrega('xhala')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                
                    <div class="delivery-point-item" data-point-id="socorro">
                        <div class="delivery-point-info">
                            <div class="delivery-point-name">El Socorro</div>
                            <div class="delivery-point-address">Colonia El Socorro, en los Arcos en frente del oxxo</div>
                        </div>
                        <div class="delivery-point-actions">
                            <button class="delivery-point-btn edit-delivery-btn" onclick="admin.editarPuntoEntrega('socorro')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="delivery-point-btn delete-delivery-btn" onclick="admin.eliminarPuntoEntrega('socorro')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                
                    <div class="delivery-point-item" data-point-id="mateo">
                        <div class="delivery-point-info">
                            <div class="delivery-point-name">San Mateo</div>
                            <div class="delivery-point-address">San Mateo, en frente de la iglesia</div>
                        </div>
                        <div class="delivery-point-actions">
                            <button class="delivery-point-btn edit-delivery-btn" onclick="admin.editarPuntoEntrega('mateo')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="delivery-point-btn delete-delivery-btn" onclick="admin.eliminarPuntoEntrega('mateo')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
                    
                    <div id="deliveryPointForm" style="display: none; background: var(--light); padding: 12px; border-radius: var(--border-radius-sm); margin-top: 10px;">
                        <div class="form-group-admin">
                            <label class="form-label-admin">Nombre del Punto:</label>
                            <input type="text" id="deliveryPointName" class="form-input-admin" placeholder="Ej: San Sebastián Xhala">
                        </div>
                        <div class="form-group-admin">
                            <label class="form-label-admin">Dirección / Descripción:</label>
                            <input type="text" id="deliveryPointAddress" class="form-input-admin" placeholder="Ej: San Sebastián, enfrente de la universidad">
                        </div>
                        <div class="form-group-admin">
                            <label class="form-label-admin">URL de Google Maps (opcional):</label>
                            <input type="text" id="deliveryPointMap" class="form-input-admin" placeholder="https://maps.app.goo.gl/...">
                        </div>
                        <div class="form-actions" style="gap: 6px;">
                            <input type="hidden" id="editingPointId" value="">
                            <button type="button" class="btn-save" onclick="admin.guardarPuntoEntrega()">
                                <i class="fas fa-save"></i> Guardar
                            </button>
                            <button type="button" class="btn-cancel" onclick="admin.cancelarPuntoEntrega()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="delivery-editor-section">
                    <div class="delivery-editor-header">
                        <h4 class="delivery-editor-title">
                            <i class="fas fa-clock"></i>
                            Horarios de Entrega
                        </h4>
                        <div class="delivery-editor-actions">
                            <button class="btn-save" onclick="admin.agregarHorarioEntrega()" style="padding: 6px 12px;">
                                <i class="fas fa-plus"></i> Nuevo Horario
                            </button>
                        </div>
                    </div>
                    
                    <div id="deliveryTimesList" class="delivery-times-list">
                        <div class="delivery-time-item" data-time-id="time1771356290191">
                            <div class="delivery-time-value">11:30 AM</div>
                            <div class="delivery-time-actions">
                                <button class="delivery-point-btn edit-delivery-btn" onclick="admin.editarHorarioEntrega('time1771356290191')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="delivery-point-btn delete-delivery-btn" onclick="admin.eliminarHorarioEntrega('time1771356290191')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    
                        <div class="delivery-time-item" data-time-id="time1771356300623">
                            <div class="delivery-time-value">7:30 PM</div>
                            <div class="delivery-time-actions">
                                <button class="delivery-point-btn edit-delivery-btn" onclick="admin.editarHorarioEntrega('time1771356300623')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="delivery-point-btn delete-delivery-btn" onclick="admin.eliminarHorarioEntrega('time1771356300623')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="deliveryTimeForm" style="display: none; background: var(--light); padding: 12px; border-radius: var(--border-radius-sm); margin-top: 10px;">
                        <div class="form-group-admin">
                            <label class="form-label-admin">Horario:</label>
                            <input type="time" id="deliveryTimeValue" class="form-input-admin" step="1800">
                        </div>
                        <div class="form-group-admin">
                            <label class="form-label-admin">Descripción (opcional):</label>
                            <input type="text" id="deliveryTimeLabel" class="form-input-admin" placeholder="Ej: 10:00 AM - Por la mañana">
                        </div>
                        <div class="form-actions" style="gap: 6px;">
                            <input type="hidden" id="editingTimeId" value="">
                            <button type="button" class="btn-save" onclick="admin.guardarHorarioEntrega()">
                                <i class="fas fa-save"></i> Guardar
                            </button>
                            <button type="button" class="btn-cancel" onclick="admin.cancelarHorarioEntrega()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="delivery-editor-section">
                    <div class="delivery-editor-header">
                        <h4 class="delivery-editor-title">
                            <i class="fas fa-university"></i>
                            Datos de Transferencia Bancaria
                        </h4>
                        <div class="delivery-editor-actions">
                            <button class="btn-save" onclick="admin.guardarTransferencia()">
                                <i class="fas fa-save"></i> Guardar Cambios
                            </button>
                        </div>
                    </div>
                    
                    <div class="transfer-data-editor">
                        <div class="transfer-data-row">
                            <span class="transfer-data-label">Nombre:</span>
                            <input type="text" id="transferNombre" class="transfer-data-input" value="Saul Flores" placeholder="Nombre del titular">
                        </div>
                        <div class="transfer-data-row">
                            <span class="transfer-data-label">Banco:</span>
                            <input type="text" id="transferBanco" class="transfer-data-input" value="STP" placeholder="Banco">
                        </div>
                        <div class="transfer-data-row">
                            <span class="transfer-data-label">CLABE:</span>
                            <input type="text" id="transferClabe" class="transfer-data-input" value="721180100001101243" placeholder="Número de cuenta o CLABE">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="admin-section" id="couponsSection">
                <h3 class="section-title-admin">
                    <i class="fas fa-ticket-alt"></i>
                    Gestión de Cupones con Cronómetro
                </h3>
                
                <div class="status-message status-info" id="couponInfoMessage">
                    <i class="fas fa-info-circle"></i>
                    <span>Los cupones aparecerán en el carrito con un cronómetro en días, horas y minutos. Se desactivan automáticamente al expirar.</span>
                </div>
                
                <div class="status-message status-success" id="couponMessage" style="display: none;"><i class="fas fa-check-circle"></i><span>Cupón eliminado</span></div>
                
                <div class="coupon-admin-container">
                    <h4 class="section-title-admin" style="margin-top: 0; margin-bottom: 15px;">
                        <i class="fas fa-plus-circle"></i>
                        Agregar Nuevo Cupón con Fecha de Expiración
                    </h4>
                    
                    <div class="coupon-type-selector" id="couponTypeSelector">
                        <div class="coupon-type-option selected" data-type="envio" onclick="admin.seleccionarTipoCupon('envio')">
                            <i class="fas fa-truck"></i> Envío Gratis
                        </div>
                        <div class="coupon-type-option" data-type="porcentaje" onclick="admin.seleccionarTipoCupon('porcentaje')">
                            <i class="fas fa-percent"></i> % Descuento
                        </div>
                        <div class="coupon-type-option" data-type="fijo" onclick="admin.seleccionarTipoCupon('fijo')">
                            <i class="fas fa-dollar-sign"></i> Descuento Fijo
                        </div>
                        <div class="coupon-type-option" data-type="2x1" onclick="admin.seleccionarTipoCupon('2x1')">
                            <i class="fas fa-gift"></i> 2x1 / 3x2
                        </div>
                    </div>
                    
                    <div id="couponFormFields">
                        <div id="envioFields" style="display: block;">
                            <div class="form-row">
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-tag"></i> Código del Cupón:
                                    </label>
                                    <input type="text" id="couponCode" class="coupon-input" placeholder="Ej: ENVIOGRATIS" value="🚚 ENVÍO GRATIS" maxlength="20">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-info-circle"></i> Descripción:
                                    </label>
                                    <input type="text" id="couponDescription" class="coupon-input" placeholder="Ej: Compras +$399" value="Compras +$399">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-coins"></i> Monto mínimo:
                                    </label>
                                    <input type="number" id="couponMinAmount" class="coupon-input" placeholder="Monto mínimo" value="399">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-tint"></i> Color del cupón:
                                    </label>
                                    <input type="color" id="couponColor" class="coupon-input" style="height: 38px; padding: 4px;" value="#10b981">
                                </div>
                            </div>
                        </div>
                        
                        <div id="porcentajeFields" style="display: none;">
                            <div class="form-row">
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-tag"></i> Código del Cupón:
                                    </label>
                                    <input type="text" id="couponCodePorcentaje" class="coupon-input" placeholder="Ej: 20OFF" value="💰 20% OFF">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-percent"></i> Porcentaje:
                                    </label>
                                    <input type="number" id="couponPercent" class="coupon-input" placeholder="Ej: 20" value="20" min="1" max="100">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-coins"></i> Monto mínimo:
                                    </label>
                                    <input type="number" id="couponMinAmountPorcentaje" class="coupon-input" placeholder="Monto mínimo" value="0">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-palette"></i> Color:
                                    </label>
                                    <input type="color" id="couponColorPorcentaje" class="coupon-input" style="height: 38px; padding: 4px;" value="#059669">
                                </div>
                            </div>
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-info-circle"></i> Descripción:
                                </label>
                                <input type="text" id="couponDescriptionPorcentaje" class="coupon-input" placeholder="Ej: Toda la tienda" value="Toda la tienda">
                            </div>
                        </div>
                        
                        <div id="fijoFields" style="display: none;">
                            <div class="form-row">
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-tag"></i> Código del Cupón:
                                    </label>
                                    <input type="text" id="couponCodeFijo" class="coupon-input" placeholder="Ej: DESCUENTO50" value="$50 OFF">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-dollar-sign"></i> Descuento fijo:
                                    </label>
                                    <input type="number" id="couponFixed" class="coupon-input" placeholder="Ej: 50" value="50">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-coins"></i> Monto mínimo:
                                    </label>
                                    <input type="number" id="couponMinAmountFijo" class="coupon-input" placeholder="Monto mínimo" value="0">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-palette"></i> Color:
                                    </label>
                                    <input type="color" id="couponColorFijo" class="coupon-input" style="height: 38px; padding: 4px;" value="#8b5cf6">
                                </div>
                            </div>
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-info-circle"></i> Descripción:
                                </label>
                                <input type="text" id="couponDescriptionFijo" class="coupon-input" placeholder="Ej: Descuento en toda la tienda" value="Descuento en toda la tienda">
                            </div>
                        </div>
                        
                        <div id="2x1Fields" style="display: none;">
                            <div class="form-row">
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-tag"></i> Código del Cupón:
                                    </label>
                                    <input type="text" id="couponCodePromo" class="coupon-input" placeholder="Ej: 2X1CAMISETAS" value="2X1CAMISETAS">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-gift"></i> Tipo promoción:
                                    </label>
                                    <select id="couponPromoType" class="coupon-input">
                                        <option value="2x1">2x1</option>
                                        <option value="3x2">3x2</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-tag"></i> Categoría aplicable:
                                    </label>
                                    <select id="couponPromoCategory" class="coupon-input"></select>
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-palette"></i> Color:
                                    </label>
                                    <input type="color" id="couponColorPromo" class="coupon-input" style="height: 38px; padding: 4px;" value="#3b82f6">
                                </div>
                            </div>
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-info-circle"></i> Descripción:
                                </label>
                                <input type="text" id="couponDescriptionPromo" class="coupon-input" placeholder="Ej: Camisetas básicas" value="Camisetas básicas">
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group-admin" style="margin-top: 15px; border-top: 1px dashed var(--medium); padding-top: 15px;">
                        <label class="form-label-admin" style="color: var(--warning);">
                            <i class="fas fa-clock"></i> Fecha de Expiración (Cronómetro):
                        </label>
                        
                        <div class="coupon-expiry-row">
                            <div class="coupon-expiry-field">
                                <label class="coupon-field-label">
                                    <i class="fas fa-calendar"></i> Fecha:
                                </label>
                                <input type="date" id="couponExpiryDate" class="coupon-input" value="">
                            </div>
                            
                            <div class="coupon-expiry-field">
                                <label class="coupon-field-label">
                                    <i class="fas fa-hourglass-start"></i> Hora:
                                </label>
                                <input type="time" id="couponExpiryTime" class="coupon-input" value="23:59">
                            </div>
                            
                            <div class="coupon-expiry-field">
                                <label class="coupon-field-label">
                                    <i class="fas fa-infinity"></i> Opciones:
                                </label>
                                <select id="couponExpiryPreset" class="coupon-input" onchange="admin.aplicarPresetExpiracion(this.value)">
                                    <option value="">Seleccionar preset</option>
                                    <option value="1d">1 día</option>
                                    <option value="3d">3 días</option>
                                    <option value="7d">7 días</option>
                                    <option value="15d">15 días</option>
                                    <option value="30d">30 días</option>
                                    <option value="never">Sin expiración</option>
                                </select>
                            </div>
                        </div>
                        
                        <div style="font-size: 0.7rem; color: var(--text-light); margin-top: 5px; display: flex; align-items: center; gap: 5px;">
                            <i class="fas fa-info-circle"></i> 
                            El cupón se desactivará automáticamente al llegar a la fecha/hora seleccionada.
                        </div>
                    </div>
                    
                    <div class="form-actions" style="margin-top: 15px;">
                        <button type="button" class="btn-cancel" onclick="admin.resetCouponForm()">
                            <i class="fas fa-redo"></i>
                            Limpiar
                        </button>
                        <button type="button" class="btn-save" onclick="admin.guardarCupon()">
                            <i class="fas fa-save"></i>
                            Guardar Cupón con Cronómetro
                        </button>
                    </div>
                </div>
                
                <h4 class="section-title-admin" style="margin-top: 20px;">
                    <i class="fas fa-list"></i>
                    Cupones Disponibles (con Cronómetro)
                </h4>
                
                <div class="coupons-list-admin" id="couponsListAdmin">
                        <div class="status-message status-info">
                            <i class="fas fa-info-circle"></i>
                            <span>No hay cupones creados. Agrega cupones con cronómetro desde el formulario.</span>
                        </div>
                    </div>
            </div>

            <!-- ==================== NUEVA SECCIÓN: CONFIGURACIÓN GENERAL ==================== -->
            <div class="admin-section" id="generalSection">
                <h3 class="section-title-admin">
                    <i class="fas fa-cog"></i>
                    Configuración General de la Tienda
                </h3>
                
                <div class="status-message status-info" id="generalInfoMessage">
                    <i class="fas fa-info-circle"></i>
                    <span>Administra las redes sociales, configuración de envíos, información de contacto y otros ajustes generales de la tienda.</span>
                </div>
                
                <div class="status-message status-success" id="generalMessage" style="display: none;"><i class="fas fa-check-circle"></i><span>Cambios guardados</span></div>
                
                <!-- CONFIGURACIÓN DE ENVÍOS -->
                <div class="delivery-editor-section">
                    <div class="delivery-editor-header">
                        <h4 class="delivery-editor-title">
                            <i class="fas fa-truck"></i>
                            Configuración de Envíos
                        </h4>
                        <div class="delivery-editor-actions">
                            <button class="btn-save" onclick="admin.guardarConfiguracionEnvios()">
                                <i class="fas fa-save"></i> Guardar
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-dollar-sign"></i> Monto mínimo para envío gratis ($):
                            </label>
                            <input type="number" id="shippingFreeMinimum" class="form-input-admin" placeholder="Ej: 300" value="300" min="0" step="1">
                            <div style="font-size: 0.7rem; color: var(--text-light); margin-top: 4px;">
                                Si el subtotal supera este monto, el envío es gratuito
                            </div>
                        </div>
                        
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-money-bill-wave"></i> Costo de envío regular ($):
                            </label>
                            <input type="number" id="shippingCost" class="form-input-admin" placeholder="Ej: 50" value="50" min="0" step="1">
                            <div style="font-size: 0.7rem; color: var(--text-light); margin-top: 4px;">
                                Costo aplicado cuando no se alcanza el monto mínimo
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-clock"></i> Tiempo estimado de entrega:
                        </label>
                        <input type="text" id="shippingTime" class="form-input-admin" placeholder="Ej: 24-48 horas" value="24-48 horas">
                    </div>
                </div>
                
                <!-- INFORMACIÓN DE CONTACTO -->
                <div class="delivery-editor-section">
                    <div class="delivery-editor-header">
                        <h4 class="delivery-editor-title">
                            <i class="fas fa-address-card"></i>
                            Información de Contacto
                        </h4>
                        <div class="delivery-editor-actions">
                            <button class="btn-save" onclick="admin.guardarConfiguracionContacto()">
                                <i class="fas fa-save"></i> Guardar Cambios
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-phone"></i> Teléfono principal:
                            </label>
                            <input type="text" id="contactPhone" class="form-input-admin" placeholder="Ej: (55) 1234-5678" value="(55) 1234-5678">
                        </div>
                        
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-phone-alt"></i> Teléfono secundario (WhatsApp):
                            </label>
                            <input type="text" id="contactWhatsapp" class="form-input-admin" placeholder="Ej: 5512345678" value="5567416073">
                            <div style="font-size: 0.7rem; color: var(--text-light); margin-top: 4px;">
                                Número para notificaciones automáticas
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-envelope"></i> Email de contacto:
                            </label>
                            <input type="email" id="contactEmail" class="form-input-admin" placeholder="Ej: info@modastyle.com" value="info@modastyle.com">
                        </div>
                        
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-map-marker-alt"></i> Dirección:
                            </label>
                            <input type="text" id="contactAddress" class="form-input-admin" placeholder="Ej: Ciudad de México" value="Ciudad de México">
                        </div>
                    </div>
                    
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-clock"></i> Horario de atención:
                        </label>
                        <input type="text" id="contactHours" class="form-input-admin" placeholder="Ej: Lunes a Viernes 9:00 - 18:00" value="Lunes a Viernes 9:00 - 18:00">
                    </div>
                </div>
                
                <!-- REDES SOCIALES -->
                <div class="delivery-editor-section">
                    <div class="delivery-editor-header">
                        <h4 class="delivery-editor-title">
                            <i class="fas fa-share-alt"></i>
                            Redes Sociales
                        </h4>
                        <div class="delivery-editor-actions">
                            <button class="btn-save" onclick="admin.agregarRedSocial()">
                                <i class="fas fa-plus"></i> Agregar Red Social
                            </button>
                        </div>
                    </div>
                    
                    <div class="status-message status-info" style="margin-bottom: 15px;">
                        <i class="fas fa-info-circle"></i>
                        <span>Las redes sociales aparecerán en el footer de la página. Puedes agregar, editar o eliminar.</span>
                    </div>
                    
                    <div id="socialMediaList" class="delivery-points-list">
                        <div class="general-social-item">
                            <div class="general-social-icon" style="background: #1877f2;">
                                <i class="fab fa-facebook"></i>
                            </div>
                            <div class="general-social-info">
                                <div class="general-social-name">Facebook</div>
                                <div class="general-social-url">https://facebook.com/</div>
                            </div>
                            <div class="general-social-actions">
                                <button class="general-btn-small general-btn-edit" onclick="admin.editarRedSocial('fb1')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="general-btn-small general-btn-delete" onclick="admin.eliminarRedSocial('fb1')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    
                        <div class="general-social-item">
                            <div class="general-social-icon" style="background: #e4405f;">
                                <i class="fab fa-instagram"></i>
                            </div>
                            <div class="general-social-info">
                                <div class="general-social-name">Instagram</div>
                                <div class="general-social-url">https://instagram.com/</div>
                            </div>
                            <div class="general-social-actions">
                                <button class="general-btn-small general-btn-edit" onclick="admin.editarRedSocial('ig1')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="general-btn-small general-btn-delete" onclick="admin.eliminarRedSocial('ig1')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="socialMediaForm" style="display: none; background: var(--light); padding: 12px; border-radius: var(--border-radius-sm); margin-top: 10px;">
                        <div class="form-row">
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-tag"></i> Nombre de la red:
                                </label>
                                <select id="socialMediaName" class="form-select">
                                    <option value="facebook">Facebook</option>
                                    <option value="instagram">Instagram</option>
                                    <option value="twitter">Twitter / X</option>
                                    <option value="tiktok">TikTok</option>
                                    <option value="youtube">YouTube</option>
                                    <option value="pinterest">Pinterest</option>
                                    <option value="linkedin">LinkedIn</option>
                                    <option value="whatsapp">WhatsApp</option>
                                    <option value="telegram">Telegram</option>
                                    <option value="otro">Otra</option>
                                </select>
                            </div>
                            
                            <div class="form-group-admin">
                                <label class="form-label-admin">
                                    <i class="fas fa-palette"></i> Color (opcional):
                                </label>
                                <input type="color" id="socialMediaColor" class="form-input-admin" style="height: 38px; padding: 4px;" value="#1877f2">
                            </div>
                        </div>
                        
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-link"></i> URL completa:
                            </label>
                            <input type="url" id="socialMediaUrl" class="form-input-admin" placeholder="https://facebook.com/tupagina" value="https://facebook.com/">
                        </div>
                        
                        <div class="form-group-admin" id="socialMediaOtherName" style="display: none;">
                            <label class="form-label-admin">
                                <i class="fas fa-edit"></i> Nombre personalizado:
                            </label>
                            <input type="text" id="socialMediaCustomName" class="form-input-admin" placeholder="Ej: Mi Red Social">
                        </div>
                        
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-icons"></i> Icono (opcional):
                            </label>
                            <input type="text" id="socialMediaIcon" class="form-input-admin" placeholder="fa-facebook, fa-instagram, etc.">
                            <div style="font-size: 0.7rem; color: var(--text-light); margin-top: 4px;">
                                Dejar vacío para usar el icono por defecto de la red
                            </div>
                        </div>
                        
                        <div class="form-actions" style="gap: 6px;">
                            <input type="hidden" id="editingSocialId" value="">
                            <button type="button" class="btn-save" onclick="admin.guardarRedSocial()">
                                <i class="fas fa-save"></i> Guardar
                            </button>
                            <button type="button" class="btn-cancel" onclick="admin.cancelarRedSocial()">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- OTROS AJUSTES -->
                <div class="delivery-editor-section">
                    <div class="delivery-editor-header">
                        <h4 class="delivery-editor-title">
                            <i class="fas fa-sliders-h"></i>
                            Otros Ajustes
                        </h4>
                        <div class="delivery-editor-actions">
                            <button class="btn-save" onclick="admin.guardarOtrosAjustes()">
                                <i class="fas fa-save"></i> Guardar
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-store"></i> Nombre de la tienda:
                        </label>
                        <input type="text" id="storeName" class="form-input-admin" placeholder="Ej: ModaStyle" value="ModaStyle">
                    </div>
                    
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-tagline"></i> Eslogan / Descripción corta:
                        </label>
                        <input type="text" id="storeSlogan" class="form-input-admin" placeholder="Ej: Tienda de Ropa, Accesorios y Hogar" value="Tienda de Ropa, Accesorios y Hogar">
                    </div>
                    
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-globe"></i> Moneda:
                        </label>
                        <select id="storeCurrency" class="form-select">
                            <option value="MXN" selected="">Peso Mexicano (MXN) - $</option>
                            <option value="USD">Dólar (USD) - $</option>
                            <option value="EUR">Euro (EUR) - €</option>
                            <option value="COP">Peso Colombiano (COP)</option>
                            <option value="ARS">Peso Argentino (ARS)</option>
                            <option value="CLP">Peso Chileno (CLP)</option>
                        </select>
                    </div>
                    
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-language"></i> Idioma:
                        </label>
                        <select id="storeLanguage" class="form-select">
                            <option value="es" selected="">Español</option>
                            <option value="en">Inglés</option>
                            <option value="fr">Francés</option>
                            <option value="pt">Portugués</option>
                        </select>
                    </div>
                    
                    <div class="checkbox-label" style="margin-top: 10px;">
                        <input type="checkbox" id="storeMaintenance" value="false">
                        <span>Modo mantenimiento (ocultar tienda a los clientes)</span>
                    </div>
                    
                    <div class="checkbox-label">
                        <input type="checkbox" id="storeTrackingNotifications" checked="">
                        <span>Activar notificaciones automáticas de seguimiento por WhatsApp</span>
                    </div>
                </div>
                
                <!-- BOTONES DE ACCIÓN GENERALES -->
                <div class="form-actions" style="margin-top: 20px;">
                    <button type="button" class="btn-save" onclick="admin.guardarTodaConfiguracionGeneral()">
                        <i class="fas fa-save"></i> GUARDAR TODA LA CONFIGURACIÓN
                    </button>
                    <button type="button" class="btn-cancel" onclick="admin.resetearConfiguracionGeneral()">
                        <i class="fas fa-undo"></i> RESTABLECER VALORES
                    </button>
                </div>
            </div>

            <div class="admin-section active" id="exportSection">
                <h3 class="section-title-admin">
                    <i class="fas fa-download"></i>
                    Exportar / Importar Datos
                </h3>
                <div class="status-message status-info">
                    <i class="fas fa-info-circle"></i>
                    <span>Exporta los datos de la tienda para hacer backup o impórtalos desde un archivo guardado.</span>
                </div>
                
                <div class="export-options">
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-file-export"></i> Exportar Datos (Backup):
                        </label>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;">
                            <button type="button" class="btn-save" onclick="admin.exportarDatos()" style="flex: 1;">
                                <i class="fas fa-download"></i>
                                Exportar Datos (JSON)
                            </button>
                            <button type="button" class="btn-save" onclick="admin.exportarDatosComprimidos()" style="flex: 1; background: linear-gradient(135deg, #667eea, #764ba2);">
                                <i class="fas fa-compress"></i>
                                Exportar Comprimido
                            </button>
                        </div>
                        <div style="font-size: 0.7rem; color: var(--text-light); margin-top: 5px;">
                            <i class="fas fa-info-circle"></i> Exporta todos los productos, categorías, cupones, banners, configuración de entrega y configuración general
                        </div>
                    </div>
                    
                    <div class="form-group-admin" style="margin-top: 20px;">
                        <label class="form-label-admin">
                            <i class="fas fa-file-import"></i> Importar Datos (Restaurar Backup):
                        </label>
                        <div style="margin-top: 10px;">
                            <button type="button" class="btn-save" onclick="admin.importarDatos()" style="width: 100%; background: linear-gradient(135deg, #059669, #047857);">
                                <i class="fas fa-upload"></i>
                                Importar Datos desde Archivo
                            </button>
                        </div>
                        <div style="font-size: 0.7rem; color: var(--text-light); margin-top: 5px;">
                            <i class="fas fa-exclamation-triangle" style="color: #f59e0b;"></i> 
                            <strong>Advertencia:</strong> La importación reemplazará todos los datos actuales
                        </div>
                    </div>
                    
                    <hr style="margin: 20px 0; border: none; border-top: 1px solid var(--medium);">
                    
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-file-code"></i> Exportar HTML Completo:
                        </label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="exportClean" checked="">
                                <span>Limpiar HTML (remover panel de administración)</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="exportIncludeData" checked="">
                                <span>Incluir datos de productos, cupones, banners, fechas de expiración, datos de entrega y configuración general</span>
                            </label>
                        </div>
                        
                        <div class="form-actions" style="margin-top: 15px;">
                            <button type="button" class="btn-save" id="exportHtmlBtn">
                                <i class="fas fa-download"></i>
                                Descargar HTML Completo
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <header class="main-header">
        <div class="container header-content">
            <a href="#" class="logo">
                <div class="logo-icon">
                    <i class="fas fa-crown"></i>
                </div>
                <div class="logo-text" id="storeNameDisplay">ModaStyle</div>
            </a>
            
            <div class="search-container">
                <input type="text" class="search-input" id="searchInput" placeholder="Buscar productos...">
                <i class="fas fa-search search-icon"></i>
                <button class="clear-search" id="clearSearch">
                    <i class="fas fa-times"></i>
                </button>
                <div class="search-results" id="searchResults"></div>
            </div>
            
            <button class="admin-btn" id="adminBtn">
                <i class="fas fa-cogs"></i>
            </button>
            
            <nav>
                <ul class="nav-links" id="navLinks">
                    <li><a href="#inicio" class="nav-link">Inicio</a></li>
                    <li><a href="#categorias" class="nav-link">Categorías</a></li>
                    <li><a href="#productos" class="nav-link">Productos</a></li>
                    <li><a href="#contacto" class="nav-link">Contacto</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="banner-section" id="bannerSection" style="display: none;">
        <div class="container">
            <div class="banner-container" id="bannerContainer"></div>
        </div>
    </section>

    <section class="hero-section" id="inicio">
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title">
                    Estilo que <span class="hero-highlight">Trasciende</span>
                </h1>
                
                <div class="hero-badges">
                    <div class="badge">
                        <i class="fas fa-shipping-fast"></i>
                        Envío gratis <span id="shippingBadgeAmount">+$300</span>
                    </div>
                    <div class="badge">
                        <i class="fas fa-shield-alt"></i>
                        Garantía 30 días
                    </div>
                    <div class="badge">
                        <i class="fas fa-gem"></i>
                        Productos premium
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="categories-section" id="categorias">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Nuestras Categorías</h2>
                <p class="section-subtitle">Explora nuestra variedad de productos organizados por categorías</p>
            </div>
            
            <div class="categories-grid" id="categoriesGrid">
                        <div class="category-card" onclick="carrito.filterProducts('hombre')">
                            <img src="https://i.postimg.cc/QtnW4QCb/1.jpg" alt="Hombre" class="category-image">
                            <div class="category-overlay">
                                <h3 class="category-name">Hombre</h3>
                                <p class="category-description">Ropa para hombres para todos los estilos</p>
                                <span class="category-badge" style="background: #2563eb">Ver productos</span>
                            </div>
                        </div>
                    
                        <div class="category-card" onclick="carrito.filterProducts('mujer')">
                            <img src="https://i.postimg.cc/mD6FXYkm/8.jpg" alt="Mujer" class="category-image">
                            <div class="category-overlay">
                                <h3 class="category-name">Mujer</h3>
                                <p class="category-description">Moda femenina para todos los estilos</p>
                                <span class="category-badge" style="background: #db2777">Ver productos</span>
                            </div>
                        </div>
                    
                        <div class="category-card" onclick="carrito.filterProducts('accesorios')">
                            <img src="https://i.postimg.cc/mrSbCH7D/Mochilas_20260220_171827_0000.jpg" alt="Accesorios" class="category-image">
                            <div class="category-overlay">
                                <h3 class="category-name">Accesorios</h3>
                                <p class="category-description">Complementos para elevar tu look</p>
                                <span class="category-badge" style="background: #7c3aed">Ver productos</span>
                            </div>
                        </div>
                    </div>
        </div>
    </section>

    <section class="products-section" id="productos">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Todos los Productos</h2>
                <p class="section-subtitle">Explora nuestra colección completa de productos</p>
            </div>
            
            <div class="category-filters" id="categoryFilters">
                        <button class="category-filter active" onclick="carrito.filterProducts('todo')" data-color="#D4AF37" style="background: rgb(212, 175, 55); color: white; border-color: rgb(212, 175, 55);">
                            TODO
                        </button>
                    
                        <button class="category-filter " onclick="carrito.filterProducts('hombre')" data-color="#2563EB">
                            Hombre
                        </button>
                    
                        <button class="category-filter " onclick="carrito.filterProducts('mujer')" data-color="#DB2777">
                            Mujer
                        </button>
                    
                        <button class="category-filter " onclick="carrito.filterProducts('accesorios')" data-color="#7C3AED">
                            Accesorios
                        </button>
                    </div>
            
            <div class="products-grid" id="productsGrid">
                        <div class="product-card" data-product-id="2" style="animation-delay: 0s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/QtnW4QCb/1.jpg&quot;,&quot;https://i.postimg.cc/x8km039p/1_NEGRA.jpg&quot;,&quot;https://i.postimg.cc/2yqWz7CH/2_GRIS_OSCURO.jpg&quot;,&quot;https://i.postimg.cc/85XWQ0V8/3_AZUL.jpg&quot;,&quot;https://i.postimg.cc/3NyGKF3q/4_CAFE.jpg&quot;,&quot;https://i.postimg.cc/d37Cqjqw/5_VERDE_MILITAR.png&quot;,&quot;https://i.postimg.cc/x8km030S/6_GRIS_CLARO.jpg&quot;,&quot;https://i.postimg.cc/ZYc3S04F/7-AZUL-MARINO.png&quot;]">
                                
                                    <img src="https://i.postimg.cc/QtnW4QCb/1.jpg" alt="SUDADERA" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/x8km039p/1_NEGRA.jpg" alt="SUDADERA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/2yqWz7CH/2_GRIS_OSCURO.jpg" alt="SUDADERA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/85XWQ0V8/3_AZUL.jpg" alt="SUDADERA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/3NyGKF3q/4_CAFE.jpg" alt="SUDADERA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/d37Cqjqw/5_VERDE_MILITAR.png" alt="SUDADERA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/x8km030S/6_GRIS_CLARO.jpg" alt="SUDADERA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/ZYc3S04F/7-AZUL-MARINO.png" alt="SUDADERA" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 4 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 5 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 6 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 7 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/QtnW4QCb/1.jpg', 'SUDADERA')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #2563EB">
                                    <i class="fas fa-tag"></i>
                                    SUDADERA
                                </div>
                                
                                <h3 class="product-title">SUDADERA</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$130</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    SUDADERA. Diseñado para brindar la máxima comodidad gracias a su interior suave. Confeccionada con acabados impecables, es deportiva y funcional para ocasiones especiales. ¡La pieza que estabas buscando!
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #2563EB"></i>
                                                <span>Lijera.</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #2563EB"></i>
                                                <span>Deportiva.</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #2563EB"></i>
                                                <span>Caual urbana</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Talla">
                                <div class="variant-label">Talla:</div>
                                <div class="variant-options">
                                    
                                        <button class="variant-btn" data-value="S" style="border-color: #2563EB" onclick="carrito.selectVariant(this, 'Talla', true)">
                                            S
                                        </button>
                                    
                                        <button class="variant-btn" data-value="M" style="border-color: #2563EB" onclick="carrito.selectVariant(this, 'Talla', true)">
                                            M
                                        </button>
                                    
                                </div>
                            </div>
                        
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris Oxford" style="background-color: #4A4A4A;" title="Gris Oxford" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Azul rey" style="background-color: #4169E1;" title="Azul rey" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Cafe" style="background-color: #6B4423;" title="Cafe" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="verde militar" style="background-color: #4B5320;" title="verde militar" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris claro" style="background-color: #D3D3D3;" title="Gris claro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Azul marino" style="background-color: #000080;" title="Azul marino" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="2" style="background: linear-gradient(135deg, #2563EB, #1d4fbc);" onclick="carrito.handleAddToCart(2)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="15" style="animation-delay: 0.05s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/26XBcQyT/6.jpg&quot;,&quot;https://i.postimg.cc/RVtW0Fzd/1_NEGRO.png&quot;,&quot;https://i.postimg.cc/Qx7FMtrf/2_BLANCO.png&quot;,&quot;https://i.postimg.cc/K8yR32Zf/4_AZUL_CLARO.jpg&quot;,&quot;https://i.postimg.cc/sDWM2XR6/3_ROSA.png&quot;]">
                                
                                    <img src="https://i.postimg.cc/26XBcQyT/6.jpg" alt="Chamarra deportiva" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/RVtW0Fzd/1_NEGRO.png" alt="Chamarra deportiva" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/Qx7FMtrf/2_BLANCO.png" alt="Chamarra deportiva" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/K8yR32Zf/4_AZUL_CLARO.jpg" alt="Chamarra deportiva" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/sDWM2XR6/3_ROSA.png" alt="Chamarra deportiva" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 4 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/26XBcQyT/6.jpg', 'Chamarra deportiva')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #DB2777">
                                    <i class="fas fa-tag"></i>
                                    Chamarra
                                </div>
                                
                                <h3 class="product-title">Chamarra deportiva</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$230</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Chamarra deportiva que estabas buscando. Para resistir el uso diario. Con acabados de excelente calidad. ¡Ideal para regalar o darte un gusto!
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Tela de alto rendimiento</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Secado rapido y resstentes</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Lijera.</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Blanco" style="background-color: #FFFFFF;" title="Blanco" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Azul cielo" style="background-color: #87CEEB;" title="Azul cielo" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Rosa" style="background-color: #FFC0CB;" title="Rosa" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="15" style="background: linear-gradient(135deg, #DB2777, #af1f5f);" onclick="carrito.handleAddToCart(15)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="1" style="animation-delay: 0.1s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/bJF2CxrR/2.jpg&quot;,&quot;https://i.postimg.cc/C1zwRv91/1_NEGRO.png&quot;,&quot;https://i.postimg.cc/fLJMVH1k/5_GRIS_OSCURO.png&quot;,&quot;https://i.postimg.cc/zBVqyd4X/4_AZUL.png&quot;,&quot;https://i.postimg.cc/ZRCJWfX9/6_VERDE.png&quot;,&quot;https://i.postimg.cc/tTY9sr8J/2_GRIS.png&quot;,&quot;https://i.postimg.cc/PJLXL6vn/3_AZUL_MARINO.png&quot;,&quot;https://i.postimg.cc/J07TKgcK/7-CAFE.png&quot;]">
                                
                                    <img src="https://i.postimg.cc/bJF2CxrR/2.jpg" alt="PANS" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/C1zwRv91/1_NEGRO.png" alt="PANS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/fLJMVH1k/5_GRIS_OSCURO.png" alt="PANS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/zBVqyd4X/4_AZUL.png" alt="PANS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/ZRCJWfX9/6_VERDE.png" alt="PANS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/tTY9sr8J/2_GRIS.png" alt="PANS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/PJLXL6vn/3_AZUL_MARINO.png" alt="PANS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/J07TKgcK/7-CAFE.png" alt="PANS" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 4 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 5 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 6 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 7 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/bJF2CxrR/2.jpg', 'PANS')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #2563EB">
                                    <i class="fas fa-tag"></i>
                                    PANS DEPORTIVO
                                </div>
                                
                                <h3 class="product-title">PANS</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$130</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Confeccionado para adaptarse a tu ritmo de vida, con tejido de alta calidad y diseño ligero. Ideal para el día a día. ¡No esperes más para tenerlo!
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #2563EB"></i>
                                                <span>Tela de algodón de alta calidad.</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #2563EB"></i>
                                                <span>Cintura elástica.</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #2563EB"></i>
                                                <span>Básicos cómodos y modernos.</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="talla">
                                <div class="variant-label">talla:</div>
                                <div class="variant-options">
                                    
                                        <button class="variant-btn" data-value="S" style="border-color: #2563EB" onclick="carrito.selectVariant(this, 'talla', true)">
                                            S
                                        </button>
                                    
                                        <button class="variant-btn" data-value="M" style="border-color: #2563EB" onclick="carrito.selectVariant(this, 'talla', true)">
                                            M
                                        </button>
                                    
                                </div>
                            </div>
                        
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris Oxford" style="background-color: #4A4A4A;" title="Gris Oxford" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Azul rey" style="background-color: #4169E1;" title="Azul rey" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Cafe" style="background-color: #6B4423;" title="Cafe" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="verde militar" style="background-color: #4B5320;" title="verde militar" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris claro" style="background-color: #D3D3D3;" title="Gris claro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Azul marino" style="background-color: #000080;" title="Azul marino" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="1" style="background: linear-gradient(135deg, #2563EB, #1d4fbc);" onclick="carrito.handleAddToCart(1)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="13" style="animation-delay: 0.15000000000000002s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/DZzXPjvN/3.jpg&quot;,&quot;https://i.postimg.cc/tCd9fVjv/1_NEGRO.png&quot;,&quot;https://i.postimg.cc/WbmsKJvf/2_GRIS.png&quot;,&quot;https://i.postimg.cc/SNLm5zhV/3_BLANCO.png&quot;]">
                                
                                    <img src="https://i.postimg.cc/DZzXPjvN/3.jpg" alt="LEGINS RECTOS" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/tCd9fVjv/1_NEGRO.png" alt="LEGINS RECTOS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/WbmsKJvf/2_GRIS.png" alt="LEGINS RECTOS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/SNLm5zhV/3_BLANCO.png" alt="LEGINS RECTOS" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/DZzXPjvN/3.jpg', 'LEGINS RECTOS')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #DB2777">
                                    <i class="fas fa-tag"></i>
                                    LEGINS
                                </div>
                                
                                <h3 class="product-title">LEGINS RECTOS</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$210</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Suave LEGINS RECTOS. Perfecto para facilitar tu día a día, de alta calidad. Perfecto para expresar tu personalidad.
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Licra grusa</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Bolsas laterales</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Realza tu figura</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris" style="background-color: #808080;" title="Gris" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Blanco" style="background-color: #FFFFFF;" title="Blanco" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                            <div class="variant-selector" data-variant-name="Talla">
                                <div class="variant-label">Talla:</div>
                                <div class="variant-options">
                                    
                                        <button class="variant-btn" data-value="CH" style="border-color: #DB2777" onclick="carrito.selectVariant(this, 'Talla', true)">
                                            CH
                                        </button>
                                    
                                        <button class="variant-btn" data-value="M" style="border-color: #DB2777" onclick="carrito.selectVariant(this, 'Talla', true)">
                                            M
                                        </button>
                                    
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="13" style="background: linear-gradient(135deg, #DB2777, #af1f5f);" onclick="carrito.handleAddToCart(13)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="4" style="animation-delay: 0.2s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/2SbbQ252/GORRA_UNISEX_20260220_171444_0000.jpg&quot;,&quot;https://i.postimg.cc/pLhhfqdk/GORRA_UNISEX_20260220_171444_0001.jpg&quot;,&quot;https://i.postimg.cc/dVkk240B/GORRA_UNISEX_20260220_171444_0002.jpg&quot;,&quot;https://i.postimg.cc/y8ggmvNX/GORRA_UNISEX_20260220_171444_0003.jpg&quot;,&quot;https://i.postimg.cc/htzzLpG8/GORRA_UNISEX_20260220_171444_0005.jpg&quot;,&quot;https://i.postimg.cc/pLhhfqdJ/GORRA_UNISEX_20260220_171444_0004.jpg&quot;]">
                                
                                    <img src="https://i.postimg.cc/2SbbQ252/GORRA_UNISEX_20260220_171444_0000.jpg" alt="GORRA" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/pLhhfqdk/GORRA_UNISEX_20260220_171444_0001.jpg" alt="GORRA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/dVkk240B/GORRA_UNISEX_20260220_171444_0002.jpg" alt="GORRA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/y8ggmvNX/GORRA_UNISEX_20260220_171444_0003.jpg" alt="GORRA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/htzzLpG8/GORRA_UNISEX_20260220_171444_0005.jpg" alt="GORRA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/pLhhfqdJ/GORRA_UNISEX_20260220_171444_0004.jpg" alt="GORRA" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 4 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 5 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/2SbbQ252/GORRA_UNISEX_20260220_171444_0000.jpg', 'GORRA')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #7C3AED">
                                    <i class="fas fa-tag"></i>
                                    GORRA
                                </div>
                                
                                <h3 class="product-title">GORRA</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$85</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    GORRA moderna.  Creado para asegurar una durabilidad excepcional. Ideal para crear múltiples looks. ¡Calidad y estilo en uno solo!
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #7C3AED"></i>
                                                <span>Ajustable</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #7C3AED"></i>
                                                <span>Diseño bordado</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Lila" style="background-color: #C8A2C8;" title="Lila" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris claro" style="background-color: #D3D3D3;" title="Gris claro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Verde militar" style="background-color: #4B5320;" title="Verde militar" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Verde pato" style="background-color: #008080;" title="Verde pato" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="4" style="background: linear-gradient(135deg, #7C3AED, #632ebd);" onclick="carrito.handleAddToCart(4)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="3" style="animation-delay: 0.25s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/mrSbCH7D/Mochilas_20260220_171827_0000.jpg&quot;,&quot;https://i.postimg.cc/QMD8FbKc/Mochilas_20260220_171827_0001.jpg&quot;,&quot;https://i.postimg.cc/VNwfJR0t/Mochilas_20260220_171827_0002.jpg&quot;,&quot;https://i.postimg.cc/1zK9wqD4/Mochilas_20260220_171827_0003.jpg&quot;,&quot;https://i.postimg.cc/XvgVdC9p/Mochilas_20260220_171827_0004.jpg&quot;,&quot;https://i.postimg.cc/tgzXWxFs/Mochilas_20260220_171827_0005.jpg&quot;,&quot;https://i.postimg.cc/LsVHL1jq/Mochilas_20260220_171827_0006.jpg&quot;,&quot;https://i.postimg.cc/9fBWZ7yT/Mochilas_20260220_171827_0007.jpg&quot;,&quot;https://i.postimg.cc/pdB2zFKz/Mochilas_20260220_171827_0008.jpg&quot;,&quot;https://i.postimg.cc/LsVHL1jk/Mochilas_20260220_171827_0009.jpg&quot;,&quot;https://i.postimg.cc/6Qh9nvCd/Mochilas_20260220_171827_0010.jpg&quot;,&quot;https://i.postimg.cc/HLtpXybw/Mochilas_20260220_171827_0011.jpg&quot;,&quot;https://i.postimg.cc/DzhvSg4L/Mochilas_20260220_171828_0012.jpg&quot;]">
                                
                                    <img src="https://i.postimg.cc/mrSbCH7D/Mochilas_20260220_171827_0000.jpg" alt="MOCHILA" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/QMD8FbKc/Mochilas_20260220_171827_0001.jpg" alt="MOCHILA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/VNwfJR0t/Mochilas_20260220_171827_0002.jpg" alt="MOCHILA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/1zK9wqD4/Mochilas_20260220_171827_0003.jpg" alt="MOCHILA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/XvgVdC9p/Mochilas_20260220_171827_0004.jpg" alt="MOCHILA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/tgzXWxFs/Mochilas_20260220_171827_0005.jpg" alt="MOCHILA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/LsVHL1jq/Mochilas_20260220_171827_0006.jpg" alt="MOCHILA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/9fBWZ7yT/Mochilas_20260220_171827_0007.jpg" alt="MOCHILA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/pdB2zFKz/Mochilas_20260220_171827_0008.jpg" alt="MOCHILA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/LsVHL1jk/Mochilas_20260220_171827_0009.jpg" alt="MOCHILA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/6Qh9nvCd/Mochilas_20260220_171827_0010.jpg" alt="MOCHILA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/HLtpXybw/Mochilas_20260220_171827_0011.jpg" alt="MOCHILA" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/DzhvSg4L/Mochilas_20260220_171828_0012.jpg" alt="MOCHILA" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 4 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 5 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 6 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 7 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 8 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 9 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 10 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 11 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 12 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/mrSbCH7D/Mochilas_20260220_171827_0000.jpg', 'MOCHILA')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #7C3AED">
                                    <i class="fas fa-tag"></i>
                                    MOCHILA
                                </div>
                                
                                <h3 class="product-title">MOCHILA</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$250</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Sorpréndete con nuestro moderna MOCHILA. Confeccionada para resistir el uso diario, detalles cuidados. Perfecto para looks casuales.
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #7C3AED"></i>
                                                <span>Mochila</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #7C3AED"></i>
                                                <span>Muñequera</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #7C3AED"></i>
                                                <span>Crossbody</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="color">
                                <div class="variant-label">color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Nude" style="background-color: #E3BC9A;" title="Nude" onclick="carrito.selectVariant(this, 'color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Palo de rosa" style="background-color: #C08081;" title="Palo de rosa" onclick="carrito.selectVariant(this, 'color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="3" style="background: linear-gradient(135deg, #7C3AED, #632ebd);" onclick="carrito.handleAddToCart(3)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="5" style="animation-delay: 0.30000000000000004s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/Bb0kgYsq/CINTURONES_20260220_172850_0000.jpg&quot;,&quot;https://i.postimg.cc/kGmzc197/CINTURONES_20260220_172850_0001.jpg&quot;,&quot;https://i.postimg.cc/6qXg0jw5/CINTURONES_20260220_172850_0004.jpg&quot;,&quot;https://i.postimg.cc/6qXg0jwK/CINTURONES_20260220_172850_0002.jpg&quot;,&quot;https://i.postimg.cc/1XQ2HCPP/CINTURONES_20260220_172850_0003.jpg&quot;]">
                                
                                    <img src="https://i.postimg.cc/Bb0kgYsq/CINTURONES_20260220_172850_0000.jpg" alt="CINTURO" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/kGmzc197/CINTURONES_20260220_172850_0001.jpg" alt="CINTURO" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/6qXg0jw5/CINTURONES_20260220_172850_0004.jpg" alt="CINTURO" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/6qXg0jwK/CINTURONES_20260220_172850_0002.jpg" alt="CINTURO" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/1XQ2HCPP/CINTURONES_20260220_172850_0003.jpg" alt="CINTURO" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 4 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/Bb0kgYsq/CINTURONES_20260220_172850_0000.jpg', 'CINTURO')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #7C3AED">
                                    <i class="fas fa-tag"></i>
                                    CINTURON
                                </div>
                                
                                <h3 class="product-title">CINTURO</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$75</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Te presentamos esta resistente CINTURO. Fabricado para resistir el uso diario gracias a su hebilla resistente. Es duradero y funcional. ¡Un básico que no puede faltar en tu armario!
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #7C3AED"></i>
                                                <span>Material resistente</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris" style="background-color: #808080;" title="Gris" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Verde agua" style="background-color: #A7D8DE;" title="Verde agua" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Cafe" style="background-color: #6B4423;" title="Cafe" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                            <div class="variant-selector" data-variant-name="Talla">
                                <div class="variant-label">Talla:</div>
                                <div class="variant-options">
                                    
                                        <button class="variant-btn" data-value="CH" style="border-color: #7C3AED" onclick="carrito.selectVariant(this, 'Talla', true)">
                                            CH
                                        </button>
                                    
                                        <button class="variant-btn" data-value="M" style="border-color: #7C3AED" onclick="carrito.selectVariant(this, 'Talla', true)">
                                            M
                                        </button>
                                    
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="5" style="background: linear-gradient(135deg, #7C3AED, #632ebd);" onclick="carrito.handleAddToCart(5)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="8" style="animation-delay: 0.35000000000000003s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/9QMPvdQj/MUJER_20260220_171039_0000.jpg&quot;,&quot;https://i.postimg.cc/Yq8fnnMC/MUJER_20260220_171039_0001.jpg&quot;,&quot;https://i.postimg.cc/CLJHPPSw/MUJER_20260220_171039_0006.jpg&quot;,&quot;https://i.postimg.cc/fRL76cRQ/MUJER_20260220_171039_0002.jpg&quot;,&quot;https://i.postimg.cc/8PwBKKNp/MUJER_20260220_171039_0003.jpg&quot;,&quot;https://i.postimg.cc/vHXLqqbQ/MUJER_20260220_171039_0004.jpg&quot;,&quot;https://i.postimg.cc/CLJHPPSS/MUJER_20260220_171039_0005.jpg&quot;]">
                                
                                    <img src="https://i.postimg.cc/9QMPvdQj/MUJER_20260220_171039_0000.jpg" alt="CALCETIN SPORT SOCKS" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/Yq8fnnMC/MUJER_20260220_171039_0001.jpg" alt="CALCETIN SPORT SOCKS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/CLJHPPSw/MUJER_20260220_171039_0006.jpg" alt="CALCETIN SPORT SOCKS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/fRL76cRQ/MUJER_20260220_171039_0002.jpg" alt="CALCETIN SPORT SOCKS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/8PwBKKNp/MUJER_20260220_171039_0003.jpg" alt="CALCETIN SPORT SOCKS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/vHXLqqbQ/MUJER_20260220_171039_0004.jpg" alt="CALCETIN SPORT SOCKS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/CLJHPPSS/MUJER_20260220_171039_0005.jpg" alt="CALCETIN SPORT SOCKS" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 4 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 5 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 6 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/9QMPvdQj/MUJER_20260220_171039_0000.jpg', 'CALCETIN SPORT SOCKS')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #DB2777">
                                    <i class="fas fa-tag"></i>
                                    CALCETIN NIKE
                                </div>
                                
                                <h3 class="product-title">CALCETIN SPORT SOCKS</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">25</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Sorpréndete con esta cómoda CALCETIN SPORT SOCKS. Preparado para ofrecer un estilo único gracias a sus materiales de alta calidad, es moderna y funcional para todas las estaciones.
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Elastico</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>LIgero/Grueso</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Comodos</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Azul cielo" style="background-color: #87CEEB;" title="Azul cielo" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Lila" style="background-color: #C8A2C8;" title="Lila" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Beg" style="background-color: #F5F5DC;" title="Beg" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Rosa" style="background-color: #FFC0CB;" title="Rosa" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris" style="background-color: #808080;" title="Gris" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Verde pastel" style="background-color: #C1E1C1;" title="Verde pastel" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="8" style="background: linear-gradient(135deg, #DB2777, #af1f5f);" onclick="carrito.handleAddToCart(8)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="17" style="animation-delay: 0.4s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/RFbns7hX/7.jpg&quot;,&quot;https://i.postimg.cc/NMHPCVVv/1_NEGRO.jpg&quot;,&quot;https://i.postimg.cc/SsMt155F/2_GRIS.jpg&quot;]">
                                
                                    <img src="https://i.postimg.cc/RFbns7hX/7.jpg" alt="CONJUNTO LEGINS MUJER" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/NMHPCVVv/1_NEGRO.jpg" alt="CONJUNTO LEGINS MUJER" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/SsMt155F/2_GRIS.jpg" alt="CONJUNTO LEGINS MUJER" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/RFbns7hX/7.jpg', 'CONJUNTO LEGINS MUJER')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #DB2777">
                                    <i class="fas fa-tag"></i>
                                    CONJUNTO LEGINS
                                </div>
                                
                                <h3 class="product-title">CONJUNTO LEGINS MUJER</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$490</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Siente la diferencia con nuestra CONJUNTO LEGINS MUJER de tendencia actual, diseño resistente. Ideal para el gym o actividades al aire libre.
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Material grueso</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Bolsas laterales</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Realza tu figura</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris" style="background-color: #808080;" title="Gris" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                            <div class="variant-selector" data-variant-name="Talla">
                                <div class="variant-label">Talla:</div>
                                <div class="variant-options">
                                    
                                        <button class="variant-btn" data-value="M" style="border-color: #DB2777" onclick="carrito.selectVariant(this, 'Talla', true)">
                                            M
                                        </button>
                                    
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="17" style="background: linear-gradient(135deg, #DB2777, #af1f5f);" onclick="carrito.handleAddToCart(17)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="12" style="animation-delay: 0.45s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/631GjrqP/9.jpg&quot;,&quot;https://i.postimg.cc/tCb64tww/1.jpg&quot;,&quot;https://i.postimg.cc/hP0dzQRs/1_(2).jpg&quot;]">
                                
                                    <img src="https://i.postimg.cc/631GjrqP/9.jpg" alt="TOP" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/tCb64tww/1.jpg" alt="TOP" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/hP0dzQRs/1_(2).jpg" alt="TOP" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/631GjrqP/9.jpg', 'TOP')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #DB2777">
                                    <i class="fas fa-tag"></i>
                                    Top
                                </div>
                                
                                <h3 class="product-title">TOP</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$185</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Fabricado para brindar la máxima comodidad, calidad y diseño resistente. ¡Perfecto para actividaddes al aire libre!
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Copa includa</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Grueso</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Comodos</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                            <div class="variant-selector" data-variant-name="Talla">
                                <div class="variant-label">Talla:</div>
                                <div class="variant-options">
                                    
                                        <button class="variant-btn" data-value="M" style="border-color: #DB2777" onclick="carrito.selectVariant(this, 'Talla', true)">
                                            M
                                        </button>
                                    
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="12" style="background: linear-gradient(135deg, #DB2777, #af1f5f);" onclick="carrito.handleAddToCart(12)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="11" style="animation-delay: 0.5s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/mD6FXYkm/8.jpg&quot;,&quot;https://i.postimg.cc/C16gGjbj/1_NEGRO.jpg&quot;,&quot;https://i.postimg.cc/hj3BL9V8/2_GRIS.png&quot;,&quot;https://i.postimg.cc/MTrS7y1B/3_BLANCO.png&quot;]">
                                
                                    <img src="https://i.postimg.cc/mD6FXYkm/8.jpg" alt="FALDA SORT" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/C16gGjbj/1_NEGRO.jpg" alt="FALDA SORT" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/hj3BL9V8/2_GRIS.png" alt="FALDA SORT" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/MTrS7y1B/3_BLANCO.png" alt="FALDA SORT" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/mD6FXYkm/8.jpg', 'FALDA SORT')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #DB2777">
                                    <i class="fas fa-tag"></i>
                                    FALDAS
                                </div>
                                
                                <h3 class="product-title">FALDA SORT</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$180</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Atrévete a lucir nuestras  FALDAS. Creada para brindar la máxima comodidad, con diseño favorecedor y alta calidad para un uso deprtivo  ¡Descubre la diferencia!.
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Skort</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Comodas</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Elasticas</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris" style="background-color: #808080;" title="Gris" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Blanco" style="background-color: #FFFFFF;" title="Blanco" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                            <div class="variant-selector" data-variant-name="Talla">
                                <div class="variant-label">Talla:</div>
                                <div class="variant-options">
                                    
                                        <button class="variant-btn" data-value="CH" style="border-color: #DB2777" onclick="carrito.selectVariant(this, 'Talla', true)">
                                            CH
                                        </button>
                                    
                                        <button class="variant-btn" data-value="M" style="border-color: #DB2777" onclick="carrito.selectVariant(this, 'Talla', true)">
                                            M
                                        </button>
                                    
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="11" style="background: linear-gradient(135deg, #DB2777, #af1f5f);" onclick="carrito.handleAddToCart(11)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="14" style="animation-delay: 0.55s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/pTdFJGW7/4.jpg&quot;,&quot;https://i.postimg.cc/13zbHg5f/1_NEGRO_ACAMPANADO.png&quot;,&quot;https://i.postimg.cc/RZ02R3Vq/2_BLANCO_ACAMPANADO.png&quot;]">
                                
                                    <img src="https://i.postimg.cc/pTdFJGW7/4.jpg" alt="LEGINS ACAMPANADOS" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/13zbHg5f/1_NEGRO_ACAMPANADO.png" alt="LEGINS ACAMPANADOS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/RZ02R3Vq/2_BLANCO_ACAMPANADO.png" alt="LEGINS ACAMPANADOS" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/pTdFJGW7/4.jpg', 'LEGINS ACAMPANADOS')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #DB2777">
                                    <i class="fas fa-tag"></i>
                                    LEGINS
                                </div>
                                
                                <h3 class="product-title">LEGINS ACAMPANADOS</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$230</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Vive la experiencia de nuestros cómodos LEGINS ACAMPANADOS. Diseñado para mantener su forma original, con licra de alta calidad. Perfecto para sentirte única. ¡Hazlo tuyo hoy mismo!
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Licra gruesa</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Amolda tu figura</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Blanco" style="background-color: #FFFFFF;" title="Blanco" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                            <div class="variant-selector" data-variant-name="Talla">
                                <div class="variant-label">Talla:</div>
                                <div class="variant-options">
                                    
                                        <button class="variant-btn" data-value="CH" style="border-color: #DB2777" onclick="carrito.selectVariant(this, 'Talla', true)">
                                            CH
                                        </button>
                                    
                                        <button class="variant-btn" data-value="M" style="border-color: #DB2777" onclick="carrito.selectVariant(this, 'Talla', true)">
                                            M
                                        </button>
                                    
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="14" style="background: linear-gradient(135deg, #DB2777, #af1f5f);" onclick="carrito.handleAddToCart(14)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="16" style="animation-delay: 0.6000000000000001s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/d1STH236/5.jpg&quot;,&quot;https://i.postimg.cc/SKRY7b5F/1_NEGRO.png&quot;,&quot;https://i.postimg.cc/XvPGsDM2/2_AZUL_MARINO.png&quot;,&quot;https://i.postimg.cc/7LRGKQvK/4_VERDE.png&quot;,&quot;https://i.postimg.cc/3wN0CQ6M/3_ROSA.png&quot;]">
                                
                                    <img src="https://i.postimg.cc/d1STH236/5.jpg" alt="LEGINS" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/SKRY7b5F/1_NEGRO.png" alt="LEGINS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/XvPGsDM2/2_AZUL_MARINO.png" alt="LEGINS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/7LRGKQvK/4_VERDE.png" alt="LEGINS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/3wN0CQ6M/3_ROSA.png" alt="LEGINS" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 4 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/d1STH236/5.jpg', 'LEGINS')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #DB2777">
                                    <i class="fas fa-tag"></i>
                                    LEGINS
                                </div>
                                
                                <h3 class="product-title">LEGINS</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$110</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Ideal para facilitar tu día a día, ya que son lijeros y comodos.  Perfecto para actividades al aire libre. ¡Añádelo a tu colección ahora!
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Bolsa laterales</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Lijeros</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #DB2777"></i>
                                                <span>Tranparencias laterales</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Azul marino" style="background-color: #000080;" title="Azul marino" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Verde militar" style="background-color: #4B5320;" title="Verde militar" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Rosa" style="background-color: #FFC0CB;" title="Rosa" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="16" style="background: linear-gradient(135deg, #DB2777, #af1f5f);" onclick="carrito.handleAddToCart(16)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="6" style="animation-delay: 0.65s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/4y8Cxvkn/HOMBRE_2_20260220_174822_0000.jpg&quot;,&quot;https://i.postimg.cc/3NLMxj58/HOMBRE_2_20260220_174822_0001.jpg&quot;,&quot;https://i.postimg.cc/nrd8hKbp/HOMBRE_2_20260220_174823_0004.jpg&quot;,&quot;https://i.postimg.cc/j28VS60q/HOMBRE_2_20260220_174822_0002.jpg&quot;,&quot;https://i.postimg.cc/fyH4R7nM/HOMBRE_2_20260220_174823_0003.jpg&quot;]">
                                
                                    <img src="https://i.postimg.cc/4y8Cxvkn/HOMBRE_2_20260220_174822_0000.jpg" alt="CALCETAS MULAYA'S" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/3NLMxj58/HOMBRE_2_20260220_174822_0001.jpg" alt="CALCETAS MULAYA'S" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/nrd8hKbp/HOMBRE_2_20260220_174823_0004.jpg" alt="CALCETAS MULAYA'S" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/j28VS60q/HOMBRE_2_20260220_174822_0002.jpg" alt="CALCETAS MULAYA'S" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/fyH4R7nM/HOMBRE_2_20260220_174823_0003.jpg" alt="CALCETAS MULAYA'S" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 4 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/4y8Cxvkn/HOMBRE_2_20260220_174822_0000.jpg', 'CALCETAS MULAYA'S')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #2563EB">
                                    <i class="fas fa-tag"></i>
                                    CALCETAS FASHION
                                </div>
                                
                                <h3 class="product-title">CALCETAS MULAYA'S</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">25</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Siente la diferencia con esta práctica CALCETAS MULAYA'S. Fabricado para brindar la máxima comodidad gracias a su materiales, funcional para combinar fácilmente. ¡Ideal para regalar o darte un gusto!
                                </p>
                                
                                
                                    <div class="product-features">
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #2563EB"></i>
                                                <span>Elasticos</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #2563EB"></i>
                                                <span>Gruesos</span>
                                            </div>
                                        
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: #2563EB"></i>
                                                <span>Comodos</span>
                                            </div>
                                        
                                    </div>
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris rata" style="background-color: #7E7E7E;" title="Gris rata" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris claro" style="background-color: #D3D3D3;" title="Gris claro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Azul marino" style="background-color: #000080;" title="Azul marino" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="6" style="background: linear-gradient(135deg, #2563EB, #1d4fbc);" onclick="carrito.handleAddToCart(6)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="7" style="animation-delay: 0.7000000000000001s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/RZdtVNqG/HOMBRE_1_20260220_174351_0000.jpg&quot;,&quot;https://i.postimg.cc/JzxX4Gtx/HOMBRE_1_20260220_174351_0001.jpg&quot;,&quot;https://i.postimg.cc/P5yDrPNM/HOMBRE_1_20260220_174352_0004.jpg&quot;,&quot;https://i.postimg.cc/fRCdTJkj/HOMBRE_1_20260220_174352_0003.jpg&quot;,&quot;https://i.postimg.cc/sgmWDv1n/HOMBRE_1_20260220_174351_0002.jpg&quot;]">
                                
                                    <img src="https://i.postimg.cc/RZdtVNqG/HOMBRE_1_20260220_174351_0000.jpg" alt="CALCETIN SPORT" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/JzxX4Gtx/HOMBRE_1_20260220_174351_0001.jpg" alt="CALCETIN SPORT" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/P5yDrPNM/HOMBRE_1_20260220_174352_0004.jpg" alt="CALCETIN SPORT" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/fRCdTJkj/HOMBRE_1_20260220_174352_0003.jpg" alt="CALCETIN SPORT" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/sgmWDv1n/HOMBRE_1_20260220_174351_0002.jpg" alt="CALCETIN SPORT" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 4 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/RZdtVNqG/HOMBRE_1_20260220_174351_0000.jpg', 'CALCETIN SPORT')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #2563EB">
                                    <i class="fas fa-tag"></i>
                                    CALCETIN SPORT SOCKS
                                </div>
                                
                                <h3 class="product-title">CALCETIN SPORT</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">25</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Destaca con nuestra CALCETIN SPORT de acabados impecables. Perfecto para mantener su forma origina. Ideal para el día a día. ¡Te va a encantar!
                                </p>
                                
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Azul marino" style="background-color: #000080;" title="Azul marino" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris claro" style="background-color: #D3D3D3;" title="Gris claro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris rata" style="background-color: #7E7E7E;" title="Gris rata" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="7" style="background: linear-gradient(135deg, #2563EB, #1d4fbc);" onclick="carrito.handleAddToCart(7)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="9" style="animation-delay: 0.75s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/XJ3k1TGW/MUJER_2_20260220_173613_0000.jpg&quot;,&quot;https://i.postimg.cc/d1vjNzkM/MUJER_2_20260220_173613_0001.jpg&quot;,&quot;https://i.postimg.cc/qR0xD9hd/MUJER_2_20260220_173613_0002.jpg&quot;,&quot;https://i.postimg.cc/ydBypwgC/MUJER_2_20260220_173613_0004.jpg&quot;,&quot;https://i.postimg.cc/k49vYkV0/MUJER_2_20260220_173613_0003.jpg&quot;]">
                                
                                    <img src="https://i.postimg.cc/XJ3k1TGW/MUJER_2_20260220_173613_0000.jpg" alt="CALCETIN NIKE" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/d1vjNzkM/MUJER_2_20260220_173613_0001.jpg" alt="CALCETIN NIKE" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/qR0xD9hd/MUJER_2_20260220_173613_0002.jpg" alt="CALCETIN NIKE" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/ydBypwgC/MUJER_2_20260220_173613_0004.jpg" alt="CALCETIN NIKE" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/k49vYkV0/MUJER_2_20260220_173613_0003.jpg" alt="CALCETIN NIKE" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 4 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/XJ3k1TGW/MUJER_2_20260220_173613_0000.jpg', 'CALCETIN NIKE')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #DB2777">
                                    <i class="fas fa-tag"></i>
                                    CALCETIN
                                </div>
                                
                                <h3 class="product-title">CALCETIN NIKE</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$25</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Estrena esta resistente CALCETIN NIKE. Fabricado para complementar cualquier ocasión. Confeccionada con look sofisticado, es práctica y funcional. ¡Un básico que no puede faltar en tu armario!
                                </p>
                                
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris" style="background-color: #808080;" title="Gris" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Blanco" style="background-color: #FFFFFF;" title="Blanco" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Azul marino" style="background-color: #000080;" title="Azul marino" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="9" style="background: linear-gradient(135deg, #DB2777, #af1f5f);" onclick="carrito.handleAddToCart(9)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    
                        <div class="product-card" data-product-id="10" style="animation-delay: 0.8s">
                            
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery="[&quot;https://i.postimg.cc/Hxs7yH8k/MUJER_3_20260220_173842_0000.jpg&quot;,&quot;https://i.postimg.cc/268BZmLj/MUJER_3_20260220_173842_0001.jpg&quot;,&quot;https://i.postimg.cc/85Pr6DfD/MUJER_3_20260220_173842_0003.jpg&quot;,&quot;https://i.postimg.cc/d1tTyvZt/MUJER_3_20260220_173842_0002.jpg&quot;,&quot;https://i.postimg.cc/W3bJkjqz/MUJER_3_20260220_173842_0004.jpg&quot;]">
                                
                                    <img src="https://i.postimg.cc/Hxs7yH8k/MUJER_3_20260220_173842_0000.jpg" alt="CALCETIN ADIDAS" class="carousel-image active">
                                
                                    <img src="https://i.postimg.cc/268BZmLj/MUJER_3_20260220_173842_0001.jpg" alt="CALCETIN ADIDAS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/85Pr6DfD/MUJER_3_20260220_173842_0003.jpg" alt="CALCETIN ADIDAS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/d1tTyvZt/MUJER_3_20260220_173842_0002.jpg" alt="CALCETIN ADIDAS" class="carousel-image ">
                                
                                    <img src="https://i.postimg.cc/W3bJkjqz/MUJER_3_20260220_173842_0004.jpg" alt="CALCETIN ADIDAS" class="carousel-image ">
                                
                            </div>
                            
                            
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    
                                        <span class="indicator-dot active" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 0 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 2 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 3 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                        <span class="indicator-dot " onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 4 - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    
                                </div>
                            
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('https://i.postimg.cc/Hxs7yH8k/MUJER_3_20260220_173842_0000.jpg', 'CALCETIN ADIDAS')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge nuevo">NUEVO</div>
                        </div>
                    
                            
                            <div class="product-info">
                                <div class="product-category" style="color: #DB2777">
                                    <i class="fas fa-tag"></i>
                                    CALCETIN
                                </div>
                                
                                <h3 class="product-title">CALCETIN ADIDAS</h3>
                                
                                <div class="product-price-container">
                                    
                                        <div class="regular-price">$25</div>
                                    
                                </div>
                                
                                <p class="product-description">
                                    Conoce esta cómoda CALCETIN ADIDAS. Diseñado para garantizar la mejor calidad. Confeccionada con acabados impecables, es moderna y funcional. ¡Añádelo a tu colección ahora!
                                </p>
                                
                                
                                
                                
                            <div class="variant-selector" data-variant-name="Color">
                                <div class="variant-label">Color:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    
                                            <button class="variant-btn color-swatch" data-value="Negro" style="background-color: #000000;" title="Negro" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Gris" style="background-color: #808080;" title="Gris" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Blanco" style="background-color: #FFFFFF;" title="Blanco" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                            <button class="variant-btn color-swatch" data-value="Azul marino" style="background-color: #000080;" title="Azul marino" onclick="carrito.selectVariant(this, 'Color', true)">
                                            </button>
                                        
                                </div>
                            </div>
                        
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" data-product-id="10" style="background: linear-gradient(135deg, #DB2777, #af1f5f);" onclick="carrito.handleAddToCart(10)" disabled=""><i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO</button>
                                </div>
                            </div>
                        </div>
                    </div>
        </div>
    </section>

    <div class="checkout-modal" id="checkoutModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>
                    <i class="fas fa-truck"></i>
                    Información de Entrega y Pago
                </h3>
                <button class="close-modal" id="closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="checkoutForm">
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-user"></i> Nombre completo:
                    </label>
                    <input type="text" id="customerName" class="form-input" required="" placeholder="Ingresa tu nombre completo">
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-phone"></i> Teléfono:
                    </label>
                    <input type="tel" id="customerPhone" class="form-input" required="" placeholder="Ingresa tu número de teléfono">
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-calendar-alt"></i> Día de entrega:
                    </label>
                    
                    <select id="deliveryDay" class="form-select" style="display: none;" required=""></select>
                    
                    <div class="date-selector-container">
                        <input type="date" id="deliveryDate" class="form-input" required="" min="2026-02-27">
                        <div class="date-hint" style="color: var(--text-light);">
                            <i class="fas fa-info-circle"></i> 
                            Solo disponible de <strong>Lunes a Sábado</strong> (los domingos no hay entregas)
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-clock"></i> Horario de entrega:
                    </label>
                    <select id="deliveryTime" class="form-select" required=""><option value="">Selecciona un horario</option><option value="11:30">11:30 AM</option><option value="19:30">7:30 PM</option></select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-map-marker-alt"></i> Punto de entrega:
                    </label>
                    <div class="delivery-options" id="deliveryOptionsContainer">
                    <label class="delivery-option " id="deliveryOptionxhala">
                        <input type="radio" name="delivery" value="xhala" style="display: none;">
                        <div class="delivery-info">
                            <div class="delivery-name">San Sebastián Xhala</div>
                            <div class="delivery-address">San Sebastián, enfrente de la universidad</div>
                            <a href="https://maps.app.goo.gl/nKi4gyiDY1KikZPQ6" target="_blank" class="map-link">
                                <i class="fas fa-map-marker-alt"></i> Ver en Google Maps
                            </a>
                        </div>
                    </label>
                
                    <label class="delivery-option selected" id="deliveryOptionsocorro">
                        <input type="radio" name="delivery" value="socorro" style="display: none;" checked="">
                        <div class="delivery-info">
                            <div class="delivery-name">El Socorro</div>
                            <div class="delivery-address">Colonia El Socorro, en los Arcos en frente del oxxo</div>
                            <a href="https://maps.app.goo.gl/BYYZWmaa9TbtjWvD8" target="_blank" class="map-link">
                                <i class="fas fa-map-marker-alt"></i> Ver en Google Maps
                            </a>
                        </div>
                    </label>
                
                    <label class="delivery-option " id="deliveryOptionmateo">
                        <input type="radio" name="delivery" value="mateo" style="display: none;">
                        <div class="delivery-info">
                            <div class="delivery-name">San Mateo</div>
                            <div class="delivery-address">San Mateo, en frente de la iglesia</div>
                            <a href="https://maps.app.goo.gl/q1KoquLtgrTEnuCo6" target="_blank" class="map-link">
                                <i class="fas fa-map-marker-alt"></i> Ver en Google Maps
                            </a>
                        </div>
                    </label>
                </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-credit-card"></i> Método de pago:
                    </label>
                    <div class="payment-options">
                        <label class="payment-option selected" id="paymentOption1">
                            <input type="radio" name="payment" value="efectivo" style="display: none;">
                            <i class="fas fa-money-bill-wave"></i> Efectivo
                        </label>
                        
                        <label class="payment-option" id="paymentOption2">
                            <input type="radio" name="payment" value="transferencia" style="display: none;">
                            <i class="fas fa-university"></i> Transferencia
                        </label>
                    </div>
                    
                    <div class="transfer-info" id="transferInfo">
                        <div style="font-weight: 600; color: var(--primary); margin-bottom: 6px; font-size: 0.85rem;">
                            <i class="fas fa-info-circle"></i> Datos para transferencia:
                        </div>
                        <div class="transfer-details" id="transferDetails"></div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancelCheckout">
                        Cancelar
                    </button>
                    <button type="submit" class="btn-primary" id="confirmCheckout">
                        <i class="fab fa-whatsapp"></i>
                        Enviar pedido por WhatsApp
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Tracking Panel -->
    <div class="tracking-panel" id="trackingPanel">
        <div class="tracking-header">
            <h2 class="tracking-title">
                <i class="fas fa-truck"></i>
                Seguimiento de Pedidos
            </h2>
            <button class="close-tracking" id="closeTracking">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="tracking-content" id="trackingContent">
            <div id="trackingOrdersList"></div>
        </div>
    </div>

    <!-- Reschedule Modal -->
    <div class="reschedule-modal" id="rescheduleModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>
                    <i class="fas fa-calendar-alt"></i>
                    Reagendar Entrega
                </h3>
                <button class="close-modal" id="closeReschedule">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="rescheduleForm">
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-calendar-alt"></i> Nueva fecha de entrega:
                    </label>
                    <input type="date" id="rescheduleDate" class="form-input" required="" min="">
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-clock"></i> Nuevo horario:
                    </label>
                    <select id="rescheduleTime" class="form-select" required=""></select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">
                        <i class="fas fa-map-marker-alt"></i> Nuevo punto de entrega:
                    </label>
                    <select id="reschedulePoint" class="form-select" required=""></select>
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancelReschedule">
                        Cancelar
                    </button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i>
                        Reagendar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Tracking Button -->
    <div class="tracking-icon" id="trackingIcon" style="display: none;">
        <i class="fas fa-truck"></i>
        <div class="tracking-badge" id="trackingBadge">0</div>
    </div>

    <div class="cart-icon" id="cartIcon">
        <i class="fas fa-shopping-bag"></i>
        <div class="cart-count" id="cartCount">1</div>
    </div>

    <div class="cart-overlay" id="cartOverlay"></div>
    
    <div class="cart-panel" id="cartPanel">
        <div class="cart-header">
            <h2 class="cart-title">
                <i class="fas fa-shopping-bag"></i>
                Tu Carrito
            </h2>
            <button class="close-cart" id="closeCart">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="cart-content">
            <div class="coupon-section" id="couponSection" style="display: none;">
                <div class="coupon-title">
                    <i class="fas fa-ticket-alt"></i>
                    Cupones disponibles
                </div>
                <div class="coupon-grid" id="couponGrid"></div>
            </div>
            
            <div class="free-shipping-promo" id="freeShippingPromo">
                <i class="fas fa-shipping-fast"></i>
                <div class="promo-text">¡Falta poco para envío gratis!</div>
                <div class="promo-subtext">Agrega <span id="remainingAmount">$210.00</span> más a tu carrito</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="shippingProgress" style="width: 30%;"></div>
                </div>
            </div>
            
            <div class="cart-items" id="cartItems"></div>
            
            <div class="empty-cart" id="emptyCart">
                <i class="fas fa-shopping-bag"></i>
                <h3>Tu carrito está vacío</h3>
                <p>Agrega algunos productos para comenzar</p>
                <a href="#productos" class="continue-shopping" onclick="carrito.closeCart()">
                    <i class="fas fa-store"></i>
                    Continuar comprando
                </a>
            </div>
            
            <div class="cart-summary" id="cartSummary">
                <div class="summary-title">
                    <i class="fas fa-receipt"></i>
                    Resumen del Pedido
                </div>
                <div class="summary-row">
                    <span class="summary-label">
                        <i class="fas fa-box"></i>
                        Subtotal
                    </span>
                    <span class="summary-value" id="subtotal">$0.00</span>
                </div>
                
                <div id="appliedCouponRow" style="display: none;" class="summary-coupon-row">
                    <span class="summary-label">
                        <i class="fas fa-ticket-alt"></i>
                        Cupón <span id="appliedCouponCode"></span>
                    </span>
                    <span class="summary-value" id="appliedCouponDiscount">-$0.00</span>
                </div>
                
                <div class="summary-row">
                    <span class="summary-label">
                        <i class="fas fa-truck"></i>
                        Envío
                    </span>
                    <span class="summary-value" id="shipping">$50.00</span>
                </div>
                <div class="summary-total">
                    <span class="total-label">
                        <i class="fas fa-calculator"></i>
                        Total
                    </span>
                    <span class="total-amount" id="total">$0.00</span>
                </div>
            </div>
        </div>
        
        <div class="cart-actions" id="cartActions">
            <button class="checkout-btn" id="checkoutBtn">
                <i class="fab fa-whatsapp"></i>
                Finalizar Compra
            </button>
            <button class="clear-cart-btn" id="clearCartBtn">
                <i class="fas fa-trash"></i>
                Vaciar Carrito
            </button>
        </div>
    </div>

    <footer class="main-footer" id="contacto">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3 id="footerStoreName">ModaStyle</h3>
                    <p id="footerStoreDescription" style="font-size: 0.8rem; line-height: 1.4;">ModaStyle - Tienda de Ropa, Accesorios y Hogar</p>
                    
                    <!-- Redes Sociales -->
                    <div style="display: flex; gap: 10px; margin-top: 10px;" id="socialMediaFooter">
                                <a href="https://facebook.com/" target="_blank" style="display: inline-block; width: 30px; height: 30px; border-radius: 50%; background: #1877f2; color: white; display: flex; align-items: center; justify-content: center; transition: var(--transition);" title="Facebook">
                                    <i class="fab fa-facebook"></i>
                                </a>
                            
                                <a href="https://instagram.com/" target="_blank" style="display: inline-block; width: 30px; height: 30px; border-radius: 50%; background: #e4405f; color: white; display: flex; align-items: center; justify-content: center; transition: var(--transition);" title="Instagram">
                                    <i class="fab fa-instagram"></i>
                                </a>
                            </div>
                </div>
                
                <div class="footer-section">
                    <h3>Enlaces rápidos</h3>
                    <ul class="footer-links">
                        <li><a href="#inicio"><i class="fas fa-chevron-right"></i> Inicio</a></li>
                        <li><a href="#categorias"><i class="fas fa-chevron-right"></i> Categorías</a></li>
                        <li><a href="#productos"><i class="fas fa-chevron-right"></i> Productos</a></li>
                        <li><a href="#contacto"><i class="fas fa-chevron-right"></i> Contacto</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Contacto</h3>
                    <ul class="footer-links" id="footerContact">
                        <li><a href="#" id="footerPhone"><i class="fas fa-phone"></i> (55) 1234-5678</a></li>
                        <li><a href="#" id="footerEmail"><i class="fas fa-envelope"></i> info@modastyle.com</a></li>
                        <li><a href="#" id="footerAddress"><i class="fas fa-map-marker-alt"></i> Ciudad de México</a></li>
                        <li><span id="footerHours"><i class="fas fa-clock"></i> Lunes a Viernes 9:00 - 18:00</span></li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright" id="footerCopyright">© 2026 ModaStyle - Tienda de Ropa, Accesorios y Hogar. Todos los derechos reservados.</div>
        </div>
    </footer>

    <script>
        // ==================== FONDO DE PARTÍCULAS ====================
        (function() {
            const canvas = document.getElementById('particlesCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            let particles = [];
            let particleCount = 100;
            
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            
            function createParticles() {
                particles = [];
                for (let i = 0; i < particleCount; i++) {
                    particles.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        radius: Math.random() * 3 + 1,
                        speedX: (Math.random() - 0.5) * 0.5,
                        speedY: (Math.random() - 0.5) * 0.5,
                        color: `rgba(139, 92, 246, ${Math.random() * 0.5 + 0.2})`
                    });
                }
            }
            
            function drawParticles() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach(particle => {
                    ctx.beginPath();
                    ctx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                    ctx.fillStyle = particle.color;
                    ctx.fill();
                    
                    // Mover partículas
                    particle.x += particle.speedX;
                    particle.y += particle.speedY;
                    
                    // Rebote en bordes
                    if (particle.x < 0 || particle.x > canvas.width) {
                        particle.speedX *= -1;
                    }
                    if (particle.y < 0 || particle.y > canvas.height) {
                        particle.speedY *= -1;
                    }
                    
                    // Conectar partículas cercanas
                    particles.forEach(otherParticle => {
                        const dx = particle.x - otherParticle.x;
                        const dy = particle.y - otherParticle.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < 100) {
                            ctx.beginPath();
                            ctx.strokeStyle = `rgba(139, 92, 246, ${0.2 * (1 - distance / 100)})`;
                            ctx.lineWidth = 1;
                            ctx.moveTo(particle.x, particle.y);
                            ctx.lineTo(otherParticle.x, otherParticle.y);
                            ctx.stroke();
                        }
                    });
                });
                
                requestAnimationFrame(drawParticles);
            }
            
            window.addEventListener('resize', () => {
                resizeCanvas();
                createParticles();
            });
            
            resizeCanvas();
            createParticles();
            drawParticles();
        })();

        // ==================== VERSIÓN CORREGIDA CON CONFIGURACIÓN GENERAL ====================
        // SISTEMA DE GENERACIÓN DE DESCRIPCIONES INTELIGENTES
        class GeneradorDescripciones {
            constructor() {
                this.combinaciones = 0;
                this.inicializarVocabulario();
            }

            inicializarVocabulario() {
                this.intros = [
                    "Descubre", "Presentamos", "Te presentamos", "Conoce", "Luce", "Estrena", "Disfruta", "Experimenta",
                    "Renueva tu estilo con", "Actualiza tu look con", "Completa tu outfit con", "Destaca con",
                    "Siente la diferencia con", "Vive la experiencia de", "Atrévete a lucir", "Sorpréndete con",
                    "Eleva tu estilo con", "Transforma tu día con", "Añade a tu colección", "No te pierdas"
                ];

                this.verbos = [
                    "diseñado para", "pensado para", "creado para", "fabricado para", "elaborado para",
                    "desarrollado para", "confeccionado para", "preparado para", "ideal para", "perfecto para",
                    "especialmente hecho para", "cuidadosamente creado para", "exclusivamente diseñado para",
                    "magistralmente elaborado para", "artesanalmente confeccionado para"
                ];

                this.beneficiosBase = [
                    "brindar la máxima comodidad", "ofrecer un estilo único", "garantizar la mejor calidad",
                    "asegurar una durabilidad excepcional", "proporcionar un ajuste perfecto", "dar un toque de distinción",
                    "aportar versatilidad a tu armario", "complementar cualquier ocasión", "adaptarse a tu ritmo de vida",
                    "resistir el uso diario", "mantener su forma original", "conservar los colores vibrantes",
                    "facilitar tu día a día", "hacerte sentir especial", "destacar entre la multitud"
                ];

                this.calidad = [
                    "alta calidad", "primera calidad", "excelente calidad", "calidad superior", "calidad premium",
                    "materiales nobles", "acabados impecables", "detalles cuidados", "fabricación artesanal",
                    "confección profesional", "diseño exclusivo", "estilo contemporáneo", "tendencia actual",
                    "moda vanguardista", "clásico moderno", "estilo atemporal", "look sofisticado"
                ];

                this.versatilidad = [
                    "para cualquier ocasión", "para el día a día", "para eventos especiales", "para looks casuales",
                    "para outfits formales", "para la oficina", "para salir con amigos", "para ocasiones especiales",
                    "para todas las estaciones", "para cualquier clima", "para combinar fácilmente",
                    "para crear múltiples looks", "para expresar tu personalidad", "para sentirte única"
                ];

                this.ctas = [
                    "¡No esperes más para tenerlo!", "¡Añádelo a tu colección ahora!", "¡Hazlo tuyo hoy mismo!",
                    "¡Descubre la diferencia en persona!", "¡Te va a encantar!", "¡No te arrepentirás!",
                    "¡Ideal para regalar o darte un gusto!", "¡Un básico que no puede faltar en tu armario!",
                    "¡La pieza que estabas buscando!", "¡Calidad y estilo en uno solo!", "¡Perfecto para ti!",
                    "¡Lleva tu estilo al siguiente nivel!", "¡Mereces lo mejor, mereces esto!"
                ];

                this.vocabulario = {
                    'camisa': { adjetivos: ['elegante', 'versátil', 'clásica', 'moderna', 'ligera'], especifico: 'tejido de alta calidad' },
                    'camiseta': { adjetivos: ['cómoda', 'básica', 'moderna', 'deportiva', 'informal'], especifico: 'algodón suave' },
                    'playera': { adjetivos: ['cómoda', 'deportiva', 'moderna', 'ligera', 'transpirable'], especifico: 'tela fresca' },
                    'sudader': { adjetivos: ['abrigadora', 'cómoda', 'moderna', 'acogedora', 'deportiva'], especifico: 'interior suave' },
                    'jean': { adjetivos: ['resistente', 'cómodo', 'moderno', 'versátil', 'duradero'], especifico: 'denim de calidad' },
                    'pantalon': { adjetivos: ['elegante', 'cómodo', 'versátil', 'moderno', 'formal'], especifico: 'tela resistente' },
                    'short': { adjetivos: ['cómodo', 'moderno', 'ligero', 'fresco', 'deportivo'], especifico: 'tejido transpirable' },
                    'vestido': { adjetivos: ['elegante', 'femenino', 'moderno', 'sofisticado', 'versátil'], especifico: 'caída perfecta' },
                    'falda': { adjetivos: ['femenina', 'elegante', 'moderna', 'versátil', 'juvenil'], especifico: 'diseño favorecedor' },
                    'blusa': { adjetivos: ['femenina', 'elegante', 'moderna', 'versátil', 'delicada'], especifico: 'detalles únicos' },
                    'tenis': { adjetivos: ['cómodos', 'deportivos', 'modernos', 'ligeros', 'versátiles'], especifico: 'suela antideslizante' },
                    'zapato': { adjetivos: ['elegante', 'cómodo', 'formal', 'moderno', 'versátil'], especifico: 'plantilla acolchada' },
                    'bota': { adjetivos: ['resistente', 'abrigadora', 'moderna', 'duradera', 'versátil'], especifico: 'suela resistente' },
                    'sandalias': { adjetivos: ['cómodas', 'ligeras', 'frescas', 'modernas', 'versátiles'], especifico: 'planta anatómica' },
                    'gorra': { adjetivos: ['moderna', 'cómoda', 'versátil', 'deportiva', 'juvenil'], especifico: 'protección UV' },
                    'mochila': { adjetivos: ['resistente', 'práctica', 'moderna', 'espaciosa', 'cómoda'], especifico: 'compartimentos organizados' },
                    'bolsa': { adjetivos: ['elegante', 'práctica', 'moderna', 'versátil', 'espaciosa'], especifico: 'acabados de lujo' },
                    'cinturon': { adjetivos: ['resistente', 'elegante', 'versátil', 'moderno', 'duradero'], especifico: 'hebilla resistente' },
                    'reloj': { adjetivos: ['elegante', 'moderno', 'sofisticado', 'versátil', 'clásico'], especifico: 'movimiento preciso' },
                    'lentes': { adjetivos: ['modernos', 'elegantes', 'versátiles', 'juveniles', 'sofisticados'], especifico: 'protección UV400' },
                    'bufanda': { adjetivos: ['abrigadora', 'suave', 'elegante', 'versátil', 'cómoda'], especifico: 'tejido térmico' },
                    'sombrero': { adjetivos: ['elegante', 'moderno', 'versátil', 'juvenil', 'sofisticado'], especifico: 'protección solar' },
                    'almohada': { adjetivos: ['cómoda', 'suave', 'abrigadora', 'acogedora', 'confortable'], especifico: 'relleno hipoalergénico' },
                    'cobija': { adjetivos: ['abrigadora', 'suave', 'cómoda', 'acogedora', 'confortable'], especifico: 'tejido térmico' },
                    'toalla': { adjetivos: ['suave', 'absorbente', 'cómoda', 'práctica', 'duradera'], especifico: 'algodón de alta calidad' },
                    'funda': { adjetivos: ['resistente', 'protectora', 'moderna', 'ligera', 'práctica'], especifico: 'protección contra golpes' },
                    'audifonos': { adjetivos: ['inalámbricos', 'cómodos', 'modernos', 'prácticos', 'versátiles'], especifico: 'sonido de alta fidelidad' },
                    'cargador': { adjetivos: ['rápido', 'seguro', 'práctico', 'portátil', 'versátil'], especifico: 'protección contra sobrecarga' }
                };
            }

            generarDescripcion(nombre, categoria, subcategoria, precioRegular, precioDescuento = null) {
                const nombreLower = nombre.toLowerCase();
                const subcategoriaLower = subcategoria.toLowerCase();
                
                let tipoDetectado = this.detectarTipoProducto(nombreLower, subcategoriaLower);
                
                let vocabularioTipo = this.vocabulario[tipoDetectado] || {
                    adjetivos: ['excelente', 'moderno', 'versátil', 'cómodo', 'práctico'],
                    especifico: 'calidad superior'
                };

                const intro = this.seleccionarAleatorio(this.intros);
                const verbo = this.seleccionarAleatorio(this.verbos);
                const beneficio = this.seleccionarAleatorio(this.beneficiosBase);
                const adjetivo1 = this.seleccionarAleatorio(vocabularioTipo.adjetivos);
                const adjetivo2 = this.seleccionarAleatorio(vocabularioTipo.adjetivos.filter(a => a !== adjetivo1));
                const calidad = this.seleccionarAleatorio(this.calidad);
                const version = this.seleccionarAleatorio(this.versatilidad);
                const cta = this.seleccionarAleatorio(this.ctas);

                const precioActual = precioDescuento || precioRegular;
                const precioOriginal = precioDescuento ? precioRegular : null;
                
                const estructura = Math.floor(Math.random() * 4);
                
                let descripcion = '';
                
                switch(estructura) {
                    case 0:
                        descripcion = `${intro} nuestro ${adjetivo1} ${nombre}. ${this.capitalizar(verbo)} ${beneficio}, con ${vocabularioTipo.especifico} y ${calidad}. Perfecto ${version}. ${cta}`;
                        break;
                    case 1:
                        descripcion = `${intro} la ${adjetivo1} ${nombre} que estabas buscando. ${this.capitalizar(verbo)} ${beneficio} y ${vocabularioTipo.especifico}. Con acabados de ${calidad}, es ${adjetivo2} y versátil ${version}. ${cta}`;
                        break;
                    case 2:
                        descripcion = `${intro} nuestra ${nombre} de ${calidad}. ${this.capitalizar(verbo)} ${beneficio}, con ${vocabularioTipo.especifico} y diseño ${adjetivo1}. Ideal ${version}. ${cta}`;
                        break;
                    case 3:
                        descripcion = `${intro} esta ${adjetivo1} ${nombre}. ${this.capitalizar(verbo)} ${beneficio} gracias a su ${vocabularioTipo.especifico}. Confeccionada con ${calidad}, es ${adjetivo2} y funcional ${version}. ${cta}`;
                        break;
                }

                if (precioDescuento) {
                    descripcion += ` ¡Aprovecha nuestro precio especial de $${precioDescuento} (antes $${precioOriginal})!`;
                }

                this.combinaciones++;
                
                return descripcion;
            }

            detectarTipoProducto(nombre, subcategoria) {
                for (let [tipo, datos] of Object.entries(this.vocabulario)) {
                    if (nombre.includes(tipo.toLowerCase()) || subcategoria.includes(tipo.toLowerCase())) {
                        return tipo;
                    }
                }
                
                if (subcategoria.includes('ropa') || subcategoria.includes('vestir')) return 'camisa';
                if (subcategoria.includes('calzado')) return 'zapato';
                if (subcategoria.includes('accesorio')) return 'accesorios';
                
                return Object.keys(this.vocabulario)[nombre.charCodeAt(0) % Object.keys(this.vocabulario).length];
            }

            capitalizar(texto) {
                return texto.charAt(0).toUpperCase() + texto.slice(1);
            }

            seleccionarAleatorio(array) {
                return array[Math.floor(Math.random() * array.length)];
            }

            obtenerEstadisticas() {
                let totalCombinaciones = 1;
                totalCombinaciones *= this.intros.length;
                totalCombinaciones *= this.verbos.length;
                totalCombinaciones *= this.beneficiosBase.length;
                totalCombinaciones *= this.versatilidad.length;
                totalCombinaciones *= this.ctas.length;
                totalCombinaciones *= Math.max(...Object.values(this.vocabulario).map(v => v.adjetivos.length)) * 2;
                
                return {
                    combinacionesPosibles: totalCombinaciones,
                    combinacionesGeneradas: this.combinaciones
                };
            }
        }

        // ==================== DATOS INICIALES ====================
        const CURRENT_VERSION = '3.14.0';

        let productos = [{"id":2,"nombre":"SUDADERA","precioRegular":"$130","imagen":"https://i.postimg.cc/QtnW4QCb/1.jpg","categoria":"hombre","subcategoria":"SUDADERA","descripcion":"SUDADERA. Diseñado para brindar la máxima comodidad gracias a su interior suave. Confeccionada con acabados impecables, es deportiva y funcional para ocasiones especiales. ¡La pieza que estabas buscando!","estado":"nuevo","especificaciones":["Lijera.","Deportiva.","Caual urbana"],"variantes":[{"nombre":"Talla","tipo":"select","opciones":["S","M"],"required":true},{"nombre":"Color","tipo":"select","opciones":["Negro","Gris Oxford","Azul rey","Cafe","verde militar","Gris claro","Azul marino"],"required":true}],"stock":{"S|Negro":1,"S|Gris Oxford":1,"S|Azul rey":1,"S|Cafe":1,"S|verde militar":1,"S|Gris claro":1,"S|Azul marino":1,"M|Negro":1,"M|Gris Oxford":1,"M|Azul rey":1,"M|Cafe":0,"M|verde militar":0,"M|Gris claro":0,"M|Azul marino":0},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/x8km039p/1_NEGRA.jpg"],"Gris Oxford":["https://i.postimg.cc/2yqWz7CH/2_GRIS_OSCURO.jpg"],"Azul rey":["https://i.postimg.cc/85XWQ0V8/3_AZUL.jpg"],"Cafe":["https://i.postimg.cc/3NyGKF3q/4_CAFE.jpg"],"verde militar":["https://i.postimg.cc/d37Cqjqw/5_VERDE_MILITAR.png"],"Gris claro":["https://i.postimg.cc/x8km030S/6_GRIS_CLARO.jpg"],"Azul marino":["https://i.postimg.cc/ZYc3S04F/7-AZUL-MARINO.png"]}},{"id":15,"nombre":"Chamarra deportiva","precioRegular":"$230","imagen":"https://i.postimg.cc/26XBcQyT/6.jpg","categoria":"mujer","subcategoria":"Chamarra","descripcion":"Chamarra deportiva que estabas buscando. Para resistir el uso diario. Con acabados de excelente calidad. ¡Ideal para regalar o darte un gusto!","estado":"nuevo","especificaciones":["Tela de alto rendimiento","Secado rapido y resstentes","Lijera."],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Negro","Blanco","Azul cielo","Rosa"],"required":true}],"stock":{"Negro":0,"Blanco":0,"Azul cielo":2,"Rosa":2},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/RVtW0Fzd/1_NEGRO.png"],"Blanco":["https://i.postimg.cc/Qx7FMtrf/2_BLANCO.png"],"Azul cielo":["https://i.postimg.cc/K8yR32Zf/4_AZUL_CLARO.jpg"],"Rosa":["https://i.postimg.cc/sDWM2XR6/3_ROSA.png"]}},{"id":1,"nombre":"PANS","precioRegular":"$130","imagen":"https://i.postimg.cc/bJF2CxrR/2.jpg","categoria":"hombre","subcategoria":"PANS DEPORTIVO","descripcion":"Confeccionado para adaptarse a tu ritmo de vida, con tejido de alta calidad y diseño ligero. Ideal para el día a día. ¡No esperes más para tenerlo!","estado":"nuevo","especificaciones":["Tela de algodón de alta calidad.","Cintura elástica.","Básicos cómodos y modernos."],"variantes":[{"nombre":"talla","tipo":"select","opciones":["S","M"],"required":true},{"nombre":"Color","tipo":"select","opciones":["Negro","Gris Oxford","Azul rey","Cafe","verde militar","Gris claro","Azul marino"],"required":true}],"stock":{"S|Negro":1,"S|Gris Oxford":1,"S|Azul rey":1,"S|Cafe":1,"S|verde militar":1,"S|Gris claro":1,"S|Azul marino":1,"M|Negro":1,"M|Gris Oxford":1,"M|Azul rey":1,"M|Cafe":0,"M|verde militar":0,"M|Gris claro":0,"M|Azul marino":0},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/C1zwRv91/1_NEGRO.png"],"Gris Oxford":["https://i.postimg.cc/fLJMVH1k/5_GRIS_OSCURO.png"],"Azul rey":["https://i.postimg.cc/zBVqyd4X/4_AZUL.png"],"verde militar":["https://i.postimg.cc/ZRCJWfX9/6_VERDE.png"],"Gris claro":["https://i.postimg.cc/tTY9sr8J/2_GRIS.png"],"Azul marino":["https://i.postimg.cc/PJLXL6vn/3_AZUL_MARINO.png"],"Cafe":["https://i.postimg.cc/J07TKgcK/7-CAFE.png"]}},{"id":13,"nombre":"LEGINS RECTOS","precioRegular":"$210","imagen":"https://i.postimg.cc/DZzXPjvN/3.jpg","categoria":"mujer","subcategoria":"LEGINS","descripcion":"Suave LEGINS RECTOS. Perfecto para facilitar tu día a día, de alta calidad. Perfecto para expresar tu personalidad.","estado":"nuevo","especificaciones":["Licra grusa","Bolsas laterales","Realza tu figura"],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Negro","Gris","Blanco"],"required":true},{"nombre":"Talla","tipo":"select","opciones":["CH","M"],"required":true}],"stock":{"Negro|CH":0,"Negro|M":2,"Gris|CH":1,"Gris|M":1,"Blanco|CH":0,"Blanco|M":0},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/tCd9fVjv/1_NEGRO.png"],"Gris":["https://i.postimg.cc/WbmsKJvf/2_GRIS.png"],"Blanco":["https://i.postimg.cc/SNLm5zhV/3_BLANCO.png"]}},{"id":4,"nombre":"GORRA","precioRegular":"$85","imagen":"https://i.postimg.cc/2SbbQ252/GORRA_UNISEX_20260220_171444_0000.jpg","categoria":"accesorios","subcategoria":"GORRA","descripcion":"GORRA moderna.  Creado para asegurar una durabilidad excepcional. Ideal para crear múltiples looks. ¡Calidad y estilo en uno solo!","estado":"nuevo","especificaciones":["Ajustable","Diseño bordado"],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Negro","Lila","Gris claro","Verde militar","Verde pato"],"required":true}],"stock":{"Negro":2,"Lila":1,"Gris claro":1,"Verde militar":1,"Verde pato":1},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/pLhhfqdk/GORRA_UNISEX_20260220_171444_0001.jpg"],"Lila":["https://i.postimg.cc/dVkk240B/GORRA_UNISEX_20260220_171444_0002.jpg"],"Gris claro":["https://i.postimg.cc/y8ggmvNX/GORRA_UNISEX_20260220_171444_0003.jpg"],"Verde militar":["https://i.postimg.cc/htzzLpG8/GORRA_UNISEX_20260220_171444_0005.jpg"],"Verde pato":["https://i.postimg.cc/pLhhfqdJ/GORRA_UNISEX_20260220_171444_0004.jpg"]}},{"id":3,"nombre":"MOCHILA","precioRegular":"$250","imagen":"https://i.postimg.cc/mrSbCH7D/Mochilas_20260220_171827_0000.jpg","categoria":"accesorios","subcategoria":"MOCHILA","descripcion":"Sorpréndete con nuestro moderna MOCHILA. Confeccionada para resistir el uso diario, detalles cuidados. Perfecto para looks casuales.","estado":"nuevo","especificaciones":["Mochila","Muñequera","Crossbody"],"variantes":[{"nombre":"color","tipo":"select","opciones":["Negro","Nude","Palo de rosa"],"required":true}],"stock":{"Negro":1,"Nude":1,"Palo de rosa":1},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/QMD8FbKc/Mochilas_20260220_171827_0001.jpg","https://i.postimg.cc/VNwfJR0t/Mochilas_20260220_171827_0002.jpg","https://i.postimg.cc/1zK9wqD4/Mochilas_20260220_171827_0003.jpg","https://i.postimg.cc/XvgVdC9p/Mochilas_20260220_171827_0004.jpg"],"Nude":["https://i.postimg.cc/tgzXWxFs/Mochilas_20260220_171827_0005.jpg","https://i.postimg.cc/LsVHL1jq/Mochilas_20260220_171827_0006.jpg","https://i.postimg.cc/9fBWZ7yT/Mochilas_20260220_171827_0007.jpg","https://i.postimg.cc/pdB2zFKz/Mochilas_20260220_171827_0008.jpg"],"Palo de rosa":["https://i.postimg.cc/LsVHL1jk/Mochilas_20260220_171827_0009.jpg","https://i.postimg.cc/6Qh9nvCd/Mochilas_20260220_171827_0010.jpg","https://i.postimg.cc/HLtpXybw/Mochilas_20260220_171827_0011.jpg","https://i.postimg.cc/DzhvSg4L/Mochilas_20260220_171828_0012.jpg"]}},{"id":5,"nombre":"CINTURO","precioRegular":"$75","imagen":"https://i.postimg.cc/Bb0kgYsq/CINTURONES_20260220_172850_0000.jpg","categoria":"accesorios","subcategoria":"CINTURON","descripcion":"Te presentamos esta resistente CINTURO. Fabricado para resistir el uso diario gracias a su hebilla resistente. Es duradero y funcional. ¡Un básico que no puede faltar en tu armario!","estado":"nuevo","especificaciones":["Material resistente"],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Negro","Gris","Verde agua","Cafe"],"required":true},{"nombre":"Talla","tipo":"select","opciones":["CH","M"],"required":true}],"stock":{"Negro|CH":0,"Negro|M":2,"Gris|CH":1,"Gris|M":1,"Verde agua|CH":0,"Verde agua|M":2,"Cafe|CH":0,"Cafe|M":2},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/kGmzc197/CINTURONES_20260220_172850_0001.jpg"],"Gris":["https://i.postimg.cc/6qXg0jw5/CINTURONES_20260220_172850_0004.jpg"],"Verde agua":["https://i.postimg.cc/6qXg0jwK/CINTURONES_20260220_172850_0002.jpg"],"Cafe":["https://i.postimg.cc/1XQ2HCPP/CINTURONES_20260220_172850_0003.jpg"]}},{"id":8,"nombre":"CALCETIN SPORT SOCKS","precioRegular":"25","imagen":"https://i.postimg.cc/9QMPvdQj/MUJER_20260220_171039_0000.jpg","categoria":"mujer","subcategoria":"CALCETIN NIKE","descripcion":"Sorpréndete con esta cómoda CALCETIN SPORT SOCKS. Preparado para ofrecer un estilo único gracias a sus materiales de alta calidad, es moderna y funcional para todas las estaciones.","estado":"nuevo","especificaciones":["Elastico","LIgero/Grueso","Comodos"],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Azul cielo","Lila","Beg","Rosa","Gris","Verde pastel"],"required":true}],"stock":{"Azul cielo":2,"Lila":2,"Beg":2,"Rosa":2,"Gris":2,"Verde pastel":2},"galeriaPorVariante":{"Azul cielo":["https://i.postimg.cc/Yq8fnnMC/MUJER_20260220_171039_0001.jpg"],"Lila":["https://i.postimg.cc/CLJHPPSw/MUJER_20260220_171039_0006.jpg"],"Beg":["https://i.postimg.cc/fRL76cRQ/MUJER_20260220_171039_0002.jpg"],"Rosa":["https://i.postimg.cc/8PwBKKNp/MUJER_20260220_171039_0003.jpg"],"Gris":["https://i.postimg.cc/vHXLqqbQ/MUJER_20260220_171039_0004.jpg"],"Verde pastel":["https://i.postimg.cc/CLJHPPSS/MUJER_20260220_171039_0005.jpg"]}},{"id":17,"nombre":"CONJUNTO LEGINS MUJER","precioRegular":"$490","imagen":"https://i.postimg.cc/RFbns7hX/7.jpg","categoria":"mujer","subcategoria":"CONJUNTO LEGINS","descripcion":"Siente la diferencia con nuestra CONJUNTO LEGINS MUJER de tendencia actual, diseño resistente. Ideal para el gym o actividades al aire libre.","estado":"nuevo","especificaciones":["Material grueso","Bolsas laterales","Realza tu figura"],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Negro","Gris"],"required":true},{"nombre":"Talla","tipo":"select","opciones":["M"],"required":true}],"stock":{"Negro|M":1,"Gris|M":1},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/NMHPCVVv/1_NEGRO.jpg"],"Gris":["https://i.postimg.cc/SsMt155F/2_GRIS.jpg"]}},{"id":12,"nombre":"TOP","precioRegular":"$185","imagen":"https://i.postimg.cc/631GjrqP/9.jpg","categoria":"mujer","subcategoria":"Top","descripcion":"Fabricado para brindar la máxima comodidad, calidad y diseño resistente. ¡Perfecto para actividaddes al aire libre!","estado":"nuevo","especificaciones":["Copa includa","Grueso","Comodos"],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Negro"],"required":true},{"nombre":"Talla","tipo":"select","opciones":["M"],"required":true}],"stock":{"Negro|M":2},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/tCb64tww/1.jpg","https://i.postimg.cc/hP0dzQRs/1_(2).jpg"]}},{"id":11,"nombre":"FALDA SORT","precioRegular":"$180","imagen":"https://i.postimg.cc/mD6FXYkm/8.jpg","categoria":"mujer","subcategoria":"FALDAS","descripcion":"Atrévete a lucir nuestras  FALDAS. Creada para brindar la máxima comodidad, con diseño favorecedor y alta calidad para un uso deprtivo  ¡Descubre la diferencia!.","estado":"nuevo","especificaciones":["Skort","Comodas","Elasticas"],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Negro","Gris","Blanco"],"required":true},{"nombre":"Talla","tipo":"select","opciones":["CH","M"],"required":true}],"stock":{"Negro|CH":0,"Negro|M":2,"Gris|CH":1,"Gris|M":1,"Blanco|CH":0,"Blanco|M":0},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/C16gGjbj/1_NEGRO.jpg"],"Gris":["https://i.postimg.cc/hj3BL9V8/2_GRIS.png"],"Blanco":["https://i.postimg.cc/MTrS7y1B/3_BLANCO.png"]}},{"id":14,"nombre":"LEGINS ACAMPANADOS","precioRegular":"$230","imagen":"https://i.postimg.cc/pTdFJGW7/4.jpg","categoria":"mujer","subcategoria":"LEGINS","descripcion":"Vive la experiencia de nuestros cómodos LEGINS ACAMPANADOS. Diseñado para mantener su forma original, con licra de alta calidad. Perfecto para sentirte única. ¡Hazlo tuyo hoy mismo!","estado":"nuevo","especificaciones":["Licra gruesa","Amolda tu figura"],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Negro","Blanco"],"required":true},{"nombre":"Talla","tipo":"select","opciones":["CH","M"],"required":true}],"stock":{"Negro|CH":0,"Negro|M":2,"Blanco|CH":0,"Blanco|M":0},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/13zbHg5f/1_NEGRO_ACAMPANADO.png"],"Blanco":["https://i.postimg.cc/RZ02R3Vq/2_BLANCO_ACAMPANADO.png"]}},{"id":16,"nombre":"LEGINS","precioRegular":"$110","imagen":"https://i.postimg.cc/d1STH236/5.jpg","categoria":"mujer","subcategoria":"LEGINS","descripcion":"Ideal para facilitar tu día a día, ya que son lijeros y comodos.  Perfecto para actividades al aire libre. ¡Añádelo a tu colección ahora!","estado":"nuevo","especificaciones":["Bolsa laterales","Lijeros","Tranparencias laterales"],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Negro","Azul marino","Verde militar","Rosa"],"required":true}],"stock":{"Negro":0,"Azul marino":0,"Verde militar":0,"Rosa":0},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/SKRY7b5F/1_NEGRO.png"],"Azul marino":["https://i.postimg.cc/XvPGsDM2/2_AZUL_MARINO.png"],"Verde militar":["https://i.postimg.cc/7LRGKQvK/4_VERDE.png"],"Rosa":["https://i.postimg.cc/3wN0CQ6M/3_ROSA.png"]}},{"id":6,"nombre":"CALCETAS MULAYA'S","precioRegular":"25","imagen":"https://i.postimg.cc/4y8Cxvkn/HOMBRE_2_20260220_174822_0000.jpg","categoria":"hombre","subcategoria":"CALCETAS FASHION","descripcion":"Siente la diferencia con esta práctica CALCETAS MULAYA'S. Fabricado para brindar la máxima comodidad gracias a su materiales, funcional para combinar fácilmente. ¡Ideal para regalar o darte un gusto!","estado":"nuevo","especificaciones":["Elasticos","Gruesos","Comodos"],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Negro","Gris rata","Gris claro","Azul marino"],"required":true}],"stock":{"Negro":2,"Gris rata":3,"Gris claro":3,"Azul marino":4},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/3NLMxj58/HOMBRE_2_20260220_174822_0001.jpg"],"Gris rata":["https://i.postimg.cc/nrd8hKbp/HOMBRE_2_20260220_174823_0004.jpg"],"Gris claro":["https://i.postimg.cc/j28VS60q/HOMBRE_2_20260220_174822_0002.jpg"],"Azul marino":["https://i.postimg.cc/fyH4R7nM/HOMBRE_2_20260220_174823_0003.jpg"]}},{"id":7,"nombre":"CALCETIN SPORT","precioRegular":"25","imagen":"https://i.postimg.cc/RZdtVNqG/HOMBRE_1_20260220_174351_0000.jpg","categoria":"hombre","subcategoria":"CALCETIN SPORT SOCKS","descripcion":"Destaca con nuestra CALCETIN SPORT de acabados impecables. Perfecto para mantener su forma origina. Ideal para el día a día. ¡Te va a encantar!","estado":"nuevo","especificaciones":[],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Negro","Azul marino","Gris claro","Gris rata"],"required":true}],"stock":{"Negro":15,"Azul marino":3,"Gris claro":3,"Gris rata":3},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/JzxX4Gtx/HOMBRE_1_20260220_174351_0001.jpg"],"Azul marino":["https://i.postimg.cc/P5yDrPNM/HOMBRE_1_20260220_174352_0004.jpg"],"Gris claro":["https://i.postimg.cc/fRCdTJkj/HOMBRE_1_20260220_174352_0003.jpg"],"Gris rata":["https://i.postimg.cc/sgmWDv1n/HOMBRE_1_20260220_174351_0002.jpg"]}},{"id":9,"nombre":"CALCETIN NIKE","precioRegular":"$25","imagen":"https://i.postimg.cc/XJ3k1TGW/MUJER_2_20260220_173613_0000.jpg","categoria":"mujer","subcategoria":"CALCETIN","descripcion":"Estrena esta resistente CALCETIN NIKE. Fabricado para complementar cualquier ocasión. Confeccionada con look sofisticado, es práctica y funcional. ¡Un básico que no puede faltar en tu armario!","estado":"nuevo","especificaciones":[],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Negro","Gris","Blanco","Azul marino"],"required":true}],"stock":{"Negro":3,"Gris":3,"Blanco":3,"Azul marino":3},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/d1vjNzkM/MUJER_2_20260220_173613_0001.jpg"],"Gris":["https://i.postimg.cc/qR0xD9hd/MUJER_2_20260220_173613_0002.jpg"],"Blanco":["https://i.postimg.cc/ydBypwgC/MUJER_2_20260220_173613_0004.jpg"],"Azul marino":["https://i.postimg.cc/k49vYkV0/MUJER_2_20260220_173613_0003.jpg"]}},{"id":10,"nombre":"CALCETIN ADIDAS","precioRegular":"$25","imagen":"https://i.postimg.cc/Hxs7yH8k/MUJER_3_20260220_173842_0000.jpg","categoria":"mujer","subcategoria":"CALCETIN","descripcion":"Conoce esta cómoda CALCETIN ADIDAS. Diseñado para garantizar la mejor calidad. Confeccionada con acabados impecables, es moderna y funcional. ¡Añádelo a tu colección ahora!","estado":"nuevo","especificaciones":[],"variantes":[{"nombre":"Color","tipo":"select","opciones":["Negro","Gris","Blanco","Azul marino"],"required":true}],"stock":{"Negro":3,"Gris":3,"Blanco":3,"Azul marino":3},"galeriaPorVariante":{"Negro":["https://i.postimg.cc/268BZmLj/MUJER_3_20260220_173842_0001.jpg"],"Gris":["https://i.postimg.cc/85Pr6DfD/MUJER_3_20260220_173842_0003.jpg"],"Blanco":["https://i.postimg.cc/d1tTyvZt/MUJER_3_20260220_173842_0002.jpg"],"Azul marino":["https://i.postimg.cc/W3bJkjqz/MUJER_3_20260220_173842_0004.jpg"]}}];

        let categorias = [{"id":"todo","nombre":"TODO","color":"#D4AF37","icono":"fa-tags","orden":0},{"id":"hombre","nombre":"Hombre","color":"#2563EB","icono":"fa-user-tie","orden":1},{"id":"mujer","nombre":"Mujer","color":"#DB2777","icono":"fa-female","orden":2},{"id":"accesorios","nombre":"Accesorios","color":"#7C3AED","icono":"fa-briefcase","orden":3}];

        let sectionCategories = [{"id":1,"name":"Hombre","description":"Ropa para hombres para todos los estilos","image":"https://i.postimg.cc/QtnW4QCb/1.jpg","buttonColor":"#2563eb","action":"carrito.filterProducts('hombre')","order":1},{"id":2,"name":"Mujer","description":"Moda femenina para todos los estilos","image":"https://i.postimg.cc/mD6FXYkm/8.jpg","buttonColor":"#db2777","action":"carrito.filterProducts('mujer')","order":2},{"id":4,"name":"Accesorios","description":"Complementos para elevar tu look","image":"https://i.postimg.cc/mrSbCH7D/Mochilas_20260220_171827_0000.jpg","buttonColor":"#7c3aed","action":"carrito.filterProducts('accesorios')","order":3}];

        let sectionConfig = {"title":"Nuestras Categorías","subtitle":"Explora nuestra variedad de productos organizados por categorías"};
        
        let deliveryConfig = {"points":[{"id":"xhala","name":"San Sebastián Xhala","address":"San Sebastián, enfrente de la universidad","map":"https://maps.app.goo.gl/nKi4gyiDY1KikZPQ6"},{"id":"socorro","name":"El Socorro","address":"Colonia El Socorro, en los Arcos en frente del oxxo","map":"https://maps.app.goo.gl/BYYZWmaa9TbtjWvD8"},{"id":"mateo","name":"San Mateo","address":"San Mateo, en frente de la iglesia","map":"https://maps.app.goo.gl/q1KoquLtgrTEnuCo6"}],"times":[{"id":"time1771356290191","value":"11:30","label":"11:30 AM"},{"id":"time1771356300623","value":"19:30","label":"7:30 PM"}],"transfer":{"nombre":"Saul Flores","banco":"STP","clabe":"721180100001101243"}};

        let cuponesDisponibles = [];
        let cuponesUsados = ["cupon1771391296288","cupon1771391284156","cupon1771607993717","cupon1771607991071","cupon1771607988171","cupon1771607984559","cupon1771688064843","cupon1771688072907","cupon1771784636834","cupon1771878474485","cupon1771878472026"];
        let cuponesExpirados = ["cupon1770918868389"];
        let bannersDisponibles = [];

        // ==================== NUEVA CONFIGURACIÓN GENERAL ====================
        let generalConfig = {"shipping":{"freeMinimum":300,"cost":50,"estimatedTime":"24-48 horas"},"contact":{"phone":"(55) 1234-5678","whatsapp":"5567416073","email":"info@modastyle.com","address":"Ciudad de México","hours":"Lunes a Viernes 9:00 - 18:00"},"socialMedia":[{"id":"fb1","name":"facebook","url":"https://facebook.com/","icon":"fa-facebook","color":"#1877f2","active":true},{"id":"ig1","name":"instagram","url":"https://instagram.com/","icon":"fa-instagram","color":"#e4405f","active":true}],"store":{"name":"ModaStyle","slogan":"Tienda de Ropa, Accesorios y Hogar","currency":"MXN","language":"es","maintenance":false,"trackingNotifications":true}};

        // ==================== SISTEMA DE CONFIRMACIÓN MODAL ====================
        class ConfirmModal {
            constructor() {
                this.modal = document.getElementById('confirmModal');
                this.icon = document.getElementById('confirmIcon');
                this.title = document.getElementById('confirmTitle');
                this.message = document.getElementById('confirmMessage');
                this.cancelBtn = document.getElementById('confirmCancel');
                this.acceptBtn = document.getElementById('confirmAccept');
                
                this.callback = null;
                this.setupEventListeners();
            }
            
            setupEventListeners() {
                this.cancelBtn.addEventListener('click', () => this.hide());
                this.acceptBtn.addEventListener('click', () => {
                    if (this.callback) this.callback();
                    this.hide();
                });
                
                this.modal.addEventListener('click', (e) => {
                    if (e.target === this.modal) this.hide();
                });
                
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && this.modal.classList.contains('active')) {
                        this.hide();
                    }
                });
            }
            
            show(options) {
                const { title, message, type = 'warning', onConfirm } = options;
                
                this.title.textContent = title || '¿Estás seguro?';
                this.message.textContent = message || 'Esta acción no se puede deshacer.';
                
                this.icon.className = 'confirm-icon';
                if (type === 'warning') {
                    this.icon.classList.add('warning');
                    this.icon.innerHTML = '<i class="fas fa-exclamation-triangle"></i>';
                } else if (type === 'success') {
                    this.icon.classList.add('success');
                    this.icon.innerHTML = '<i class="fas fa-check-circle"></i>';
                } else if (type === 'error') {
                    this.icon.classList.add('error');
                    this.icon.innerHTML = '<i class="fas fa-times-circle"></i>';
                } else if (type === 'info') {
                    this.icon.classList.add('info');
                    this.icon.innerHTML = '<i class="fas fa-info-circle"></i>';
                }
                
                this.acceptBtn.className = 'confirm-btn';
                if (type === 'success') {
                    this.acceptBtn.classList.add('success');
                } else {
                    this.acceptBtn.classList.add('confirm');
                }
                
                this.callback = onConfirm;
                this.modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
            
            hide() {
                this.modal.classList.remove('active');
                document.body.style.overflow = 'auto';
                this.callback = null;
            }
        }

        // ==================== SISTEMA DE BÚSQUEDA ====================
        class Buscador {
            constructor() {
                this.searchTimeout = null;
                this.currentSearch = '';
                this.isSearching = false;
                this.init();
            }
            
            init() {
                this.setupEventListeners();
            }
            
            setupEventListeners() {
                const searchInput = document.getElementById('searchInput');
                const clearSearch = document.getElementById('clearSearch');
                const searchResults = document.getElementById('searchResults');
                
                if (searchInput) {
                    searchInput.addEventListener('input', (e) => {
                        this.handleSearchInput(e.target.value, 'header');
                    });
                    
                    searchInput.addEventListener('focus', () => {
                        if (searchInput.value.trim()) {
                            this.showSearchResults(searchInput.value, 'header');
                        }
                    });
                }
                
                if (clearSearch) {
                    clearSearch.addEventListener('click', () => {
                        this.clearSearch('header');
                    });
                }
                
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.search-container')) {
                        searchResults.classList.remove('active');
                    }
                });
                
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        searchResults.classList.remove('active');
                        searchInput.blur();
                    }
                });
            }
            
            handleSearchInput(query, type) {
                clearTimeout(this.searchTimeout);
                query = query.trim();
                
                if (type === 'header') {
                    const clearBtn = document.getElementById('clearSearch');
                    if (clearBtn) clearBtn.classList.toggle('active', query.length > 0);
                }
                
                if (query.length < 2) {
                    if (type === 'header') {
                        document.getElementById('searchResults').classList.remove('active');
                    } else if (type === 'products' && window.carrito) {
                        window.carrito.renderProducts();
                    }
                    return;
                }
                
                this.searchTimeout = setTimeout(() => {
                    if (type === 'header') {
                        this.showSearchResults(query, type);
                    } else if (type === 'products') {
                        this.filterProductsBySearch(query);
                    }
                }, 300);
            }
            
            showSearchResults(query, type) {
                const searchResults = document.getElementById('searchResults');
                const results = this.searchProducts(query, 10);
                
                if (results.length === 0) {
                    searchResults.innerHTML = `
                        <div class="search-no-results">
                            <i class="fas fa-search"></i>
                            <p>No se encontraron productos</p>
                            <p style="font-size: 0.7rem; margin-top: 5px;">Intenta con otros términos</p>
                        </div>
                    `;
                } else {
                    searchResults.innerHTML = results.map(product => {
                        const precio = product.precioDescuento || product.precioRegular;
                        const categoria = categorias.find(c => c.id === product.categoria);
                        
                        return `
                            <div class="search-result-item" onclick="buscador.selectSearchResult(${product.id})">
                                <img src="${product.imagen}" alt="${product.nombre}" class="search-result-image">
                                <div class="search-result-info">
                                    <div class="search-result-name">${product.nombre}</div>
                                    <div class="search-result-category">
                                        <i class="fas fa-tag"></i>
                                        ${categoria ? categoria.nombre : product.categoria}
                                    </div>
                                </div>
                                <div class="search-result-price">${precio}</div>
                            </div>
                        `;
                    }).join('');
                }
                
                searchResults.classList.add('active');
                
                if (window.carrito && window.carrito.currentFilter !== 'todo') {
                    window.carrito.filterProducts('todo');
                }
                document.getElementById('productos').scrollIntoView({ behavior: 'smooth' });
            }
            
            searchProducts(query, limit = null) {
                query = query.toLowerCase().trim();
                if (!query) return [];
                
                const results = productos.filter(product => {
                    if (product.nombre.toLowerCase().includes(query)) return true;
                    if (product.descripcion && product.descripcion.toLowerCase().includes(query)) return true;
                    if (product.subcategoria.toLowerCase().includes(query)) return true;
                    if (product.especificaciones && product.especificaciones.some(spec => spec.toLowerCase().includes(query))) return true;
                    
                    const categoria = categorias.find(c => c.id === product.categoria);
                    if (categoria && categoria.nombre.toLowerCase().includes(query)) return true;
                    
                    return false;
                });
                
                results.sort((a, b) => {
                    const aInName = a.nombre.toLowerCase().includes(query);
                    const bInName = b.nombre.toLowerCase().includes(query);
                    if (aInName && !bInName) return -1;
                    if (!aInName && bInName) return 1;
                    return a.nombre.localeCompare(b.nombre);
                });
                
                return limit ? results.slice(0, limit) : results;
            }
            
            filterProductsBySearch(query) {
                this.currentSearch = query;
                this.isSearching = true;
                
                if (!window.carrito) return;
                
                const results = this.searchProducts(query);
                const filteredProducts = query ? results : productos;
                
                this.renderFilteredProducts(filteredProducts);
                this.updateSearchResultsMessage(query, results.length);
            }
            
            renderFilteredProducts(filteredProducts) {
                const productsGrid = document.getElementById('productsGrid');
                
                if (filteredProducts.length === 0) {
                    productsGrid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-light);">
                            <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.3;"></i>
                            <h3>No se encontraron productos</h3>
                            <p>Prueba con otros términos de búsqueda</p>
                            <button onclick="buscador.clearSearch('header')" style="margin-top: 15px; padding: 8px 16px; background: var(--accent); color: white; border: none; border-radius: var(--border-radius-sm); cursor: pointer;">
                                <i class="fas fa-times"></i> Limpiar búsqueda
                            </button>
                        </div>
                    `;
                    return;
                }
                
                if (window.carrito) {
                    window.carrito.renderFilteredProducts(filteredProducts);
                }
            }
            
            updateSearchResultsMessage(query, count) {
                const sectionSubtitle = document.querySelector('#productos .section-subtitle');
                if (sectionSubtitle) {
                    if (query) {
                        sectionSubtitle.textContent = `Encontramos ${count} producto${count !== 1 ? 's' : ''} para "${query}"`;
                        sectionSubtitle.style.color = '#8B5CF6';
                        sectionSubtitle.style.fontWeight = '600';
                    } else {
                        sectionSubtitle.textContent = 'Explora nuestra colección completa de productos';
                        sectionSubtitle.style.color = '';
                        sectionSubtitle.style.fontWeight = '';
                    }
                }
            }
            
            selectSearchResult(productId) {
                document.getElementById('searchResults').classList.remove('active');
                this.clearSearch('header');
                
                const product = productos.find(p => p.id === productId);
                if (product && window.carrito) {
                    window.carrito.filterProducts('todo');
                    window.carrito.renderFilteredProducts([product]);
                    
                    setTimeout(() => {
                        const productCard = document.querySelector(`.product-card[data-product-id="${productId}"]`);
                        if (productCard) {
                            productCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            productCard.style.animation = 'none';
                            setTimeout(() => {
                                productCard.style.animation = '';
                                productCard.style.boxShadow = '0 0 0 3px #8B5CF6';
                                setTimeout(() => {
                                    productCard.style.boxShadow = '';
                                }, 1000);
                            }, 50);
                        }
                    }, 300);
                }
            }
            
            clearSearch(type) {
                if (type === 'header') {
                    const searchInput = document.getElementById('searchInput');
                    const clearBtn = document.getElementById('clearSearch');
                    const searchResults = document.getElementById('searchResults');
                    
                    if (searchInput) searchInput.value = '';
                    if (clearBtn) clearBtn.classList.remove('active');
                    if (searchResults) searchResults.classList.remove('active');
                    
                    this.currentSearch = '';
                    this.isSearching = false;
                    
                    if (window.carrito) {
                        window.carrito.renderProducts();
                        this.updateSearchResultsMessage('', productos.length);
                    }
                }
            }
            
            darkenColor(color) {
                let r = parseInt(color.slice(1, 3), 16);
                let g = parseInt(color.slice(3, 5), 16);
                let b = parseInt(color.slice(5, 7), 16);
                
                r = Math.floor(r * 0.8);
                g = Math.floor(g * 0.8);
                b = Math.floor(b * 0.8);
                
                return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
            }
            
            isActive() {
                return this.isSearching;
            }
            
            getCurrentSearch() {
                return this.currentSearch;
            }
        }

        // ==================== VALIDADOR DE FECHAS DE ENTREGA ====================
        class ValidadorFechas {
            constructor() {
                this.initDatePicker();
            }

            initDatePicker() {
                const dateInput = document.getElementById('deliveryDate');
                if (!dateInput) return;

                const today = new Date();
                const yyyy = today.getFullYear();
                const mm = String(today.getMonth() + 1).padStart(2, '0');
                const dd = String(today.getDate()).padStart(2, '0');
                const todayStr = `${yyyy}-${mm}-${dd}`;

                dateInput.setAttribute('min', todayStr);

                dateInput.value = this.getNextValidDate(today);

                dateInput.addEventListener('change', (e) => {
                    this.validateDate(e.target, true);
                });
                dateInput.addEventListener('blur', (e) => {
                    if (e.target.value) {
                        this.validateDate(e.target, true);
                    }
                });

                document.getElementById('checkoutForm')?.addEventListener('submit', (e) => {
                    const isValid = this.validateDate(dateInput, true);
                    if (!isValid) {
                        e.preventDefault();
                        e.stopPropagation();
                        return false;
                    }
                });
            }

            validateDate(input, showErrors = false) {
                if (!input || !input.value) {
                    if (showErrors) this.showDateError(input, 'Por favor selecciona una fecha');
                    return false;
                }

                const selectedDate = new Date(input.value + 'T00:00:00');
                const today = new Date();
                today.setHours(0, 0, 0, 0);

                if (selectedDate.getTime() < today.getTime()) {
                    if (showErrors) this.showDateError(input, 'No puedes seleccionar una fecha pasada');
                    return false;
                }

                if (selectedDate.getDay() === 0) {
                    if (showErrors) this.showDateError(input, 'Los domingos no hay entregas. Elige otro día.');
                    return false;
                }

                this.clearDateError(input);
                this.updateDeliveryDaySelect(selectedDate);
                return true;
            }

            showDateError(input, message) {
                input.classList.add('error');

                let errorDiv = input.parentNode.querySelector('.date-error');
                if (!errorDiv) {
                    errorDiv = document.createElement('div');
                    errorDiv.className = 'date-error';
                    input.parentNode.appendChild(errorDiv);
                }

                errorDiv.textContent = message;

                const hint = input.parentNode.querySelector('.date-hint');
                if (hint) hint.style.color = '#cc3333';
            }

            clearDateError(input) {
                input.classList.remove('error');

                const errorDiv = input.parentNode.querySelector('.date-error');
                if (errorDiv) errorDiv.remove();

                const hint = input.parentNode.querySelector('.date-hint');
                if (hint) hint.style.color = '';
            }

            updateDeliveryDaySelect(date) {
                const select = document.getElementById('deliveryDay');
                if (!select) return;

                select.innerHTML = '<option value="">Selecciona un día</option>';

                const days = ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'];
                const dayName = days[date.getDay()];

                const option = document.createElement('option');
                option.value = dayName;
                option.textContent = `${dayName} ${date.toLocaleDateString()}`;
                option.selected = true;
                select.appendChild(option);
            }

            getNextValidDate(fromDate) {
                const date = new Date(fromDate);
                date.setHours(0, 0, 0, 0);

                if (date.getDay() === 0) {
                    date.setDate(date.getDate() + 1);
                }

                const yyyy = date.getFullYear();
                const mm = String(date.getMonth() + 1).padStart(2, '0');
                const dd = String(date.getDate()).padStart(2, '0');

                return `${yyyy}-${mm}-${dd}`;
            }
        }

        // ==================== SISTEMA DE CARRITO ====================
        class Carrito {
            constructor() {
                this.items = JSON.parse(localStorage.getItem('cartModaStyle')) || [];
                this.currentFilter = 'todo';
                this.FREE_SHIPPING_MINIMUM = generalConfig.shipping.freeMinimum;
                this.SHIPPING_COST = generalConfig.shipping.cost;
                this.cuponAplicado = null;
                this.couponTimers = [];
                
                document.body.style.overflow = 'auto';
                
                this.init();
            }
            
            init() {
                this.renderCartCount();
                this.setupEventListeners();
                this.renderProducts();
                this.renderCategories();
                this.renderCategoryFilters();
                this.updateCartButtons();
                
                new VersionManager();
                window.buscador = new Buscador();
                
                this.updateSectionCategories();
                this.cargarCupones();
                
                if (window.admin) {
                    window.admin.renderBanners();
                    window.admin.renderDeliveryPoints();
                    window.admin.renderDeliveryTimes();
                    window.admin.cargarTransferencia();
                    window.admin.cargarConfiguracionGeneral();
                }

                window.validadorFechas = new ValidadorFechas();
            }
            
            cargarCupones() {
                const usados = localStorage.getItem('modastyle_cupones_usados');
                if (usados) {
                    try {
                        cuponesUsados = JSON.parse(usados);
                    } catch (e) {}
                }
                
                const expirados = localStorage.getItem('modastyle_cupones_expirados');
                if (expirados) {
                    try {
                        cuponesExpirados = JSON.parse(expirados);
                    } catch (e) {}
                }
                
                cuponesDisponibles.forEach(cupon => {
                    if (cuponesUsados.includes(cupon.id)) {
                        cupon.usado = true;
                    }
                    if (cuponesExpirados.includes(cupon.id)) {
                        cupon.expirado = true;
                    }
                });
                
                this.verificarExpiracionCupones();
                this.renderCouponsInCart();
                this.startCouponTimers();
            }
            
            verificarExpiracionCupones() {
                const ahora = new Date().getTime();
                let cambios = false;
                
                cuponesDisponibles.forEach(cupon => {
                    if (cupon.fechaExpiracion && !cupon.usado && !cupon.expirado) {
                        const fechaExpiracion = new Date(cupon.fechaExpiracion).getTime();
                        
                        if (ahora >= fechaExpiracion) {
                            cupon.expirado = true;
                            
                            if (!cuponesExpirados.includes(cupon.id)) {
                                cuponesExpirados.push(cupon.id);
                                localStorage.setItem('modastyle_cupones_expirados', JSON.stringify(cuponesExpirados));
                            }
                            
                            if (this.cuponAplicado && this.cuponAplicado.id === cupon.id) {
                                this.cuponAplicado = null;
                            }
                            
                            cambios = true;
                        }
                    }
                });
                
                if (cambios) {
                    this.guardarCuponesEnStorage();
                }
            }
            
            startCouponTimers() {
                this.couponTimers.forEach(timer => clearInterval(timer));
                this.couponTimers = [];
                
                cuponesDisponibles.forEach(cupon => {
                    if (cupon.fechaExpiracion && !cupon.usado && !cupon.expirado) {
                        const timer = setInterval(() => {
                            this.actualizarTimerCupon(cupon.id);
                        }, 1000);
                        
                        this.couponTimers.push(timer);
                    }
                });
            }
            
            actualizarTimerCupon(cuponId) {
                const cupon = cuponesDisponibles.find(c => c.id === cuponId);
                if (!cupon || cupon.usado || cupon.expirado || !cupon.fechaExpiracion) return;
                
                const ahora = new Date().getTime();
                const fechaExpiracion = new Date(cupon.fechaExpiracion).getTime();
                const diferencia = fechaExpiracion - ahora;
                
                if (diferencia <= 0) {
                    cupon.expirado = true;
                    if (!cuponesExpirados.includes(cupon.id)) {
                        cuponesExpirados.push(cupon.id);
                        localStorage.setItem('modastyle_cupones_expirados', JSON.stringify(cuponesExpirados));
                    }
                    
                    if (this.cuponAplicado && this.cuponAplicado.id === cupon.id) {
                        this.cuponAplicado = null;
                    }
                    
                    this.guardarCuponesEnStorage();
                    this.renderCouponsInCart();
                    this.updateCartSummary();
                    return;
                }
                
                this.updateCouponTimerHTML(cupon, diferencia);
            }
            
            updateCouponTimerHTML(cupon, diferenciaMs) {
                const cuponElement = document.querySelector(`.coupon-item[data-coupon-id="${cupon.id}"]`);
                if (!cuponElement) return;
                
                const timerElement = cuponElement.querySelector('.coupon-timer');
                if (!timerElement) return;
                
                const dias = Math.floor(diferenciaMs / (1000 * 60 * 60 * 24));
                const horas = Math.floor((diferenciaMs % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutos = Math.floor((diferenciaMs % (1000 * 60 * 60)) / (1000 * 60));
                const segundos = Math.floor((diferenciaMs % (1000 * 60)) / 1000);
                
                if (dias > 0) {
                    timerElement.innerHTML = `<i class="fas fa-hourglass-half"></i> <span class="timer-numbers">${dias}d ${horas}h ${minutos}m</span>`;
                } else if (horas > 0) {
                    timerElement.innerHTML = `<i class="fas fa-hourglass-half"></i> <span class="timer-numbers">${horas}h ${minutos}m ${segundos}s</span>`;
                } else {
                    timerElement.innerHTML = `<i class="fas fa-hourglass-end"></i> <span class="timer-numbers">${minutos}m ${segundos}s</span>`;
                }
            }
            
            obtenerTiempoRestante(fechaExpiracion) {
                const ahora = new Date().getTime();
                const expiracion = new Date(fechaExpiracion).getTime();
                const diferencia = expiracion - ahora;
                
                if (diferencia <= 0) {
                    return null;
                }
                
                const dias = Math.floor(diferencia / (1000 * 60 * 60 * 24));
                const horas = Math.floor((diferencia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutos = Math.floor((diferencia % (1000 * 60 * 60)) / (1000 * 60));
                const segundos = Math.floor((diferencia % (1000 * 60)) / 1000);
                
                return { dias, horas, minutos, segundos };
            }
            
            renderCouponsInCart() {
                const couponSection = document.getElementById('couponSection');
                const couponGrid = document.getElementById('couponGrid');
                
                this.verificarExpiracionCupones();
                
                const cuponesActivos = cuponesDisponibles.filter(c => !c.usado && !c.expirado);
                
                if (cuponesActivos.length === 0) {
                    couponSection.style.display = 'none';
                    return;
                }
                
                couponSection.style.display = 'block';
                
                couponGrid.innerHTML = cuponesActivos.map(cupon => {
                    let bgColor = cupon.color || '#10b981';
                    let icono = cupon.icono || 'fa-ticket-alt';
                    
                    let timerHTML = '';
                    if (cupon.fechaExpiracion) {
                        const tiempo = this.obtenerTiempoRestante(cupon.fechaExpiracion);
                        if (tiempo) {
                            if (tiempo.dias > 0) {
                                timerHTML = `<div class="coupon-timer"><i class="fas fa-hourglass-half"></i> <span class="timer-numbers">${tiempo.dias}d ${tiempo.horas}h ${tiempo.minutos}m</span></div>`;
                            } else if (tiempo.horas > 0) {
                                timerHTML = `<div class="coupon-timer"><i class="fas fa-hourglass-half"></i> <span class="timer-numbers">${tiempo.horas}h ${tiempo.minutos}m ${tiempo.segundos}s</span></div>`;
                            } else {
                                timerHTML = `<div class="coupon-timer"><i class="fas fa-hourglass-end"></i> <span class="timer-numbers">${tiempo.minutos}m ${tiempo.segundos}s</span></div>`;
                            }
                        } else {
                            cupon.expirado = true;
                            if (!cuponesExpirados.includes(cupon.id)) {
                                cuponesExpirados.push(cupon.id);
                                localStorage.setItem('modastyle_cupones_expirados', JSON.stringify(cuponesExpirados));
                            }
                            return '';
                        }
                    }
                    
                    return `
                        <div class="coupon-item" data-coupon-id="${cupon.id}" onclick="carrito.aplicarCupon('${cupon.id}')" style="border-color: ${bgColor}; background: linear-gradient(135deg, ${bgColor}15, ${bgColor}05);">
                            <div class="coupon-icon" style="background: ${bgColor}; color: white;">
                                <i class="fas ${icono}"></i>
                            </div>
                            <div class="coupon-info">
                                <div class="coupon-code" style="color: ${bgColor};">
                                    ${cupon.codigo}
                                </div>
                                <div class="coupon-description">
                                    ${cupon.descripcion}
                                </div>
                                ${timerHTML}
                            </div>
                        </div>
                    `;
                }).join('');
                
                this.guardarCuponesEnStorage();
            }
            
            aplicarCupon(cuponId) {
                const cupon = cuponesDisponibles.find(c => c.id === cuponId);
                
                if (!cupon) {
                    alert('Este cupón no existe');
                    return;
                }
                
                if (cupon.usado) {
                    alert('Este cupón ya ha sido usado');
                    return;
                }
                
                if (cupon.expirado) {
                    alert('Este cupón ha expirado');
                    return;
                }
                
                if (cupon.fechaExpiracion) {
                    const ahora = new Date().getTime();
                    const fechaExpiracion = new Date(cupon.fechaExpiracion).getTime();
                    
                    if (ahora >= fechaExpiracion) {
                        cupon.expirado = true;
                        if (!cuponesExpirados.includes(cupon.id)) {
                            cuponesExpirados.push(cupon.id);
                            localStorage.setItem('modastyle_cupones_expirados', JSON.stringify(cuponesExpirados));
                        }
                        this.guardarCuponesEnStorage();
                        this.renderCouponsInCart();
                        alert('Este cupón ha expirado');
                        return;
                    }
                }
                
                if (this.items.length === 0) {
                    alert('Agrega productos al carrito primero');
                    return;
                }
                
                const subtotal = this.calcularSubtotal();
                
                if (cupon.minimo && subtotal < cupon.minimo) {
                    alert(`Este cupón requiere un mínimo de compra de $${cupon.minimo}`);
                    return;
                }
                
                if (cupon.tipo === '2x1' || cupon.tipo === '3x2') {
                    const productosElegibles = this.items.filter(item => {
                        const producto = productos.find(p => p.id === item.productId);
                        if (!cupon.categoria) return true;
                        return producto && producto.categoria === cupon.categoria;
                    });
                    
                    if (productosElegibles.length < (cupon.tipo === '2x1' ? 2 : 3)) {
                        alert(`Necesitas al menos ${cupon.tipo === '2x1' ? '2' : '3'} productos elegibles para este cupón`);
                        return;
                    }
                }
                
                if (this.cuponAplicado) {
                    this.cuponAplicado = null;
                }
                
                this.cuponAplicado = cupon;
                
                this.renderCouponsInCart();
                this.renderCartItems();
                this.updateCartSummary();
                
                this.showNotification(`Cupón "${cupon.codigo}" aplicado correctamente`);
            }
            
            guardarCuponesEnStorage() {
                localStorage.setItem('modastyle_cupones', JSON.stringify(cuponesDisponibles));
            }
            
            renderCartCount() {
                const totalItems = this.items.reduce((sum, item) => sum + item.cantidad, 0);
                document.getElementById('cartCount').textContent = totalItems;
            }
            
            openCart() {
                document.getElementById('cartPanel').classList.add('open');
                document.getElementById('cartOverlay').classList.add('show');
                document.body.style.overflow = 'hidden';
                this.renderCartItems();
            }
            
            closeCart() {
                document.getElementById('cartPanel').classList.remove('open');
                document.getElementById('cartOverlay').classList.remove('show');
                document.body.style.overflow = 'auto';
            }
            
            setupEventListeners() {
                document.getElementById('cartIcon').addEventListener('click', () => this.openCart());
                document.getElementById('closeCart').addEventListener('click', () => this.closeCart());
                document.getElementById('cartOverlay').addEventListener('click', () => this.closeCart());
                document.getElementById('checkoutBtn').addEventListener('click', () => this.showCheckoutModal());
                document.getElementById('clearCartBtn').addEventListener('click', () => this.clearCart());
                
                document.getElementById('closeImageModal').addEventListener('click', () => this.closeImageModal());
                document.getElementById('prevImageBtn').addEventListener('click', () => this.navigateModalImage(-1));
                document.getElementById('nextImageBtn').addEventListener('click', () => this.navigateModalImage(1));
                document.getElementById('imageModal').addEventListener('click', (e) => {
                    if (e.target === document.getElementById('imageModal')) {
                        this.closeImageModal();
                    }
                });
                
                document.getElementById('closeModal').addEventListener('click', () => this.closeCheckoutModal());
                document.getElementById('cancelCheckout').addEventListener('click', () => this.closeCheckoutModal());
                document.getElementById('checkoutForm').addEventListener('submit', (e) => this.submitOrder(e));
                
                document.querySelectorAll('.payment-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('selected'));
                        e.currentTarget.classList.add('selected');
                        
                        const transferInfo = document.getElementById('transferInfo');
                        transferInfo.classList.toggle('show', e.currentTarget.querySelector('input').value === 'transferencia');
                    });
                });
                
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape') {
                        if (document.getElementById('cartPanel').classList.contains('open')) this.closeCart();
                        if (document.getElementById('checkoutModal').classList.contains('active')) this.closeCheckoutModal();
                        if (document.getElementById('imageModal').classList.contains('active')) this.closeImageModal();
                    }
                });
            }
            
            renderCartItems() {
                const cartItems = document.getElementById('cartItems');
                const emptyCart = document.getElementById('emptyCart');
                const cartSummary = document.getElementById('cartSummary');
                const cartActions = document.getElementById('cartActions');
                const freeShippingPromo = document.getElementById('freeShippingPromo');
                
                if (this.items.length === 0) {
                    cartItems.innerHTML = '';
                    emptyCart.style.display = 'block';
                    cartSummary.style.display = 'none';
                    cartSummary.classList.remove('show');
                    cartActions.classList.add('disabled');
                    freeShippingPromo.style.display = 'none';
                    return;
                }
                
                emptyCart.style.display = 'none';
                cartSummary.style.display = 'block';
                cartSummary.classList.add('show');
                cartActions.classList.remove('disabled');
                
                cartItems.innerHTML = this.items.map((item, index) => {
                    const product = productos.find(p => p.id === item.productId);
                    if (!product) return '';
                    
                    const subtotal = parseFloat(item.precio.replace('$', '')) * item.cantidad;
                    const variantesText = item.variantes.map(v => `${v.nombre}: ${v.valor}`).join(' | ');
                    
                    return `
                        <div class="cart-item">
                            <img src="${product.imagen}" alt="${product.nombre}" class="cart-item-image" onclick="carrito.openImageModal('${product.imagen}', '${product.nombre}')">
                            <div class="cart-item-details">
                                <div class="cart-item-info">
                                    <div class="cart-item-title">${product.nombre}</div>
                                    <div class="cart-item-variant">
                                        <i class="fas fa-tag"></i>
                                        ${variantesText}
                                    </div>
                                    <div class="cart-item-price">${item.precio}</div>
                                </div>
                                
                                <div class="cart-item-actions">
                                    <div class="quantity-control">
                                        <button class="quantity-btn" onclick="carrito.updateQuantity(${index}, -1)" ${item.cantidad <= 1 ? 'disabled' : ''}>
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <span class="quantity-value">${item.cantidad}</span>
                                        <button class="quantity-btn" onclick="carrito.updateQuantity(${index}, 1)">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                    <button class="remove-item" onclick="carrito.removeItem(${index})">
                                        <i class="fas fa-trash"></i>
                                        Eliminar
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                this.updateCartSummary();
                this.renderCouponsInCart();
            }
            
            calcularSubtotal() {
                return this.items.reduce((sum, item) => {
                    return sum + (parseFloat(item.precio.replace('$', '')) * item.cantidad);
                }, 0);
            }
            
            updateQuantity(index, change) {
                const item = this.items[index];
                const newQuantity = item.cantidad + change;
                
                if (newQuantity < 1) {
                    this.removeItem(index);
                    return;
                }
                
                const product = productos.find(p => p.id === item.productId);
                if (product) {
                    const variantKey = item.variantes.map(v => v.valor).join('|');
                    const stock = product.stock[variantKey] || 0;
                    
                    if (newQuantity > stock) {
                        alert(`Solo hay ${stock} unidades disponibles`);
                        return;
                    }
                }
                
                item.cantidad = newQuantity;
                this.saveCart();
                this.renderCartItems();
                this.renderCartCount();
                this.updateCartButtons();
            }
            
            removeItem(index) {
                this.items.splice(index, 1);
                this.saveCart();
                this.renderCartItems();
                this.renderCartCount();
                this.updateCartButtons();
                
                if (this.items.length === 0 && this.cuponAplicado) {
                    this.cuponAplicado = null;
                    this.renderCouponsInCart();
                }
            }
            
            updateCartSummary() {
                const subtotal = this.calcularSubtotal();
                
                let descuento = 0;
                if (this.cuponAplicado) {
                    descuento = this.calcularDescuento(subtotal);
                }
                
                const subtotalConDescuento = subtotal - descuento;
                
                let shipping = this.SHIPPING_COST;
                
                if (this.cuponAplicado && this.cuponAplicado.tipo === 'envio') {
                    shipping = 0;
                } else {
                    shipping = subtotalConDescuento >= this.FREE_SHIPPING_MINIMUM ? 0 : this.SHIPPING_COST;
                }
                
                const total = subtotalConDescuento + shipping;
                
                document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;
                document.getElementById('shipping').textContent = shipping === 0 ? 'Gratis' : `$${shipping.toFixed(2)}`;
                document.getElementById('total').textContent = `$${total.toFixed(2)}`;
                
                const appliedCouponRow = document.getElementById('appliedCouponRow');
                if (this.cuponAplicado && descuento > 0) {
                    appliedCouponRow.style.display = 'flex';
                    document.getElementById('appliedCouponCode').textContent = this.cuponAplicado.codigo;
                    document.getElementById('appliedCouponDiscount').textContent = `-$${descuento.toFixed(2)}`;
                } else if (this.cuponAplicado && this.cuponAplicado.tipo === 'envio') {
                    appliedCouponRow.style.display = 'flex';
                    document.getElementById('appliedCouponCode').textContent = this.cuponAplicado.codigo;
                    document.getElementById('appliedCouponDiscount').textContent = 'Envío gratis';
                } else {
                    appliedCouponRow.style.display = 'none';
                }
                
                const freeShippingPromo = document.getElementById('freeShippingPromo');
                if (this.items.length > 0 && subtotal < this.FREE_SHIPPING_MINIMUM) {
                    const remaining = this.FREE_SHIPPING_MINIMUM - subtotal;
                    const progress = (subtotal / this.FREE_SHIPPING_MINIMUM) * 100;
                    
                    document.getElementById('remainingAmount').textContent = `$${remaining.toFixed(2)}`;
                    document.getElementById('shippingProgress').style.width = `${progress}%`;
                    freeShippingPromo.classList.add('show');
                    freeShippingPromo.style.display = 'block';
                    
                    document.getElementById('shippingBadgeAmount').textContent = `+$${this.FREE_SHIPPING_MINIMUM}`;
                } else {
                    freeShippingPromo.classList.remove('show');
                    freeShippingPromo.style.display = 'none';
                    
                    if (this.FREE_SHIPPING_MINIMUM > 0) {
                        document.getElementById('shippingBadgeAmount').textContent = `+$${this.FREE_SHIPPING_MINIMUM}`;
                    }
                }
            }
            
            calcularDescuento(subtotal) {
                if (!this.cuponAplicado) return 0;
                
                const cupon = this.cuponAplicado;
                
                switch (cupon.tipo) {
                    case 'envio':
                        return 0;
                    case 'porcentaje':
                        return subtotal * (cupon.valor / 100);
                    case 'fijo':
                        return Math.min(cupon.valor, subtotal);
                    case '2x1':
                    case '3x2':
                        return this.calcularDescuentoPromocion(cupon);
                    default:
                        return 0;
                }
            }
            
            calcularDescuentoPromocion(cupon) {
                let elegibles = this.items.filter(item => {
                    const producto = productos.find(p => p.id === item.productId);
                    if (!cupon.categoria) return true;
                    return producto && producto.categoria === cupon.categoria;
                });
                
                if (elegibles.length === 0) return 0;
                
                elegibles.sort((a, b) => {
                    const precioA = parseFloat(a.precio.replace('$', ''));
                    const precioB = parseFloat(b.precio.replace('$', ''));
                    return precioA - precioB;
                });
                
                let descuento = 0;
                
                if (cupon.tipo === '2x1') {
                    const pares = Math.floor(elegibles.length / 2);
                    for (let i = 0; i < pares; i++) {
                        descuento += parseFloat(elegibles[i].precio.replace('$', ''));
                    }
                } else if (cupon.tipo === '3x2') {
                    const grupos = Math.floor(elegibles.length / 3);
                    for (let i = 0; i < grupos; i++) {
                        descuento += parseFloat(elegibles[i].precio.replace('$', ''));
                    }
                }
                
                return descuento;
            }
            
            addToCart(productId, variantes, precio) {
                const variantKey = variantes.map(v => v.valor).join('|');
                
                const existingItem = this.items.find(item => 
                    item.productId === productId && 
                    JSON.stringify(item.variantes) === JSON.stringify(variantes)
                );
                
                if (existingItem) {
                    this.updateQuantity(this.items.indexOf(existingItem), 1);
                } else {
                    this.items.push({
                        productId: productId,
                        variantes: variantes,
                        precio: precio,
                        cantidad: 1
                    });
                    this.saveCart();
                    this.renderCartCount();
                    this.renderCartItems();
                    this.updateCartButtons();
                    
                    this.showNotification('Producto agregado al carrito');
                }
            }
            
            clearCart() {
                window.confirmModal.show({
                    title: '¿Vaciar carrito?',
                    message: '¿Estás seguro de que quieres eliminar todos los productos de tu carrito?',
                    type: 'warning',
                    onConfirm: () => {
                        this.items = [];
                        
                        if (this.cuponAplicado) {
                            this.cuponAplicado = null;
                        }
                        
                        this.saveCart();
                        this.renderCartCount();
                        this.renderCartItems();
                        this.updateCartButtons();
                        this.renderCouponsInCart();
                    }
                });
            }
            
            saveCart() {
                localStorage.setItem('cartModaStyle', JSON.stringify(this.items));
            }
            
            updateCartButtons() {
                const hasItems = this.items.length > 0;
                document.getElementById('checkoutBtn').disabled = !hasItems;
                document.getElementById('clearCartBtn').disabled = !hasItems;
            }
            
            showNotification(message) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    bottom: 80px;
                    right: 20px;
                    background: linear-gradient(135deg, #8B5CF6, #6D28D9);
                    color: white;
                    padding: 12px 16px;
                    border-radius: var(--border-radius);
                    z-index: 9999;
                    box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
                    animation: slideInRight 0.3s ease;
                `;
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-check-circle"></i>
                        <span>${message}</span>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.animation = 'slideInRight 0.3s ease reverse forwards';
                    setTimeout(() => notification.remove(), 300);
                }, 2000);
            }

            showStockNotification(message) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    bottom: 80px;
                    right: 20px;
                    background: linear-gradient(135deg, var(--error), #b91c1c);
                    color: white;
                    padding: 12px 16px;
                    border-radius: var(--border-radius);
                    z-index: 9999;
                    box-shadow: var(--shadow-hover);
                    animation: slideInRight 0.3s ease;
                `;
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-exclamation-circle"></i>
                        <span>${message}</span>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.animation = 'slideInRight 0.3s ease reverse forwards';
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }
            
            openImageModal(imageSrc, title) {
                document.getElementById('modalImage').src = imageSrc;
                document.getElementById('modalImage').alt = title;
                document.getElementById('imageCounter').style.display = 'none';
                document.getElementById('prevImageBtn').style.display = 'none';
                document.getElementById('nextImageBtn').style.display = 'none';
                document.getElementById('imageModal').classList.add('active');
                document.body.style.overflow = 'hidden';
            }
            
            openImageModalWithGallery(productId, color, startIndex = 0) {
                const product = productos.find(p => p.id === productId);
                if (!product || !product.galeriaPorVariante) return;
                
                const colorLower = color.toLowerCase();
                let gallery = null;
                
                for (const [variantValue, g] of Object.entries(product.galeriaPorVariante)) {
                    if (variantValue.toLowerCase() === colorLower) {
                        gallery = g;
                        break;
                    }
                }
                
                if (!gallery || gallery.length === 0) return;
                
                const modalOverlay = document.getElementById('imageModal');
                const modalImg = document.getElementById('modalImage');
                const counter = document.getElementById('imageCounter');
                
                modalOverlay.dataset.gallery = JSON.stringify(gallery);
                modalOverlay.dataset.currentIndex = startIndex;
                modalOverlay.dataset.productId = productId;
                modalOverlay.dataset.color = color;
                
                modalImg.src = gallery[startIndex];
                modalImg.alt = `${product.nombre} - ${color}`;
                
                counter.style.display = 'block';
                counter.textContent = `${startIndex + 1} / ${gallery.length}`;
                
                const prevBtn = document.getElementById('prevImageBtn');
                const nextBtn = document.getElementById('nextImageBtn');
                prevBtn.style.display = 'block';
                nextBtn.style.display = 'block';
                
                modalOverlay.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
            
            navigateModalImage(direction) {
                const modalOverlay = document.getElementById('imageModal');
                const modalImg = document.getElementById('modalImage');
                const counter = document.getElementById('imageCounter');
                
                if (!modalOverlay.dataset.gallery) return;
                
                const gallery = JSON.parse(modalOverlay.dataset.gallery);
                let currentIndex = parseInt(modalOverlay.dataset.currentIndex) || 0;
                const newIndex = currentIndex + direction;
                
                if (newIndex >= 0 && newIndex < gallery.length) {
                    modalImg.src = gallery[newIndex];
                    modalOverlay.dataset.currentIndex = newIndex;
                    counter.textContent = `${newIndex + 1} / ${gallery.length}`;
                }
            }
            
            closeImageModal() {
                document.getElementById('imageModal').classList.remove('active');
                document.getElementById('imageCounter').style.display = 'none';
                document.getElementById('prevImageBtn').style.display = 'none';
                document.getElementById('nextImageBtn').style.display = 'none';
                document.body.style.overflow = 'auto';
            }
            
            showCheckoutModal() {
                if (this.items.length === 0) return;
                this.renderDeliveryOptions();
                this.renderDeliveryTimesSelect();
                this.renderTransferInfo();
                document.getElementById('checkoutModal').classList.add('active');
                document.body.style.overflow = 'hidden';
            }
            
            renderDeliveryOptions() {
                const container = document.getElementById('deliveryOptionsContainer');
                if (!container) return;
                
                container.innerHTML = deliveryConfig.points.map((point, index) => `
                    <label class="delivery-option ${index === 1 ? 'selected' : ''}" id="deliveryOption${point.id}">
                        <input type="radio" name="delivery" value="${point.id}" style="display: none;" ${index === 1 ? 'checked' : ''}>
                        <div class="delivery-info">
                            <div class="delivery-name">${point.name}</div>
                            <div class="delivery-address">${point.address}</div>
                            <a href="${point.map}" target="_blank" class="map-link">
                                <i class="fas fa-map-marker-alt"></i> Ver en Google Maps
                            </a>
                        </div>
                    </label>
                `).join('');
                
                document.querySelectorAll('.delivery-option').forEach(option => {
                    option.addEventListener('click', (e) => {
                        document.querySelectorAll('.delivery-option').forEach(o => o.classList.remove('selected'));
                        e.currentTarget.classList.add('selected');
                    });
                });
            }
            
            renderDeliveryTimesSelect() {
                const select = document.getElementById('deliveryTime');
                select.innerHTML = '<option value="">Selecciona un horario</option>' +
                    deliveryConfig.times.map(time => {
                        const displayTime = time.label || this.formatTimeToAMPM(time.value);
                        return `<option value="${time.value}">${displayTime}</option>`;
                    }).join('');
            }
            
            formatTimeToAMPM(time24) {
                if (!time24) return '';
                
                if (time24.includes('AM') || time24.includes('PM') || time24.includes('am') || time24.includes('pm')) {
                    return time24;
                }
                
                const [hours, minutes] = time24.split(':').map(Number);
                
                if (isNaN(hours) || isNaN(minutes)) return time24;
                
                const period = hours >= 12 ? 'PM' : 'AM';
                
                let hours12 = hours % 12;
                hours12 = hours12 === 0 ? 12 : hours12;
                
                const minutesStr = minutes.toString().padStart(2, '0');
                
                return `${hours12}:${minutesStr} ${period}`;
            }
            
            renderTransferInfo() {
                const details = document.getElementById('transferDetails');
                details.innerHTML = `
                    <div class="transfer-row">
                        <span class="transfer-label">Nombre:</span>
                        <span class="transfer-value">${deliveryConfig.transfer.nombre}</span>
                    </div>
                    <div class="transfer-row">
                        <span class="transfer-label">Banco:</span>
                        <span class="transfer-value">${deliveryConfig.transfer.banco}</span>
                    </div>
                    <div class="transfer-row">
                        <span class="transfer-label">CLABE:</span>
                        <span class="transfer-value">${deliveryConfig.transfer.clabe}</span>
                    </div>
                `;
            }
            
            closeCheckoutModal() {
                document.getElementById('checkoutModal').classList.remove('active');
                document.body.style.overflow = 'auto';
            }
            
            marcarCuponComoUsado() {
                if (this.cuponAplicado) {
                    const cupon = this.cuponAplicado;
                    
                    cupon.usado = true;
                    
                    const index = cuponesDisponibles.findIndex(c => c.id === cupon.id);
                    if (index !== -1) {
                        cuponesDisponibles[index].usado = true;
                    }
                    
                    if (!cuponesUsados.includes(cupon.id)) {
                        cuponesUsados.push(cupon.id);
                        localStorage.setItem('modastyle_cupones_usados', JSON.stringify(cuponesUsados));
                    }
                    
                    const cuponesActualizados = cuponesDisponibles.map(c => {
                        if (c.id === cupon.id) {
                            return { ...c, usado: true };
                        }
                        return c;
                    });
                    localStorage.setItem('modastyle_cupones', JSON.stringify(cuponesActualizados));
                    
                    this.cuponAplicado = null;
                    
                    this.renderCouponsInCart();
                }
            }
            
            submitOrder(e) {
                e.preventDefault();
                
                const name = document.getElementById('customerName').value;
                const phone = document.getElementById('customerPhone').value;
                
                const deliveryDateInput = document.getElementById('deliveryDate');
                let deliveryDay = '';
                let deliveryDateValue = '';
                
                if (deliveryDateInput && deliveryDateInput.value) {
                    deliveryDateValue = deliveryDateInput.value;
                    const date = new Date(deliveryDateValue + 'T00:00:00');
                    const days = ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'];
                    
                    if (date.getDay() === 0) {
                        alert('Los domingos no hay entregas. Por favor elige otro día.');
                        return;
                    }
                    
                    deliveryDay = `${days[date.getDay()]} ${date.toLocaleDateString()}`;
                } else {
                    deliveryDay = document.getElementById('deliveryDay').value;
                }
                
                const deliveryTime = document.getElementById('deliveryTime').value;
                const deliveryOption = document.querySelector('.delivery-option.selected input')?.value;
                const paymentMethod = document.querySelector('.payment-option.selected input')?.value;
                
                if (!name || !phone || !deliveryDay || !deliveryTime || !deliveryOption || !paymentMethod) {
                    alert('Por favor completa todos los campos');
                    return;
                }
                
                const orderId = 'MOD' + Date.now();
                const orderItems = this.items.map(item => {
                    const product = productos.find(p => p.id === item.productId);
                    return {
                        productId: item.productId,
                        nombre: product.nombre,
                        variantes: item.variantes,
                        cantidad: item.cantidad,
                        precio: item.precio
                    };
                });
                
                const subtotal = this.calcularSubtotal();
                const descuento = this.calcularDescuento(subtotal);
                const subtotalConDescuento = subtotal - descuento;
                let shipping = this.SHIPPING_COST;
                
                if (this.cuponAplicado && this.cuponAplicado.tipo === 'envio') {
                    shipping = 0;
                } else {
                    shipping = subtotalConDescuento >= this.FREE_SHIPPING_MINIMUM ? 0 : this.SHIPPING_COST;
                }
                
                const total = subtotalConDescuento + shipping;
                
                if (window.trackingSystem) {
                    const orderData = {
                        id: orderId,
                        fechaPedido: new Date().toISOString(),
                        fechaEntrega: deliveryDateValue,
                        horaEntrega: deliveryTime,
                        puntoEntrega: deliveryOption,
                        cliente: {
                            nombre: name,
                            telefono: phone
                        },
                        items: orderItems,
                        cupon: this.cuponAplicado ? this.cuponAplicado.codigo : null,
                        subtotal: subtotal,
                        descuento: descuento,
                        envio: shipping,
                        total: total
                    };
                    
                    window.trackingSystem.crearPedido(orderData);
                }
                
                let message = `*¡Hola ModaStyle! Quiero realizar un pedido*\n\n`;
                message += `*Información del cliente:*\n`;
                message += `👤 Nombre: ${name}\n`;
                message += `📞 Teléfono: ${phone}\n`;
                message += `📍 Punto de entrega: ${this.getDeliveryName(deliveryOption)}\n`;
                message += `🗺️ Enlace: ${this.getDeliveryMap(deliveryOption)}\n`;
                message += `📅 Día: ${deliveryDay}\n`;
                
                const timeOption = deliveryConfig.times.find(t => t.value === deliveryTime);
                const displayTime = timeOption ? (timeOption.label || this.formatTimeToAMPM(deliveryTime)) : deliveryTime;
                message += `🕐 Horario: ${displayTime}\n`;
                
                message += `💳 Pago: ${paymentMethod === 'efectivo' ? 'Efectivo' : 'Transferencia'}\n\n`;
                
                message += `*Detalles del pedido:*\n\n`;
                
                let totalWhatsApp = 0;
                this.items.forEach((item, index) => {
                    const product = productos.find(p => p.id === item.productId);
                    const price = parseFloat(item.precio.replace('$', ''));
                    const itemTotal = price * item.cantidad;
                    totalWhatsApp += itemTotal;
                    
                    message += `*${index + 1}. ${product.nombre}*\n`;
                    message += `📋 Variantes: ${item.variantes.map(v => `${v.nombre}: ${v.valor}`).join(', ')}\n`;
                    message += `🔢 Cantidad: ${item.cantidad}\n`;
                    message += `💰 Precio: ${item.precio}\n`;
                    message += `💵 Subtotal: $${itemTotal.toFixed(2)}\n\n`;
                });
                
                const descuentoWhatsApp = this.calcularDescuento(totalWhatsApp);
                const totalConDescuentoWhatsApp = totalWhatsApp - descuentoWhatsApp;
                let shippingWhatsApp = this.SHIPPING_COST;
                
                if (this.cuponAplicado && this.cuponAplicado.tipo === 'envio') {
                    shippingWhatsApp = 0;
                } else {
                    shippingWhatsApp = totalConDescuentoWhatsApp >= this.FREE_SHIPPING_MINIMUM ? 0 : this.SHIPPING_COST;
                }
                
                const finalTotalWhatsApp = totalConDescuentoWhatsApp + shippingWhatsApp;
                
                message += `*Resumen:*\n`;
                message += `📦 Subtotal: $${totalWhatsApp.toFixed(2)}\n`;
                
                if (descuentoWhatsApp > 0) {
                    message += `🎟️ Cupón (${this.cuponAplicado.codigo}): -$${descuentoWhatsApp.toFixed(2)}\n`;
                }
                
                if (this.cuponAplicado && this.cuponAplicado.tipo === 'envio') {
                    message += `🎟️ Cupón (${this.cuponAplicado.codigo}): Envío gratis\n`;
                }
                
                message += `🚚 Envío: ${shippingWhatsApp === 0 ? 'Gratis' : '$' + shippingWhatsApp.toFixed(2)}\n`;
                message += `*💰 Total: $${finalTotalWhatsApp.toFixed(2)}*\n\n`;
                message += `*Número de seguimiento:* ${orderId}\n\n`;
                
                if (paymentMethod === 'transferencia') {
                    message += `*Datos de transferencia:*\n`;
                    message += `🏦 Banco: ${deliveryConfig.transfer.banco}\n`;
                    message += `🔢 CLABE: ${deliveryConfig.transfer.clabe}\n`;
                    message += `👤 Nombre: ${deliveryConfig.transfer.nombre}\n\n`;
                }
                
                message += `¡Gracias! 😊`;
                
                const encodedMessage = encodeURIComponent(message);
                const whatsappNumber = generalConfig.contact.whatsapp || "5567416073";
                const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;
                
                window.open(whatsappUrl, '_blank');
                
                this.marcarCuponComoUsado();
                
                this.clearCart();
                this.closeCheckoutModal();
                this.closeCart();
            }
            
            getDeliveryName(option) {
                const point = deliveryConfig.points.find(p => p.id === option);
                return point ? point.name : option;
            }
            
            getDeliveryMap(option) {
                const point = deliveryConfig.points.find(p => p.id === option);
                return point ? point.map : '#';
            }
            
            getProductGallery(product, selectedColor) {
                if (!product.galeriaPorVariante) return null;
                
                if (selectedColor) {
                    const colorLower = selectedColor.toLowerCase();
                    for (const [variantValue, gallery] of Object.entries(product.galeriaPorVariante)) {
                        if (variantValue.toLowerCase() === colorLower) {
                            return gallery;
                        }
                    }
                }
                
                const allImages = new Set();
                allImages.add(product.imagen);
                
                Object.values(product.galeriaPorVariante).forEach(gallery => {
                    gallery.forEach(img => allImages.add(img));
                });
                
                return Array.from(allImages);
            }
            
            navigateCarousel(productCard, direction) {
                const carouselContainer = productCard.querySelector('.carousel-container');
                if (!carouselContainer) return;
                
                const images = carouselContainer.querySelectorAll('.carousel-image');
                const currentIndex = parseInt(carouselContainer.dataset.currentIndex || '0');
                const newIndex = (currentIndex + direction + images.length) % images.length;
                
                images.forEach(img => img.classList.remove('active'));
                images[newIndex].classList.add('active');
                carouselContainer.dataset.currentIndex = newIndex;
                
                const indicators = productCard.querySelectorAll('.indicator-dot');
                indicators.forEach((dot, idx) => {
                    dot.classList.toggle('active', idx === newIndex);
                });

                const fullscreenBtn = productCard.querySelector('.view-fullscreen-btn');
                if (fullscreenBtn) {
                    const productId = productCard.dataset.productId;
                    const product = productos.find(p => p.id == productId);
                    
                    let selectedColor = null;
                    const colorVariant = productCard.querySelector('.variant-selector[data-variant-name="Color"]');
                    if (colorVariant) {
                        const selectedBtn = colorVariant.querySelector('.variant-btn.selected');
                        if (selectedBtn) {
                            selectedColor = selectedBtn.dataset.value;
                        }
                    }

                    if (selectedColor && product && product.galeriaPorVariante) {
                        fullscreenBtn.setAttribute('onclick', `event.stopPropagation(); carrito.openImageModalWithGallery(${productId}, '${selectedColor}', ${newIndex})`);
                    } else {
                        const currentImageSrc = images[newIndex].src;
                        fullscreenBtn.setAttribute('onclick', `event.stopPropagation(); carrito.openImageModal('${currentImageSrc}', '${product ? product.nombre : ''}')`);
                    }
                }
            }
            
            updateCarouselForColor(productCard, color, product) {
                if (!product || !product.galeriaPorVariante) return;
                
                const carouselContainer = productCard.querySelector('.carousel-container');
                if (!carouselContainer) return;
                
                const colorLower = color.toLowerCase();
                let gallery = null;
                
                for (const [variantValue, g] of Object.entries(product.galeriaPorVariante)) {
                    if (variantValue.toLowerCase() === colorLower) {
                        gallery = g;
                        break;
                    }
                }
                
                if (!gallery || gallery.length === 0) return;
                
                const imagesHTML = gallery.map((imgUrl, idx) => `
                    <img src="${imgUrl}" alt="${product.nombre} - ${color}" class="carousel-image ${idx === 0 ? 'active' : ''}">
                `).join('');
                
                const indicatorsHTML = gallery.map((_, idx) => `
                    <span class="indicator-dot ${idx === 0 ? 'active' : ''}" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), ${idx} - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                `).join('');
                
                carouselContainer.innerHTML = imagesHTML;
                carouselContainer.dataset.currentIndex = '0';
                carouselContainer.dataset.gallery = JSON.stringify(gallery);
                
                const fullscreenBtn = productCard.querySelector('.view-fullscreen-btn');
                if (fullscreenBtn) {
                    fullscreenBtn.setAttribute('onclick', `event.stopPropagation(); carrito.openImageModalWithGallery(${product.id}, '${color}', 0)`);
                }
                
                const indicatorsContainer = productCard.querySelector('.carousel-indicators');
                if (indicatorsContainer) {
                    indicatorsContainer.innerHTML = indicatorsHTML;
                }
            }
            
            restoreOriginalCarousel(productCard, product) {
                if (!product) {
                    const productId = parseInt(productCard.dataset.productId);
                    product = productos.find(p => p.id === productId);
                }
                
                if (!product) return;
                
                let carouselImages = [];
                if (product.galeriaPorVariante && Object.keys(product.galeriaPorVariante).length > 0) {
                    const allImages = new Set();
                    allImages.add(product.imagen);
                    Object.values(product.galeriaPorVariante).forEach(gallery => {
                        gallery.forEach(img => allImages.add(img));
                    });
                    carouselImages = Array.from(allImages);
                } else {
                    carouselImages = [product.imagen];
                }
                
                const carouselContainer = productCard.querySelector('.carousel-container');
                const imagesHTML = carouselImages.map((imgUrl, idx) => `
                    <img src="${imgUrl}" alt="${product.nombre}" class="carousel-image ${idx === 0 ? 'active' : ''}">
                `).join('');
                
                carouselContainer.innerHTML = imagesHTML;
                carouselContainer.dataset.currentIndex = '0';
                carouselContainer.dataset.gallery = JSON.stringify(carouselImages);
                
                const fullscreenBtn = productCard.querySelector('.view-fullscreen-btn');
                if (fullscreenBtn) {
                    fullscreenBtn.setAttribute('onclick', `event.stopPropagation(); carrito.openImageModal('${product.imagen}', '${product.nombre}')`);
                }
                
                const indicatorsContainer = productCard.querySelector('.carousel-indicators');
                if (indicatorsContainer && carouselImages.length > 1) {
                    const indicatorsHTML = carouselImages.map((_, idx) => `
                        <span class="indicator-dot ${idx === 0 ? 'active' : ''}" 
                              onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), ${idx} - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                    `).join('');
                    indicatorsContainer.innerHTML = indicatorsHTML;
                }
            }
            
            resetAllProductCarousels(currentProductCard = null) {
                document.querySelectorAll('.product-card').forEach(card => {
                    if (currentProductCard && card === currentProductCard) return;
                    
                    const productId = parseInt(card.dataset.productId);
                    const product = productos.find(p => p.id === productId);
                    if (!product) return;
                    
                    const colorVariant = card.querySelector('.variant-selector[data-variant-name="Color"]');
                    if (colorVariant) {
                        const selectedColor = colorVariant.querySelector('.variant-btn.selected');
                        if (selectedColor) {
                            selectedColor.classList.remove('selected');
                        }
                    }
                    
                    this.restoreOriginalCarousel(card, product);
                    this.updateAddToCartButton(card);
                });
            }
            
            getSelectedVariants(productCard) {
                const productId = parseInt(productCard.dataset.productId);
                const product = productos.find(p => p.id === productId);
                if (!product) return [];
                
                return product.variantes
                    .filter(variant => {
                        const variantContainer = productCard.querySelector(`.variant-selector[data-variant-name="${variant.nombre}"]`);
                        if (!variantContainer) return false;
                        return variantContainer.querySelector('.variant-btn.selected') !== null;
                    })
                    .map(variant => {
                        const variantContainer = productCard.querySelector(`.variant-selector[data-variant-name="${variant.nombre}"]`);
                        const selectedBtn = variantContainer.querySelector('.variant-btn.selected');
                        
                        return {
                            nombre: variant.nombre,
                            valor: selectedBtn.dataset.value,
                            required: variant.required
                        };
                    });
            }
            
            handleAddToCart(productId) {
                const productCard = document.querySelector(`.product-card[data-product-id="${productId}"]`);
                if (!productCard) return;
                
                const product = productos.find(p => p.id === productId);
                if (!product) return;
                
                const selectedVariants = this.getSelectedVariants(productCard);
                
                const missingRequired = product.variantes.filter(v => 
                    v.required && !selectedVariants.some(sv => sv.nombre === v.nombre)
                );
                
                if (missingRequired.length > 0) {
                    alert(`Por favor selecciona: ${missingRequired.map(v => v.nombre).join(', ')}`);
                    return;
                }
                
                const variantKey = selectedVariants.map(v => v.valor).join('|');
                const stock = product.stock[variantKey] || 0;
                
                if (stock <= 0) {
                    this.showStockNotification('Producto sin stock disponible');
                    return;
                }
                
                const cartItem = this.items.find(item => 
                    item.productId === productId && 
                    JSON.stringify(item.variantes) === JSON.stringify(selectedVariants)
                );
                
                if (cartItem && cartItem.cantidad >= stock) {
                    this.showStockNotification(`Solo hay ${stock} unidades disponibles`);
                    return;
                }
                
                const precio = product.precioDescuento || product.precioRegular;
                this.addToCart(productId, selectedVariants, precio);
            }
            
            updateAddToCartButton(productCard) {
                const productId = parseInt(productCard.dataset.productId);
                const product = productos.find(p => p.id === productId);
                if (!product) return;
                
                const addToCartBtn = productCard.querySelector('.add-to-cart-btn');
                
                const allRequiredSelected = product.variantes.every(variant => {
                    if (!variant.required) return true;
                    const variantContainer = productCard.querySelector(`.variant-selector[data-variant-name="${variant.nombre}"]`);
                    if (!variantContainer) return false;
                    return variantContainer.querySelector('.variant-btn.selected') !== null;
                });
                
                if (allRequiredSelected) {
                    addToCartBtn.disabled = false;
                    
                    const selectedVariants = this.getSelectedVariants(productCard);
                    const variantKey = selectedVariants.map(v => v.valor).join('|');
                    const stock = product.stock[variantKey] || 0;
                    
                    if (stock <= 0) {
                        addToCartBtn.disabled = true;
                        addToCartBtn.innerHTML = '<i class="fas fa-times"></i> AGOTADO';
                    } else {
                        addToCartBtn.innerHTML = '<i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO';
                    }
                } else {
                    addToCartBtn.disabled = true;
                    addToCartBtn.innerHTML = '<i class="fas fa-shopping-cart"></i> AGREGAR AL CARRITO';
                }
            }
            
            darkenColor(color) {
                let r = parseInt(color.slice(1, 3), 16);
                let g = parseInt(color.slice(3, 5), 16);
                let b = parseInt(color.slice(5, 7), 16);
                
                r = Math.floor(r * 0.8);
                g = Math.floor(g * 0.8);
                b = Math.floor(b * 0.8);
                
                return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
            }
            
            renderCategories() {
                this.updateSectionCategories();
            }
            
            updateSectionCategories() {
                const categoriesGrid = document.getElementById('categoriesGrid');
                document.querySelector('#categorias .section-title').textContent = sectionConfig.title;
                document.querySelector('#categorias .section-subtitle').textContent = sectionConfig.subtitle;
                
                const sortedCategories = [...sectionCategories].sort((a, b) => a.order - b.order);
                
                categoriesGrid.innerHTML = sortedCategories.map(categoria => {
                    return `
                        <div class="category-card" onclick="${categoria.action}">
                            <img src="${categoria.image}" alt="${categoria.name}" class="category-image">
                            <div class="category-overlay">
                                <h3 class="category-name">${categoria.name}</h3>
                                <p class="category-description">${categoria.description}</p>
                                <span class="category-badge" style="background: ${categoria.buttonColor}">Ver productos</span>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            renderCategoryFilters() {
                const filtersContainer = document.getElementById('categoryFilters');
                filtersContainer.innerHTML = categorias.map(categoria => {
                    const isActive = categoria.id === this.currentFilter;
                    return `
                        <button class="category-filter ${isActive ? 'active' : ''}" 
                                onclick="carrito.filterProducts('${categoria.id}')"
                                data-color="${categoria.color}">
                            ${categoria.nombre}
                        </button>
                    `;
                }).join('');
                
                this.updateFilterColors();
            }
            
            filterProducts(categoriaId) {
                if (window.buscador) window.buscador.clearSearch('header');
                
                this.currentFilter = categoriaId;
                
                document.querySelectorAll('.category-filter').forEach(filter => {
                    filter.classList.remove('active');
                });
                
                const activeFilter = document.querySelector(`.category-filter[onclick*="${categoriaId}"]`);
                if (activeFilter) activeFilter.classList.add('active');
                
                this.updateFilterColors();
                this.renderProducts();
                document.getElementById('productos').scrollIntoView({ behavior: 'smooth' });
            }
            
            updateFilterColors() {
                document.querySelectorAll('.category-filter.active').forEach(filter => {
                    const color = filter.getAttribute('data-color');
                    filter.style.background = color;
                    filter.style.color = 'white';
                    filter.style.borderColor = color;
                });
                
                document.querySelectorAll('.category-filter:not(.active)').forEach(filter => {
                    filter.style.background = '';
                    filter.style.color = '';
                    filter.style.borderColor = '';
                });
            }
            
            renderProducts() {
                if (window.buscador && window.buscador.isActive()) return;
                
                const productsGrid = document.getElementById('productsGrid');
                const filteredProducts = this.currentFilter === 'todo' 
                    ? productos 
                    : productos.filter(p => p.categoria === this.currentFilter);
                
                if (filteredProducts.length === 0) {
                    productsGrid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-light);">
                            <i class="fas fa-box-open" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.3;"></i>
                            <h3>No hay productos en esta categoría</h3>
                            <p>Prueba con otra categoría o vuelve más tarde</p>
                        </div>
                    `;
                    return;
                }
                
                productsGrid.innerHTML = filteredProducts.map((product, index) => {
                    const precio = product.precioDescuento || product.precioRegular;
                    const categoria = categorias.find(c => c.id === product.categoria);
                    const colorCategoria = categoria ? categoria.color : '#8B5CF6';
                    
                    let carouselImages = [];
                    if (product.galeriaPorVariante && Object.keys(product.galeriaPorVariante).length > 0) {
                        const allImages = new Set();
                        allImages.add(product.imagen);
                        Object.values(product.galeriaPorVariante).forEach(gallery => {
                            gallery.forEach(img => allImages.add(img));
                        });
                        carouselImages = Array.from(allImages);
                    } else {
                        carouselImages = [product.imagen];
                    }
                    
                    const carouselHTML = `
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery='${JSON.stringify(carouselImages)}'>
                                ${carouselImages.map((imgUrl, idx) => `
                                    <img src="${imgUrl}" alt="${product.nombre}" class="carousel-image ${idx === 0 ? 'active' : ''}">
                                `).join('')}
                            </div>
                            
                            ${carouselImages.length > 1 ? `
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    ${carouselImages.map((_, idx) => `
                                        <span class="indicator-dot ${idx === 0 ? 'active' : ''}" 
                                              onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), ${idx} - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    `).join('')}
                                </div>
                            ` : ''}
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('${product.imagen}', '${product.nombre}')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge ${product.estado}">${product.estado.toUpperCase()}</div>
                        </div>
                    `;
                    
                    return `
                        <div class="product-card" data-product-id="${product.id}" style="animation-delay: ${index * 0.05}s">
                            ${carouselHTML}
                            
                            <div class="product-info">
                                <div class="product-category" style="color: ${colorCategoria}">
                                    <i class="fas fa-tag"></i>
                                    ${product.subcategoria}
                                </div>
                                
                                <h3 class="product-title">${product.nombre}</h3>
                                
                                <div class="product-price-container">
                                    ${product.precioDescuento ? `
                                        <div class="sale-price-container">
                                            <div class="original-price">${product.precioRegular}</div>
                                            <div class="sale-price" style="color: ${colorCategoria}">${product.precioDescuento}</div>
                                            <div class="discount-badge">OFERTA</div>
                                        </div>
                                    ` : `
                                        <div class="regular-price">${product.precioRegular}</div>
                                    `}
                                </div>
                                
                                <p class="product-description">
                                    ${product.descripcion || 'Producto de alta calidad'}
                                </p>
                                
                                ${product.especificaciones && product.especificaciones.length > 0 ? `
                                    <div class="product-features">
                                        ${product.especificaciones.map(spec => `
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: ${colorCategoria}"></i>
                                                <span>${spec}</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                ` : ''}
                                
                                ${this.renderProductVariants(product, colorCategoria)}
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" 
                                            data-product-id="${product.id}"
                                            style="background: linear-gradient(135deg, ${colorCategoria}, ${this.darkenColor(colorCategoria)});"
                                            onclick="carrito.handleAddToCart(${product.id})">
                                        <i class="fas fa-shopping-cart"></i>
                                        AGREGAR AL CARRITO
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                setTimeout(() => {
                    document.querySelectorAll('.product-card').forEach(card => {
                        this.updateAddToCartButton(card);
                        
                        const fullscreenBtn = card.querySelector('.view-fullscreen-btn');
                        const carouselContainer = card.querySelector('.carousel-container');
                        if (fullscreenBtn && carouselContainer) {
                            const activeImg = carouselContainer.querySelector('.carousel-image.active');
                            if (activeImg) {
                                const productId = card.dataset.productId;
                                const product = productos.find(p => p.id == productId);
                                
                                let selectedColor = null;
                                const colorVariant = card.querySelector('.variant-selector[data-variant-name="Color"]');
                                if (colorVariant) {
                                    const selectedBtn = colorVariant.querySelector('.variant-btn.selected');
                                    if (selectedBtn) {
                                        selectedColor = selectedBtn.dataset.value;
                                    }
                                }
                                
                                if (selectedColor && product && product.galeriaPorVariante) {
                                    const currentIndex = parseInt(carouselContainer.dataset.currentIndex || '0');
                                    fullscreenBtn.setAttribute('onclick', `event.stopPropagation(); carrito.openImageModalWithGallery(${productId}, '${selectedColor}', ${currentIndex})`);
                                } else {
                                    fullscreenBtn.setAttribute('onclick', `event.stopPropagation(); carrito.openImageModal('${activeImg.src}', '${product ? product.nombre : ''}')`);
                                }
                            }
                        }
                        
                        const indicators = card.querySelectorAll('.indicator-dot');
                        indicators.forEach(dot => {
                            dot.addEventListener('click', (e) => {
                                e.stopPropagation();
                                const productCard = e.currentTarget.closest('.product-card');
                                const carouselContainer = productCard.querySelector('.carousel-container');
                                const targetIndex = Array.from(indicators).indexOf(e.currentTarget);
                                const currentIndex = parseInt(carouselContainer.dataset.currentIndex || '0');
                                const direction = targetIndex - currentIndex;
                                this.navigateCarousel(productCard, direction);
                            });
                        });
                    });
                }, 100);
            }
            
            renderFilteredProducts(filteredProducts) {
                const productsGrid = document.getElementById('productsGrid');
                
                if (filteredProducts.length === 0) {
                    productsGrid.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: var(--text-light);">
                            <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 15px; opacity: 0.3;"></i>
                            <h3>No se encontraron productos</h3>
                            <p>Prueba con otros términos de búsqueda</p>
                        </div>
                    `;
                    return;
                }
                
                productsGrid.innerHTML = filteredProducts.map((product, index) => {
                    const precio = product.precioDescuento || product.precioRegular;
                    const categoria = categorias.find(c => c.id === product.categoria);
                    const colorCategoria = categoria ? categoria.color : '#8B5CF6';
                    
                    let carouselImages = [];
                    if (product.galeriaPorVariante && Object.keys(product.galeriaPorVariante).length > 0) {
                        const allImages = new Set();
                        allImages.add(product.imagen);
                        Object.values(product.galeriaPorVariante).forEach(gallery => {
                            gallery.forEach(img => allImages.add(img));
                        });
                        carouselImages = Array.from(allImages);
                    } else {
                        carouselImages = [product.imagen];
                    }
                    
                    const carouselHTML = `
                        <div class="product-image-carousel">
                            <div class="carousel-container" data-current-index="0" data-gallery='${JSON.stringify(carouselImages)}'>
                                ${carouselImages.map((imgUrl, idx) => `
                                    <img src="${imgUrl}" alt="${product.nombre}" class="carousel-image ${idx === 0 ? 'active' : ''}">
                                `).join('')}
                            </div>
                            
                            ${carouselImages.length > 1 ? `
                                <div class="carousel-nav">
                                    <button class="carousel-btn prev-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), -1)">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="carousel-btn next-btn" onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), 1)">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                
                                <div class="carousel-indicators">
                                    ${carouselImages.map((_, idx) => `
                                        <span class="indicator-dot ${idx === 0 ? 'active' : ''}" 
                                              onclick="event.stopPropagation(); carrito.navigateCarousel(this.closest('.product-card'), ${idx} - parseInt(this.closest('.carousel-container').dataset.currentIndex || '0'))"></span>
                                    `).join('')}
                                </div>
                            ` : ''}
                            
                            <button class="view-fullscreen-btn" onclick="event.stopPropagation(); carrito.openImageModal('${product.imagen}', '${product.nombre}')" title="Ver en pantalla completa">
                                <i class="fas fa-expand"></i>
                            </button>
                            
                            <div class="product-badge ${product.estado}">${product.estado.toUpperCase()}</div>
                        </div>
                    `;
                    
                    return `
                        <div class="product-card" data-product-id="${product.id}" style="animation-delay: ${index * 0.05}s">
                            ${carouselHTML}
                            
                            <div class="product-info">
                                <div class="product-category" style="color: ${colorCategoria}">
                                    <i class="fas fa-tag"></i>
                                    ${product.subcategoria}
                                </div>
                                
                                <h3 class="product-title">${product.nombre}</h3>
                                
                                <div class="product-price-container">
                                    ${product.precioDescuento ? `
                                        <div class="sale-price-container">
                                            <div class="original-price">${product.precioRegular}</div>
                                            <div class="sale-price" style="color: ${colorCategoria}">${product.precioDescuento}</div>
                                            <div class="discount-badge">OFERTA</div>
                                        </div>
                                    ` : `
                                        <div class="regular-price">${product.precioRegular}</div>
                                    `}
                                </div>
                                
                                <p class="product-description">
                                    ${product.descripcion || 'Producto de alta calidad'}
                                </p>
                                
                                ${product.especificaciones && product.especificaciones.length > 0 ? `
                                    <div class="product-features">
                                        ${product.especificaciones.map(spec => `
                                            <div class="feature">
                                                <i class="fas fa-check" style="color: ${colorCategoria}"></i>
                                                <span>${spec}</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                ` : ''}
                                
                                ${this.renderProductVariants(product, colorCategoria)}
                                
                                <div class="product-actions">
                                    <button class="add-to-cart-btn" 
                                            data-product-id="${product.id}"
                                            style="background: linear-gradient(135deg, ${colorCategoria}, ${this.darkenColor(colorCategoria)});"
                                            onclick="carrito.handleAddToCart(${product.id})">
                                        <i class="fas fa-shopping-cart"></i>
                                        AGREGAR AL CARRITO
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                setTimeout(() => {
                    document.querySelectorAll('.product-card').forEach(card => {
                        this.updateAddToCartButton(card);
                        
                        const fullscreenBtn = card.querySelector('.view-fullscreen-btn');
                        const carouselContainer = card.querySelector('.carousel-container');
                        if (fullscreenBtn && carouselContainer) {
                            const activeImg = carouselContainer.querySelector('.carousel-image.active');
                            if (activeImg) {
                                const productId = card.dataset.productId;
                                const product = productos.find(p => p.id == productId);
                                
                                let selectedColor = null;
                                const colorVariant = card.querySelector('.variant-selector[data-variant-name="Color"]');
                                if (colorVariant) {
                                    const selectedBtn = colorVariant.querySelector('.variant-btn.selected');
                                    if (selectedBtn) {
                                        selectedColor = selectedBtn.dataset.value;
                                    }
                                }
                                
                                if (selectedColor && product && product.galeriaPorVariante) {
                                    const currentIndex = parseInt(carouselContainer.dataset.currentIndex || '0');
                                    fullscreenBtn.setAttribute('onclick', `event.stopPropagation(); carrito.openImageModalWithGallery(${productId}, '${selectedColor}', ${currentIndex})`);
                                } else {
                                    fullscreenBtn.setAttribute('onclick', `event.stopPropagation(); carrito.openImageModal('${activeImg.src}', '${product ? product.nombre : ''}')`);
                                }
                            }
                        }
                    });
                }, 100);
            }
            
            renderProductVariants(product, colorCategoria) {
                if (!product.variantes || product.variantes.length === 0) return '';
                
                return product.variantes.map(variant => {
                    if (variant.nombre.toLowerCase() === 'color') {
                        return `
                            <div class="variant-selector" data-variant-name="${variant.nombre}">
                                <div class="variant-label">${variant.nombre}:</div>
                                <div class="variant-options" style="display: flex; flex-wrap: wrap; gap: 8px;">
                                    ${variant.opciones.map(opcion => {
                                        const colorHex = this.getColorHex(opcion);
                                        return `
                                            <button class="variant-btn color-swatch" data-value="${opcion}" 
                                                    style="background-color: ${colorHex};"
                                                    title="${opcion}"
                                                    onclick="carrito.selectVariant(this, '${variant.nombre}', ${variant.required})">
                                            </button>
                                        `;
                                    }).join('')}
                                </div>
                            </div>
                        `;
                    } else {
                        return `
                            <div class="variant-selector" data-variant-name="${variant.nombre}">
                                <div class="variant-label">${variant.nombre}:</div>
                                <div class="variant-options">
                                    ${variant.opciones.map(opcion => `
                                        <button class="variant-btn" data-value="${opcion}" 
                                                style="border-color: ${colorCategoria}"
                                                onclick="carrito.selectVariant(this, '${variant.nombre}', ${variant.required})">
                                            ${opcion}
                                        </button>
                                    `).join('')}
                                </div>
                            </div>
                        `;
                    }
                }).join('');
            }
            
            getColorHex(colorName) {
                const colorMap = {
                    'negro': '#000000',
                    'azul marino': '#000080',
                    'blanco': '#FFFFFF',
                    'gris oscuro': '#404040',
                    'azul cielo': '#87CEEB',
                    'lila': '#C8A2C8',
                    'beg': '#F5F5DC',
                    'rosa': '#FFC0CB',
                    'gris': '#808080',
                    'verde pastel': '#C1E1C1',
                    'gris oxford': '#4A4A4A',
                    'azul rey': '#4169E1',
                    'cafe': '#6B4423',
                    'verde militar': '#4B5320',
                    'gris claro': '#D3D3D3',
                    'gris rata': '#7E7E7E',
                    'nude': '#E3BC9A',
                    'palo de rosa': '#C08081',
                    'verde agua': '#A7D8DE',
                    'verde pato': '#008080'
                };
                
                const lowerColor = colorName.toLowerCase();
                return colorMap[lowerColor] || '#CCCCCC';
            }
            
            selectVariant(button, variantName, required) {
                const productCard = button.closest('.product-card');
                const variantContainer = button.closest('.variant-selector');
                const productId = parseInt(productCard.dataset.productId);
                const product = productos.find(p => p.id === productId);
                
                this.resetAllProductCarousels(productCard);
                
                const isAlreadySelected = button.classList.contains('selected');
                
                if (isAlreadySelected && !required) {
                    button.classList.remove('selected');
                    if (variantName.toLowerCase() === 'color') {
                        this.restoreOriginalCarousel(productCard, product);
                    }
                } else {
                    variantContainer.querySelectorAll('.variant-btn').forEach(btn => {
                        btn.classList.remove('selected');
                    });
                    
                    button.classList.add('selected');
                    
                    if (variantName.toLowerCase() === 'color' && product && product.galeriaPorVariante) {
                        this.updateCarouselForColor(productCard, button.dataset.value, product);
                    }
                }
                
                this.updateAddToCartButton(productCard);
            }
            
            darkenColor(color) {
                let r = parseInt(color.slice(1, 3), 16);
                let g = parseInt(color.slice(3, 5), 16);
                let b = parseInt(color.slice(5, 7), 16);
                
                r = Math.floor(r * 0.8);
                g = Math.floor(g * 0.8);
                b = Math.floor(b * 0.8);
                
                return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
            }
        }

        // ==================== SISTEMA DE TRACKING CON NOTIFICACIONES INTELIGENTES ====================
        class TrackingSystem {
            constructor() {
                this.pedidos = JSON.parse(localStorage.getItem('modastyle_tracking_pedidos')) || [];
                this.timers = [];
                this.ordenesNotificadas = new Set();
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.verificarEstados();
                this.iniciarTimers();
                this.actualizarBotonTracking();
            }
            
            setupEventListeners() {
                const trackingIcon = document.getElementById('trackingIcon');
                const trackingPanel = document.getElementById('trackingPanel');
                const closeTracking = document.getElementById('closeTracking');
                
                if (trackingIcon) {
                    trackingIcon.addEventListener('click', () => this.openTrackingPanel());
                }
                
                if (closeTracking) {
                    closeTracking.addEventListener('click', () => this.closeTrackingPanel());
                }
                
                document.getElementById('closeReschedule')?.addEventListener('click', () => this.closeRescheduleModal());
                document.getElementById('cancelReschedule')?.addEventListener('click', () => this.closeRescheduleModal());
                document.getElementById('rescheduleForm')?.addEventListener('submit', (e) => this.guardarReagendamiento(e));
            }
            
            crearPedido(orderData) {
                const ahora = new Date();
                const fechaEntrega = new Date(orderData.fechaEntrega + 'T' + orderData.horaEntrega + ':00');
                
                const diasHastaEntrega = Math.ceil((fechaEntrega - ahora) / (1000 * 60 * 60 * 24));
                
                const notificaciones = this.calcularNotificacionesInteligentes(ahora, fechaEntrega, diasHastaEntrega);
                
                const nuevoPedido = {
                    id: orderData.id,
                    guia: 'MOD-' + orderData.id,
                    fechaPedido: ahora.toISOString(),
                    fechaEntrega: fechaEntrega.toISOString(),
                    horaEntrega: orderData.horaEntrega,
                    puntoEntrega: orderData.puntoEntrega,
                    cliente: orderData.cliente,
                    items: orderData.items,
                    cupon: orderData.cupon,
                    subtotal: orderData.subtotal,
                    descuento: orderData.descuento,
                    envio: orderData.envio,
                    total: orderData.total,
                    estado: 'pendiente',
                    notificaciones: notificaciones,
                    notificacionesEnviadas: [],
                    historial: [{
                        fecha: ahora.toISOString(),
                        estado: 'pendiente',
                        descripcion: '✅ Pedido recibido y en proceso de verificación',
                        tipo: 'inicial'
                    }]
                };
                
                this.pedidos.push(nuevoPedido);
                this.guardarPedidos();
                this.verificarEstados();
                this.actualizarBotonTracking();
                
                setTimeout(() => {
                    this.enviarNotificacionInteligente(nuevoPedido.id, 'inicial');
                }, 1000);
                
                return nuevoPedido;
            }
            
            calcularNotificacionesInteligentes(fechaPedido, fechaEntrega, diasHastaEntrega) {
                const notificaciones = [];
                
                const preparacion = new Date(fechaPedido);
                preparacion.setMinutes(preparacion.getMinutes() + 10);
                notificaciones.push({
                    tipo: 'preparacion',
                    fecha: preparacion.toISOString(),
                    mensaje: '🟡 ¡Buenas noticias! El vendedor ya confirmó tu pedido y está preparando los artículos para su envío...',
                    enviada: false
                });
                
                if (diasHastaEntrega > 1) {
                    const guia = new Date(fechaEntrega);
                    guia.setDate(guia.getDate() - 1);
                    guia.setHours(18, 0, 0, 0);
                    notificaciones.push({
                        tipo: 'guia',
                        fecha: guia.toISOString(),
                        mensaje: '🔵 Tu paquete ya está creado y listo para salir de nuestras instalaciones. Hemos generado la guía de rastreo.',
                        enviada: false
                    });
                }
                
                const enRuta = new Date(fechaEntrega);
                enRuta.setDate(enRuta.getDate() - 1);
                enRuta.setHours(18, 0, 0, 0);
                notificaciones.push({
                    tipo: 'en-ruta',
                    fecha: enRuta.toISOString(),
                    mensaje: '🟠 ¡Tu pedido ya está en camino! El repartidor está en ruta para entregarte hoy.',
                    enviada: false
                });
                
                const recordatorio = new Date(fechaEntrega);
                recordatorio.setHours(8, 0, 0, 0);
                notificaciones.push({
                    tipo: 'recordatorio',
                    fecha: recordatorio.toISOString(),
                    mensaje: '⏰ Tu paquete será entregado hoy. Por favor, asegúrate de que alguien pueda recibirlo y ten tu teléfono a mano.',
                    enviada: false
                });
                
                if (diasHastaEntrega <= 1) {
                    notificaciones.push({
                        tipo: 'entrega-mismo-dia',
                        fecha: fechaPedido,
                        mensaje: '⚡ ¡Entrega exprés! Tu pedido está programado para entregarse hoy mismo. Prepárate para recibirlo.',
                        enviada: false
                    });
                }
                
                return notificaciones;
            }
            
            verificarEstados() {
                const ahora = new Date();
                
                this.pedidos.forEach(pedido => {
                    if (pedido.estado === 'entregado' || pedido.estado === 'cancelado') return;
                    
                    const fechaEntrega = new Date(pedido.fechaEntrega);
                    
                    if (ahora > fechaEntrega) {
                        const horasPasadas = (ahora - fechaEntrega) / (1000 * 60 * 60);
                        const diasPasados = Math.floor(horasPasadas / 24);
                        
                        const yaRegistrado = pedido.historial.some(h => 
                            h.tipo === 'retraso' && 
                            new Date(h.fecha).toDateString() === ahora.toDateString()
                        );
                        
                        if (!yaRegistrado && pedido.estado !== 'entregado') {
                            pedido.historial.push({
                                fecha: ahora.toISOString(),
                                estado: 'en-ruta',
                                descripcion: `⏰ La fecha de entrega (${fechaEntrega.toLocaleDateString()}) ya pasó. Si ya recibiste tu pedido, por favor confírmalo. Han pasado ${diasPasados} día(s).`,
                                tipo: 'retraso'
                            });
                            
                            pedido.estado = 'en-ruta';
                        }
                        
                        return;
                    }
                    
                    const tiempoRestante = fechaEntrega - ahora;
                    
                    if (tiempoRestante <= 1000 * 60 * 60 * 2) {
                        if (pedido.estado !== 'en-ruta') {
                            pedido.estado = 'en-ruta';
                        }
                    } else if (tiempoRestante <= 1000 * 60 * 60 * 24) {
                        if (pedido.estado !== 'preparacion') {
                            pedido.estado = 'preparacion';
                        }
                    } else {
                        if (pedido.estado !== 'pendiente') {
                            pedido.estado = 'pendiente';
                        }
                    }
                    
                    this.verificarNotificaciones(pedido);
                });
                
                this.guardarPedidos();
                this.actualizarBotonTracking();
            }
            
            verificarNotificaciones(pedido) {
                const ahora = new Date();
                
                pedido.notificaciones.forEach(notif => {
                    if (!notif.enviada && !pedido.notificacionesEnviadas.includes(notif.tipo)) {
                        const fechaNotif = new Date(notif.fecha);
                        if (ahora >= fechaNotif) {
                            this.enviarNotificacionInteligente(pedido.id, notif.tipo);
                        }
                    }
                });
            }
            
            enviarNotificacionInteligente(pedidoId, tipo) {
                const pedido = this.pedidos.find(p => p.id === pedidoId);
                if (!pedido) return;
                
                let mensaje = '';
                let titulo = '';
                let notificacion = null;
                
                if (tipo === 'inicial') {
                    titulo = '✅ Pedido Confirmado';
                    mensaje = `*¡Gracias por tu compra en ModaStyle!*\n\n` +
                              `Hemos recibido tu pedido correctamente.\n` +
                              `Tu número de seguimiento es: *${pedido.guia}*\n\n` +
                              `Puedes dar seguimiento en tiempo real desde el botón de seguimiento (📦) en la pantalla.`;
                } else {
                    notificacion = pedido.notificaciones.find(n => n.tipo === tipo);
                    if (!notificacion || notificacion.enviada) return;
                    
                    mensaje = notificacion.mensaje;
                    
                    const titulos = {
                        'preparacion': '🟡 Preparando tu pedido',
                        'guia': '🔵 Guía generada',
                        'en-ruta': '🟠 En camino',
                        'recordatorio': '⏰ Recordatorio',
                        'entrega-mismo-dia': '⚡ Entrega exprés',
                        'problema': '❌ Problema con la entrega',
                        'reagendado': '📅 Entrega reagendada',
                        'entregado': '✅ Pedido entregado',
                        'cancelado': '❌ Pedido cancelado'
                    };
                    titulo = titulos[tipo] || 'Notificación de pedido';
                }
                
                pedido.historial.push({
                    fecha: new Date().toISOString(),
                    estado: tipo === 'inicial' ? 'pendiente' : tipo,
                    descripcion: titulo + ': ' + (mensaje.length > 50 ? mensaje.substring(0, 50) + '...' : mensaje),
                    tipo: tipo
                });
                
                if (notificacion) {
                    notificacion.enviada = true;
                    pedido.notificacionesEnviadas.push(tipo);
                }
                
                this.guardarPedidos();
                
                this.mostrarNotificacion(titulo, mensaje, tipo);
                
                if (generalConfig.store.trackingNotifications) {
                    this.enviarWhatsAppCliente(pedido, titulo, mensaje);
                }
                
                if (document.getElementById('trackingPanel').classList.contains('open')) {
                    this.renderTrackingPanel();
                }
            }
            
            enviarWhatsAppCliente(pedido, titulo, mensaje) {
                let telefono = pedido.cliente?.telefono || '';
                telefono = telefono.replace(/\D/g, '');
                
                if (!telefono || telefono.length < 10) return;
                
                const mensajeCompleto = `*${titulo}*\n\n` +
                    `${mensaje}\n\n` +
                    `━━━━━━━━━━━━━━━━━━\n` +
                    `*Pedido:* ${pedido.guia}\n` +
                    `*Fecha:* ${new Date(pedido.fechaPedido).toLocaleDateString()}\n` +
                    `*Total:* $${pedido.total?.toFixed(2) || '0.00'}\n` +
                    `━━━━━━━━━━━━━━━━━━\n\n` +
                    `¿Necesitas ayuda? Responde a este mensaje o contacta a nuestro equipo.`;
                
                const mensajeCodificado = encodeURIComponent(mensajeCompleto);
                const whatsappUrl = `https://wa.me/${telefono}?text=${mensajeCodificado}`;
                
                const aviso = document.createElement('div');
                aviso.style.cssText = `
                    position: fixed;
                    bottom: 180px;
                    right: 20px;
                    background: linear-gradient(135deg, #25D366, #128C7E);
                    color: white;
                    padding: 12px 16px;
                    border-radius: var(--border-radius);
                    z-index: 9999;
                    box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
                    animation: slideInRight 0.3s ease;
                    max-width: 300px;
                    cursor: pointer;
                `;
                aviso.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <i class="fab fa-whatsapp" style="font-size: 1.5rem;"></i>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; margin-bottom: 4px;">📱 Notificación enviada</div>
                            <div style="font-size: 0.75rem;">Se ha enviado un mensaje a ${pedido.cliente?.nombre || 'cliente'} por WhatsApp</div>
                        </div>
                    </div>
                `;
                
                aviso.onclick = () => window.open(whatsappUrl, '_blank');
                
                document.body.appendChild(aviso);
                
                setTimeout(() => {
                    aviso.style.animation = 'slideInRight 0.3s ease reverse forwards';
                    setTimeout(() => aviso.remove(), 300);
                }, 5000);
            }
            
            mostrarNotificacion(titulo, mensaje, tipo) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    bottom: 240px;
                    right: 20px;
                    background: ${this.getColorPorTipo(tipo)};
                    color: white;
                    padding: 12px 16px;
                    border-radius: var(--border-radius);
                    z-index: 9999;
                    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
                    animation: slideInRight 0.3s ease;
                    max-width: 320px;
                    border-left: 4px solid rgba(255,255,255,0.5);
                `;
                notification.innerHTML = `
                    <div style="display: flex; align-items: flex-start; gap: 10px;">
                        <i class="fas ${this.getIconoPorTipo(tipo)}" style="font-size: 1.2rem; margin-top: 2px;"></i>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; margin-bottom: 4px;">${titulo}</div>
                            <div style="font-size: 0.8rem; line-height: 1.3;">${mensaje}</div>
                            <div style="margin-top: 8px; font-size: 0.7rem; opacity: 0.8;">
                                <i class="fas fa-clock"></i> ${new Date().toLocaleTimeString()}
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.style.animation = 'slideInRight 0.3s ease reverse forwards';
                    setTimeout(() => notification.remove(), 300);
                }, 10000);
            }
            
            getColorPorTipo(tipo) {
                const colores = {
                    'inicial': 'linear-gradient(135deg, #8B5CF6, #6D28D9)',
                    'preparacion': 'linear-gradient(135deg, #3b82f6, #2563eb)',
                    'guia': 'linear-gradient(135deg, #8b5cf6, #6d28d9)',
                    'en-ruta': 'linear-gradient(135deg, #f59e0b, #d97706)',
                    'recordatorio': 'linear-gradient(135deg, #f59e0b, #d97706)',
                    'entrega-mismo-dia': 'linear-gradient(135deg, #ec4899, #be185d)',
                    'confirmacion': 'linear-gradient(135deg, #10b981, #047857)',
                    'problema': 'linear-gradient(135deg, #ef4444, #b91c1c)',
                    'reagendado': 'linear-gradient(135deg, #6366f1, #4f46e5)',
                    'entregado': 'linear-gradient(135deg, #10b981, #047857)',
                    'cancelado': 'linear-gradient(135deg, #64748b, #475569)'
                };
                return colores[tipo] || colores.inicial;
            }
            
            getIconoPorTipo(tipo) {
                const iconos = {
                    'inicial': 'fa-check-circle',
                    'preparacion': 'fa-box-open',
                    'guia': 'fa-truck',
                    'en-ruta': 'fa-truck',
                    'recordatorio': 'fa-bell',
                    'entrega-mismo-dia': 'fa-bolt',
                    'confirmacion': 'fa-check-circle',
                    'problema': 'fa-exclamation-triangle',
                    'reagendado': 'fa-calendar-alt',
                    'entregado': 'fa-check-circle',
                    'cancelado': 'fa-times-circle'
                };
                return iconos[tipo] || 'fa-info-circle';
            }
            
            iniciarTimers() {
                this.timers.forEach(timer => clearInterval(timer));
                this.timers = [];
                
                const timer = setInterval(() => {
                    this.verificarEstados();
                }, 60000);
                
                this.timers.push(timer);
            }
            
            marcarEntregado(pedidoId) {
                window.confirmModal.show({
                    title: '✅ Confirmar recepción',
                    message: '¿Estás seguro de que has recibido este pedido?\n\nEsta acción confirmará que el paquete está en tus manos.',
                    type: 'success',
                    onConfirm: () => {
                        const pedido = this.pedidos.find(p => p.id === pedidoId);
                        if (!pedido) return;
                        
                        pedido.estado = 'entregado';
                        pedido.historial.push({
                            fecha: new Date().toISOString(),
                            estado: 'entregado',
                            descripcion: '✅ Cliente confirmó recepción del pedido',
                            tipo: 'entregado'
                        });
                        
                        this.guardarPedidos();
                        this.actualizarBotonTracking();
                        this.renderTrackingPanel();
                        
                        this.enviarWhatsAppCliente(pedido, '✅ ¡Pedido entregado!', 
                            'Gracias por confirmar la recepción de tu pedido. Esperamos que disfrutes tus productos. ¡Vuelve pronto!');
                        
                        this.mostrarNotificacion('✅ ¡Pedido entregado!', 
                            'Gracias por confirmar la recepción de tu pedido', 'entregado');
                    }
                });
            }
            
            cancelarPedido(pedidoId) {
                window.confirmModal.show({
                    title: '❌ Cancelar pedido',
                    message: '¿Estás seguro de que quieres cancelar este pedido?\n\nSe enviará una notificación al vendedor y se cancelará el seguimiento.',
                    type: 'error',
                    onConfirm: () => {
                        const pedido = this.pedidos.find(p => p.id === pedidoId);
                        if (!pedido) return;
                        
                        pedido.estado = 'cancelado';
                        pedido.historial.push({
                            fecha: new Date().toISOString(),
                            estado: 'cancelado',
                            descripcion: '❌ Cliente canceló el pedido',
                            tipo: 'cancelado'
                        });
                        
                        this.guardarPedidos();
                        this.actualizarBotonTracking();
                        this.renderTrackingPanel();
                        
                        const mensaje = `*❌ Cancelación de pedido*\n\n` +
                            `El cliente ha cancelado el pedido *${pedido.guia}*.\n\n` +
                            `*Motivo:* Cancelación solicitada por el cliente\n` +
                            `*Fecha:* ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}`;
                        
                        const telefonoVendedor = generalConfig.contact.whatsapp || "5567416073";
                        const mensajeCodificado = encodeURIComponent(mensaje);
                        const whatsappUrl = `https://wa.me/${telefonoVendedor}?text=${mensajeCodificado}`;
                        
                        window.open(whatsappUrl, '_blank');
                        
                        this.enviarWhatsAppCliente(pedido, '❌ Pedido cancelado', 
                            'Tu pedido ha sido cancelado correctamente. Si necesitas ayuda, contacta a nuestro equipo.');
                        
                        this.mostrarNotificacion('❌ Pedido cancelado', 
                            'Tu pedido ha sido cancelado correctamente', 'cancelado');
                    }
                });
            }
            
            marcarProblema(pedidoId, razon) {
                const pedido = this.pedidos.find(p => p.id === pedidoId);
                if (!pedido) return;
                
                pedido.estado = 'problema';
                pedido.historial.push({
                    fecha: new Date().toISOString(),
                    estado: 'problema',
                    descripcion: `❌ Problema: ${razon}`,
                    tipo: 'problema'
                });
                
                this.guardarPedidos();
                this.actualizarBotonTracking();
                this.renderTrackingPanel();
                
                this.enviarWhatsAppCliente(pedido, '❌ Problema con tu entrega', 
                    `Tuvimos un inconveniente con la entrega de tu pedido.\n\n*Motivo:* ${razon}\n\nPor favor, contacta a nuestro equipo para resolverlo lo antes posible o reagenda tu entrega.`);
                
                this.mostrarNotificacion('❌ Problema con la entrega', razon, 'problema');
            }
            
            abrirReagendamiento(pedidoId) {
                const pedido = this.pedidos.find(p => p.id === pedidoId);
                if (!pedido) return;
                
                this.pedidoReagendando = pedidoId;
                
                const modal = document.getElementById('rescheduleModal');
                const dateInput = document.getElementById('rescheduleDate');
                const timeSelect = document.getElementById('rescheduleTime');
                const pointSelect = document.getElementById('reschedulePoint');
                
                if (!modal || !dateInput || !timeSelect || !pointSelect) return;
                
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                dateInput.min = tomorrow.toISOString().split('T')[0];
                
                timeSelect.innerHTML = '<option value="">Selecciona horario</option>' +
                    deliveryConfig.times.map(time => {
                        const displayTime = time.label || this.formatTimeToAMPM(time.value);
                        return `<option value="${time.value}">${displayTime}</option>`;
                    }).join('');
                
                pointSelect.innerHTML = '<option value="">Selecciona punto</option>' +
                    deliveryConfig.points.map(point => 
                        `<option value="${point.id}">${point.name}</option>`
                    ).join('');
                
                modal.classList.add('active');
            }
            
            guardarReagendamiento(e) {
                e.preventDefault();
                
                const pedidoId = this.pedidoReagendando;
                const pedido = this.pedidos.find(p => p.id === pedidoId);
                if (!pedido) return;
                
                const nuevaFecha = document.getElementById('rescheduleDate').value;
                const nuevaHora = document.getElementById('rescheduleTime').value;
                const nuevoPunto = document.getElementById('reschedulePoint').value;
                
                if (!nuevaFecha || !nuevaHora || !nuevoPunto) {
                    alert('Por favor completa todos los campos');
                    return;
                }
                
                const fechaObj = new Date(nuevaFecha + 'T00:00:00');
                if (fechaObj.getDay() === 0) {
                    alert('Los domingos no hay entregas. Elige otro día.');
                    return;
                }
                
                const ahora = new Date();
                const nuevaFechaEntrega = new Date(nuevaFecha + 'T' + nuevaHora + ':00');
                if (nuevaFechaEntrega <= ahora) {
                    alert('La nueva fecha debe ser en el futuro');
                    return;
                }
                
                pedido.fechaEntrega = nuevaFechaEntrega.toISOString();
                pedido.horaEntrega = nuevaHora;
                pedido.puntoEntrega = nuevoPunto;
                pedido.estado = 'pendiente';
                
                const fechaPedido = new Date(pedido.fechaPedido);
                const diasHastaEntrega = Math.ceil((nuevaFechaEntrega - fechaPedido) / (1000 * 60 * 60 * 24));
                pedido.notificaciones = this.calcularNotificacionesInteligentes(fechaPedido, nuevaFechaEntrega, diasHastaEntrega);
                pedido.notificacionesEnviadas = [];
                
                pedido.historial.push({
                    fecha: new Date().toISOString(),
                    estado: 'reagendado',
                    descripcion: `📅 Cliente reagendó la entrega para ${fechaObj.toLocaleDateString()} a las ${nuevaHora}`,
                    tipo: 'reagendado'
                });
                
                this.guardarPedidos();
                this.verificarEstados();
                this.renderTrackingPanel();
                this.closeRescheduleModal();
                
                const punto = deliveryConfig.points.find(p => p.id === nuevoPunto);
                const mensaje = `*Tu entrega ha sido reagendada*\n\n` +
                    `📅 *Nueva fecha:* ${fechaObj.toLocaleDateString()}\n` +
                    `🕐 *Horario:* ${this.formatTimeToAMPM(nuevaHora)}\n` +
                    `📍 *Punto de entrega:* ${punto ? punto.name : nuevoPunto}\n\n` +
                    `Recibirás notificaciones actualizadas cuando tu pedido esté en camino.`;
                
                this.enviarWhatsAppCliente(pedido, '📅 Entrega reagendada', mensaje);
                
                const telefonoVendedor = generalConfig.contact.whatsapp || "5567416073";
                const mensajeVendedor = `*📅 REAGENDAMIENTO DE ENTREGA*\n\n` +
                    `*Cliente:* ${pedido.cliente?.nombre || 'No especificado'}\n` +
                    `*Teléfono:* ${pedido.cliente?.telefono || 'No especificado'}\n` +
                    `*Pedido:* ${pedido.guia}\n\n` +
                    `*Nueva fecha:* ${fechaObj.toLocaleDateString()}\n` +
                    `*Nuevo horario:* ${this.formatTimeToAMPM(nuevaHora)}\n` +
                    `*Nuevo punto:* ${punto ? punto.name : nuevoPunto}\n\n` +
                    `*Dirección:* ${punto ? punto.address : 'No especificada'}\n` +
                    `*Mapa:* ${punto ? punto.map : 'No especificado'}\n\n` +
                    `El cliente ha reagendado su entrega. Por favor actualiza tu sistema.`;
                
                const mensajeVendedorCodificado = encodeURIComponent(mensajeVendedor);
                const whatsappVendedorUrl = `https://wa.me/${telefonoVendedor}?text=${mensajeVendedorCodificado}`;
                
                const avisoVendedor = document.createElement('div');
                avisoVendedor.style.cssText = `
                    position: fixed;
                    bottom: 240px;
                    right: 20px;
                    background: linear-gradient(135deg, #6366f1, #4f46e5);
                    color: white;
                    padding: 12px 16px;
                    border-radius: var(--border-radius);
                    z-index: 9999;
                    box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
                    animation: slideInRight 0.3s ease;
                    max-width: 320px;
                    cursor: pointer;
                    border-left: 4px solid #ffd700;
                `;
                avisoVendedor.innerHTML = `
                    <div style="display: flex; align-items: flex-start; gap: 10px;">
                        <i class="fas fa-bell" style="font-size: 1.2rem; margin-top: 2px;"></i>
                        <div style="flex: 1;">
                            <div style="font-weight: 700; margin-bottom: 4px;">📢 Notificación al vendedor</div>
                            <div style="font-size: 0.8rem; line-height: 1.3;">Se ha enviado un mensaje al vendedor con los detalles del reagendamiento</div>
                            <div style="margin-top: 8px;">
                                <button onclick="window.open('${whatsappVendedorUrl}', '_blank')" style="background: white; color: #4f46e5; border: none; border-radius: 20px; padding: 4px 12px; font-size: 0.7rem; font-weight: 600; cursor: pointer;">
                                    <i class="fab fa-whatsapp"></i> Ver mensaje
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                avisoVendedor.onclick = () => window.open(whatsappVendedorUrl, '_blank');
                
                document.body.appendChild(avisoVendedor);
                
                setTimeout(() => {
                    avisoVendedor.style.animation = 'slideInRight 0.3s ease reverse forwards';
                    setTimeout(() => avisoVendedor.remove(), 300);
                }, 8000);
                
                window.open(whatsappVendedorUrl, '_blank');
                
                this.mostrarNotificacion('📅 Entrega reagendada', 
                    `Nueva fecha: ${fechaObj.toLocaleDateString()} a las ${nuevaHora}`, 'reagendado');
            }
            
            formatTimeToAMPM(time24) {
                if (!time24) return '';
                if (time24.includes('AM') || time24.includes('PM')) return time24;
                
                const [hours, minutes] = time24.split(':').map(Number);
                const period = hours >= 12 ? 'PM' : 'AM';
                let hours12 = hours % 12;
                hours12 = hours12 === 0 ? 12 : hours12;
                
                return `${hours12}:${minutes.toString().padStart(2, '0')} ${period}`;
            }
            
            closeRescheduleModal() {
                document.getElementById('rescheduleModal')?.classList.remove('active');
                this.pedidoReagendando = null;
            }
            
            openTrackingPanel() {
                document.getElementById('trackingPanel').classList.add('open');
                document.body.style.overflow = 'hidden';
                this.renderTrackingPanel();
            }
            
            closeTrackingPanel() {
                document.getElementById('trackingPanel').classList.remove('open');
                document.body.style.overflow = 'auto';
            }
            
            renderTrackingPanel() {
                const container = document.getElementById('trackingOrdersList');
                const pedidosActivos = this.pedidos.filter(p => p.estado !== 'entregado' && p.estado !== 'cancelado');
                
                if (pedidosActivos.length === 0) {
                    container.innerHTML = `
                        <div class="empty-cart" style="display: block;">
                            <i class="fas fa-truck" style="font-size: 3rem; opacity: 0.5;"></i>
                            <h3>No hay pedidos activos</h3>
                            <p>Los pedidos entregados o cancelados aparecerán en el historial</p>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = pedidosActivos.map(pedido => {
                    const fechaEntrega = new Date(pedido.fechaEntrega);
                    const ahora = new Date();
                    const tiempoRestante = this.obtenerTiempoRestante(pedido);
                    const fechaPasada = ahora > fechaEntrega;
                    
                    let diasPasados = 0;
                    if (fechaPasada) {
                        const diffTime = ahora - fechaEntrega;
                        diasPasados = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                    }
                    
                    const puedeConfirmar = pedido.estado !== 'entregado' && pedido.estado !== 'cancelado';
                    const puedeReagendar = pedido.estado === 'problema' || fechaPasada;
                    
                    const ultimasNotificaciones = pedido.historial.slice(-3).reverse();
                    
                    return `
                        <div class="tracking-order-card">
                            <div class="tracking-order-header">
                                <span class="tracking-order-id">
                                    <i class="fas fa-box"></i> ${pedido.guia}
                                </span>
                                <span class="tracking-order-status status-${pedido.estado}">
                                    ${this.obtenerNombreEstado(pedido.estado)}
                                </span>
                            </div>
                            
                            <div class="tracking-guide">
                                <span class="guide-number">${pedido.guia}</span>
                                <button class="copy-guide" onclick="trackingSystem.copiarGuia('${pedido.guia}')">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                            
                            <div class="tracking-timeline">
                                ${ultimasNotificaciones.map(h => `
                                    <div class="timeline-item completed">
                                        <div class="timeline-time">${new Date(h.fecha).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                                        <div class="timeline-title">${h.estado.toUpperCase()}</div>
                                        <div class="timeline-description">${h.descripcion}</div>
                                    </div>
                                `).join('')}
                                
                                <div class="timeline-item ${fechaPasada ? 'active' : ''}">
                                    <div class="timeline-time">${fechaPasada ? 'Fecha de entrega programada' : 'Entrega estimada'}</div>
                                    <div class="timeline-title">${fechaEntrega.toLocaleDateString()} - ${fechaEntrega.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</div>
                                    <div class="timeline-description">
                                        ${fechaPasada 
                                            ? `⚠️ Esta fecha ya pasó (hace ${diasPasados} día${diasPasados !== 1 ? 's' : ''}). Puedes confirmar si ya recibiste el pedido.` 
                                            : tiempoRestante}
                                    </div>
                                </div>
                            </div>
                            
                            <div class="tracking-actions" style="display: flex; flex-direction: column; gap: 8px; margin-top: 15px;">
                                ${puedeConfirmar ? `
                                    <div style="display: flex; gap: 8px; width: 100%;">
                                        <button class="tracking-btn btn-confirm" onclick="trackingSystem.marcarEntregado('${pedido.id}')" style="flex: 1;">
                                            <i class="fas fa-check"></i> CONFIRMAR RECEPCIÓN
                                        </button>
                                        
                                        <button class="tracking-btn btn-cancel-order" onclick="trackingSystem.cancelarPedido('${pedido.id}')" style="flex: 1;">
                                            <i class="fas fa-times"></i> CANCELAR PEDIDO
                                        </button>
                                    </div>
                                ` : ''}
                                
                                ${puedeReagendar ? `
                                    <button class="tracking-btn btn-reschedule" onclick="trackingSystem.abrirReagendamiento('${pedido.id}')" style="width: 100%;">
                                        <i class="fas fa-calendar-alt"></i> REAGENDAR ENTREGA
                                    </button>
                                ` : ''}
                                
                                ${!puedeConfirmar && pedido.estado !== 'cancelado' && pedido.estado !== 'entregado' ? `
                                    <button class="tracking-btn btn-cancel-order" onclick="trackingSystem.cancelarPedido('${pedido.id}')" style="width: 100%;">
                                        <i class="fas fa-times"></i> CANCELAR PEDIDO
                                    </button>
                                ` : ''}
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            obtenerTiempoRestante(pedido) {
                const ahora = new Date();
                const entrega = new Date(pedido.fechaEntrega);
                const diff = entrega - ahora;
                
                if (diff < 0) return 'Fecha de entrega ya pasada';
                
                const dias = Math.floor(diff / (1000 * 60 * 60 * 24));
                const horas = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutos = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                
                if (dias > 0) {
                    return `Entrega en ${dias} día${dias !== 1 ? 's' : ''} y ${horas} hora${horas !== 1 ? 's' : ''}`;
                } else if (horas > 0) {
                    return `Entrega en ${horas} hora${horas !== 1 ? 's' : ''} y ${minutos} minuto${minutos !== 1 ? 's' : ''}`;
                } else {
                    return `Entrega en ${minutos} minuto${minutos !== 1 ? 's' : ''}`;
                }
            }
            
            obtenerNombreEstado(estado) {
                const nombres = {
                    'pendiente': 'Pendiente',
                    'preparacion': 'En preparación',
                    'en-ruta': 'En ruta',
                    'entregado': 'Entregado',
                    'problema': 'Problema',
                    'cancelado': 'Cancelado'
                };
                return nombres[estado] || estado;
            }
            
            actualizarBotonTracking() {
                const trackingIcon = document.getElementById('trackingIcon');
                const trackingBadge = document.getElementById('trackingBadge');
                
                const pedidosActivos = this.pedidos.filter(p => p.estado !== 'entregado' && p.estado !== 'cancelado');
                
                if (pedidosActivos.length === 0) {
                    trackingIcon.style.display = 'none';
                    return;
                }
                
                trackingIcon.style.display = 'flex';
                trackingBadge.textContent = pedidosActivos.length;
                
                const estadosPrioridad = ['problema', 'en-ruta', 'preparacion', 'pendiente'];
                let colorEstado = 'pendiente';
                
                for (const estado of estadosPrioridad) {
                    if (pedidosActivos.some(p => p.estado === estado)) {
                        colorEstado = estado;
                        break;
                    }
                }
                
                trackingIcon.className = `tracking-icon ${colorEstado}`;
            }
            
            copiarGuia(guia) {
                navigator.clipboard.writeText(guia).then(() => {
                    alert('Guía copiada al portapapeles');
                });
            }
            
            guardarPedidos() {
                localStorage.setItem('modastyle_tracking_pedidos', JSON.stringify(this.pedidos));
            }
        }

        class VersionManager {
            constructor() {
                console.log('VersionManager: Cargando datos preservando estado');
                
                const cuponesUsadosActuales = JSON.parse(localStorage.getItem('modastyle_cupones_usados') || '[]');
                const cuponesExpiradosActuales = JSON.parse(localStorage.getItem('modastyle_cupones_expirados') || '[]');
                
                this.cargarDatosPreservandoEstado(cuponesUsadosActuales, cuponesExpiradosActuales);
                
                this.initCouponTimers();
            }
            
            cargarDatosPreservandoEstado(cuponesUsadosActuales, cuponesExpiradosActuales) {
                localStorage.setItem('modastyle_productos', JSON.stringify(productos));
                localStorage.setItem('modastyle_categorias', JSON.stringify(categorias));
                localStorage.setItem('modastyle_section_categories', JSON.stringify(sectionCategories));
                localStorage.setItem('modastyle_section_config', JSON.stringify(sectionConfig));
                localStorage.setItem('modastyle_banners', JSON.stringify(bannersDisponibles));
                localStorage.setItem('modastyle_delivery_config', JSON.stringify(deliveryConfig));
                localStorage.setItem('modastyle_general_config', JSON.stringify(generalConfig));
                localStorage.setItem('modastyle_version', CURRENT_VERSION);
                
                const cuponesHTML = cuponesDisponibles;
                
                const cuponesActualizados = cuponesHTML.map(cupon => {
                    if (cuponesUsadosActuales.includes(cupon.id)) {
                        return { ...cupon, usado: true, expirado: cupon.expirado || false };
                    }
                    if (cuponesExpiradosActuales.includes(cupon.id)) {
                        return { ...cupon, expirado: true, usado: cupon.usado || false };
                    }
                    return cupon;
                });
                
                localStorage.setItem('modastyle_cupones', JSON.stringify(cuponesActualizados));
                localStorage.setItem('modastyle_cupones_usados', JSON.stringify(cuponesUsadosActuales));
                localStorage.setItem('modastyle_cupones_expirados', JSON.stringify(cuponesExpiradosActuales));
            }
            
            initCouponTimers() {
                setInterval(() => {
                    if (window.carrito) {
                        window.carrito.verificarExpiracionCupones();
                    }
                }, 1000);
            }
        }

        class Administracion {
            constructor() {
                this.pinCorrecto = "199494";
                this.isAdmin = false;
                this.productosEditando = null;
                this.especificaciones = [];
                this.variantes = [];
                this.categoriaEditando = null;
                this.sectionCategoryEditando = null;
                this.tipoCuponSeleccionado = 'envio';
                this.tipoBannerSeleccionado = 'hero';
                this.bannerEditando = null;
                this.editingPointId = null;
                this.editingTimeId = null;
                this.currentProductView = 'list';
                this.editingSocialId = null;
                
                this.generadorDescripciones = new GeneradorDescripciones();
                this.bannerTimers = [];
                
                document.getElementById('adminPanel').classList.remove('open');
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.setupViewListeners();
                this.renderProductosAdmin();
                this.renderCategoriasSelect();
                this.renderCategoriasAdmin();
                this.loadSectionConfig();
                this.renderSectionCategories();
                this.renderCuponesAdmin();
                this.renderBanners();
                this.renderDeliveryPoints();
                this.renderDeliveryTimes();
                this.cargarTransferencia();
                this.setDefaultExpiryDate();
                this.setupGeneradorDescripciones();
                this.cargarConfiguracionGeneral();
                this.renderSocialMedia();
                
                this.iniciarContadorFlashBanners();
                this.actualizarFooter();
            }

            setupGeneradorDescripciones() {
                const generateBtn = document.getElementById('generateDescriptionBtn');
                if (generateBtn) {
                    generateBtn.addEventListener('click', () => {
                        this.generarDescripcionAutomatica();
                    });
                }
            }

            generarDescripcionAutomatica() {
                const nombre = document.getElementById('productName').value.trim();
                const categoria = document.getElementById('productCategory').value;
                const subcategoria = document.getElementById('productSubcategory').value.trim();
                const precioRegular = document.getElementById('productPrice').value.trim();
                const precioDescuento = document.getElementById('productDiscountPrice').value.trim();

                if (!nombre || !categoria || !subcategoria || !precioRegular) {
                    this.mostrarMensaje('Completa al menos: Nombre, Categoría, Subcategoría y Precio Regular', 'error');
                    return;
                }

                const categoriaObj = categorias.find(c => c.id === categoria);
                const nombreCategoria = categoriaObj ? categoriaObj.nombre : categoria;

                const descripcion = this.generadorDescripciones.generarDescripcion(
                    nombre,
                    nombreCategoria,
                    subcategoria,
                    precioRegular,
                    precioDescuento || null
                );

                document.getElementById('productDescription').value = descripcion;

                const stats = this.generadorDescripciones.obtenerEstadisticas();
                console.log(`Descripción generada (combinación ${stats.combinacionesGeneradas + 1} de ${stats.combinacionesPosibles.toLocaleString()} posibles)`);

                const textarea = document.getElementById('productDescription');
                textarea.style.transition = 'background-color 0.3s';
                textarea.style.backgroundColor = 'rgba(139, 92, 246, 0.1)';
                setTimeout(() => {
                    textarea.style.backgroundColor = '';
                }, 500);

                this.mostrarMensaje('✅ Descripción generada correctamente', 'success');
            }
            
            setupViewListeners() {
                const viewButtons = document.querySelectorAll('.view-btn');
                viewButtons.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const view = e.currentTarget.dataset.view;
                        this.switchProductView(view);
                    });
                });
            }
            
            switchProductView(view) {
                this.currentProductView = view;
                
                document.querySelectorAll('.view-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                const activeBtn = document.querySelector(`.view-btn[data-view="${view}"]`);
                if (activeBtn) activeBtn.classList.add('active');
                
                this.renderProductosAdmin();
            }
            
            setDefaultExpiryDate() {
                const dateInput = document.getElementById('couponExpiryDate');
                if (dateInput) {
                    const today = new Date();
                    const futureDate = new Date(today);
                    futureDate.setDate(today.getDate() + 7);
                    
                    const year = futureDate.getFullYear();
                    const month = String(futureDate.getMonth() + 1).padStart(2, '0');
                    const day = String(futureDate.getDate()).padStart(2, '0');
                    
                    dateInput.value = `${year}-${month}-${day}`;
                }
            }
            
            aplicarPresetExpiracion(valor) {
                const dateInput = document.getElementById('couponExpiryDate');
                const timeInput = document.getElementById('couponExpiryTime');
                
                if (valor === 'never') {
                    dateInput.value = '';
                    timeInput.value = '';
                    return;
                }
                
                const date = new Date();
                if (valor === '1d') date.setDate(date.getDate() + 1);
                else if (valor === '3d') date.setDate(date.getDate() + 3);
                else if (valor === '7d') date.setDate(date.getDate() + 7);
                else if (valor === '15d') date.setDate(date.getDate() + 15);
                else if (valor === '30d') date.setDate(date.getDate() + 30);
                
                dateInput.value = date.toISOString().split('T')[0];
                timeInput.value = '23:59';
            }
            
            setupEventListeners() {
                document.getElementById('adminBtn').addEventListener('click', () => this.showAuthModal());
                document.getElementById('authForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.verificarPin();
                });
                document.getElementById('cancelAuth').addEventListener('click', () => this.closeAuthModal());
                document.getElementById('closeAdmin').addEventListener('click', () => this.closeAdminPanel());
                
                document.querySelectorAll('.admin-tab').forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        const tabId = e.currentTarget.dataset.tab;
                        this.switchTab(tabId);
                    });
                });
                
                document.getElementById('addSpecBtn').addEventListener('click', () => this.agregarEspecificacion());
                document.getElementById('addVariantBtn').addEventListener('click', () => this.agregarVariantField());
                document.getElementById('resetFormBtn').addEventListener('click', () => this.resetForm());
                document.getElementById('productForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.guardarProducto();
                });
                
                document.getElementById('addCategoryBtn').addEventListener('click', () => this.agregarCategoria());
                document.getElementById('saveSectionBtn').addEventListener('click', () => this.saveSectionConfig());
                document.getElementById('addSectionCategoryBtn').addEventListener('click', () => this.addSectionCategory());
                
                document.getElementById('exportHtmlBtn').addEventListener('click', () => this.exportHtml());
            }
            
            showAuthModal() {
                document.getElementById('authModal').classList.add('active');
                document.getElementById('pinInput').focus();
                document.body.style.overflow = 'hidden';
            }
            
            closeAuthModal() {
                document.getElementById('authModal').classList.remove('active');
                document.getElementById('pinInput').value = '';
                document.getElementById('authMessage').style.display = 'none';
                document.body.style.overflow = 'auto';
            }
            
            verificarPin() {
                const pin = document.getElementById('pinInput').value;
                const authMessage = document.getElementById('authMessage');
                
                if (pin === this.pinCorrecto) {
                    this.isAdmin = true;
                    authMessage.className = 'status-message status-success';
                    authMessage.innerHTML = '<i class="fas fa-check-circle"></i><span>PIN correcto. Accediendo al panel...</span>';
                    authMessage.style.display = 'flex';
                    
                    setTimeout(() => {
                        this.closeAuthModal();
                        this.openAdminPanel();
                    }, 1000);
                } else {
                    authMessage.className = 'status-message status-error';
                    authMessage.innerHTML = '<i class="fas fa-times-circle"></i><span>PIN incorrecto. Intenta de nuevo.</span>';
                    authMessage.style.display = 'flex';
                    
                    document.getElementById('pinInput').value = '';
                    document.getElementById('pinInput').focus();
                }
            }
            
            openAdminPanel() {
                document.getElementById('adminPanel').classList.add('open');
                document.body.style.overflow = 'hidden';
                this.renderProductosAdmin();
                this.renderCategoriasSelect();
                this.renderCategoriasAdmin();
                this.loadSectionConfig();
                this.renderSectionCategories();
                this.renderCuponesAdmin();
                this.renderBanners();
                this.renderDeliveryPoints();
                this.renderDeliveryTimes();
                this.cargarTransferencia();
                this.cargarConfiguracionGeneral();
                this.renderSocialMedia();
            }
            
            closeAdminPanel() {
                document.getElementById('adminPanel').classList.remove('open');
                document.body.style.overflow = 'auto';
                this.resetForm();
                this.resetCategoriaForm();
                this.resetSectionCategoryForm();
                this.resetBannerForm();
                this.cancelarPuntoEntrega();
                this.cancelarHorarioEntrega();
                this.cancelarRedSocial();
            }
            
            switchTab(tabId) {
                document.querySelectorAll('.admin-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                document.querySelector(`.admin-tab[data-tab="${tabId}"]`).classList.add('active');
                
                document.querySelectorAll('.admin-section').forEach(section => {
                    section.classList.remove('active');
                });
                
                document.getElementById(`${tabId}Section`).classList.add('active');
                
                if (tabId === 'banners') {
                    this.renderBanners();
                } else if (tabId === 'delivery') {
                    this.renderDeliveryPoints();
                    this.renderDeliveryTimes();
                } else if (tabId === 'general') {
                    this.renderSocialMedia();
                }
            }
            
            seleccionarTipoCupon(tipo) {
                this.tipoCuponSeleccionado = tipo;
                
                document.querySelectorAll('.coupon-type-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                document.querySelector(`.coupon-type-option[data-type="${tipo}"]`).classList.add('selected');
                
                document.getElementById('envioFields').style.display = tipo === 'envio' ? 'block' : 'none';
                document.getElementById('porcentajeFields').style.display = tipo === 'porcentaje' ? 'block' : 'none';
                document.getElementById('fijoFields').style.display = tipo === 'fijo' ? 'block' : 'none';
                document.getElementById('2x1Fields').style.display = (tipo === '2x1' || tipo === '3x2') ? 'block' : 'none';
            }
            
            guardarCupon() {
                const tipo = this.tipoCuponSeleccionado;
                let codigo, descripcion, color, minimo, valor, categoria, icono;
                
                if (tipo === 'envio') {
                    codigo = document.getElementById('couponCode').value.trim();
                    descripcion = document.getElementById('couponDescription').value.trim();
                    minimo = parseFloat(document.getElementById('couponMinAmount').value) || 0;
                    color = document.getElementById('couponColor').value;
                    valor = 0;
                    icono = 'fa-truck';
                } else if (tipo === 'porcentaje') {
                    codigo = document.getElementById('couponCodePorcentaje').value.trim();
                    descripcion = document.getElementById('couponDescriptionPorcentaje').value.trim();
                    minimo = parseFloat(document.getElementById('couponMinAmountPorcentaje').value) || 0;
                    color = document.getElementById('couponColorPorcentaje').value;
                    valor = parseInt(document.getElementById('couponPercent').value) || 0;
                    icono = 'fa-percent';
                } else if (tipo === 'fijo') {
                    codigo = document.getElementById('couponCodeFijo').value.trim();
                    descripcion = document.getElementById('couponDescriptionFijo').value.trim();
                    minimo = parseFloat(document.getElementById('couponMinAmountFijo').value) || 0;
                    color = document.getElementById('couponColorFijo').value;
                    valor = parseFloat(document.getElementById('couponFixed').value) || 0;
                    icono = 'fa-dollar-sign';
                } else if (tipo === '2x1' || tipo === '3x2') {
                    codigo = document.getElementById('couponCodePromo').value.trim();
                    descripcion = document.getElementById('couponDescriptionPromo').value.trim();
                    color = document.getElementById('couponColorPromo').value;
                    valor = tipo;
                    categoria = document.getElementById('couponPromoCategory').value;
                    minimo = 0;
                    icono = tipo === '2x1' ? 'fa-gift' : 'fa-child';
                }
                
                if (!codigo) {
                    this.mostrarMensajeCupon('Ingresa un código para el cupón', 'error');
                    return;
                }
                
                const expiryDate = document.getElementById('couponExpiryDate').value;
                const expiryTime = document.getElementById('couponExpiryTime').value || '23:59';
                let fechaExpiracion = null;
                
                if (expiryDate) {
                    fechaExpiracion = `${expiryDate}T${expiryTime}:00`;
                }
                
                const nuevoCupon = {
                    id: 'cupon' + Date.now(),
                    codigo: codigo,
                    descripcion: descripcion || 'Cupón de descuento',
                    tipo: tipo,
                    valor: valor,
                    minimo: minimo || 0,
                    color: color || '#10b981',
                    usado: false,
                    expirado: false,
                    fechaExpiracion: fechaExpiracion,
                    icono: icono
                };
                
                if (categoria) nuevoCupon.categoria = categoria;
                
                cuponesDisponibles.push(nuevoCupon);
                
                this.guardarCuponesEnStorage();
                this.renderCuponesAdmin();
                if (window.carrito) {
                    window.carrito.cargarCupones();
                    window.carrito.startCouponTimers();
                }
                
                this.mostrarMensajeCupon('Cupón guardado correctamente con cronómetro', 'success');
                this.resetCouponForm();
            }
            
            guardarCuponesEnStorage() {
                localStorage.setItem('modastyle_cupones', JSON.stringify(cuponesDisponibles));
            }
            
            eliminarCupon(cuponId) {
                if (confirm('¿Eliminar este cupón?')) {
                    const index = cuponesDisponibles.findIndex(c => c.id === cuponId);
                    if (index !== -1) {
                        cuponesDisponibles.splice(index, 1);
                        
                        const usadoIndex = cuponesUsados.indexOf(cuponId);
                        if (usadoIndex !== -1) {
                            cuponesUsados.splice(usadoIndex, 1);
                            localStorage.setItem('modastyle_cupones_usados', JSON.stringify(cuponesUsados));
                        }
                        
                        const expiradoIndex = cuponesExpirados.indexOf(cuponId);
                        if (expiradoIndex !== -1) {
                            cuponesExpirados.splice(expiradoIndex, 1);
                            localStorage.setItem('modastyle_cupones_expirados', JSON.stringify(cuponesExpirados));
                        }
                        
                        this.guardarCuponesEnStorage();
                        this.renderCuponesAdmin();
                        if (window.carrito) {
                            window.carrito.cargarCupones();
                        }
                        this.mostrarMensajeCupon('Cupón eliminado', 'success');
                    }
                }
            }
            
            renderCuponesAdmin() {
                const container = document.getElementById('couponsListAdmin');
                
                if (!cuponesDisponibles || cuponesDisponibles.length === 0) {
                    container.innerHTML = `
                        <div class="status-message status-info">
                            <i class="fas fa-info-circle"></i>
                            <span>No hay cupones creados. Agrega cupones con cronómetro desde el formulario.</span>
                        </div>
                    `;
                    return;
                }
                
                const cuponesOrdenados = [...cuponesDisponibles].sort((a, b) => {
                    if (a.expirado && !b.expirado) return 1;
                    if (!a.expirado && b.expirado) return -1;
                    if (a.usado && !b.usado) return 1;
                    if (!a.usado && b.usado) return -1;
                    return 0;
                });
                
                container.innerHTML = cuponesOrdenados.map(cupon => {
                    let tipoTexto = '';
                    let valorTexto = '';
                    
                    if (cupon.tipo === 'envio') {
                        tipoTexto = '🚚 Envío gratis';
                        valorTexto = cupon.minimo > 0 ? `Mínimo $${cupon.minimo}` : 'Sin mínimo';
                    } else if (cupon.tipo === 'porcentaje') {
                        tipoTexto = `${cupon.valor}% OFF`;
                        valorTexto = cupon.minimo > 0 ? `Mínimo $${cupon.minimo}` : 'Sin mínimo';
                    } else if (cupon.tipo === 'fijo') {
                        tipoTexto = `$${cupon.valor} OFF`;
                        valorTexto = cupon.minimo > 0 ? `Mínimo $${cupon.minimo}` : 'Sin mínimo';
                    } else {
                        tipoTexto = cupon.tipo.toUpperCase();
                        valorTexto = cupon.categoria ? `Solo ${cupon.categoria}` : 'Todos los productos';
                    }
                    
                    let estadoHTML = '';
                    if (cupon.expirado) {
                        estadoHTML = `<span class="status-message status-error" style="display: inline-flex; margin: 0; padding: 2px 8px; font-size: 0.7rem;"><i class="fas fa-clock"></i> Expirado</span>`;
                    } else if (cupon.usado) {
                        estadoHTML = `<span class="status-message status-error" style="display: inline-flex; margin: 0; padding: 2px 8px; font-size: 0.7rem;"><i class="fas fa-check-circle"></i> Usado</span>`;
                    } else {
                        estadoHTML = `<span class="status-message status-success" style="display: inline-flex; margin: 0; padding: 2px 8px; font-size: 0.7rem;"><i class="fas fa-check-circle"></i> Disponible</span>`;
                    }
                    
                    let fechaHTML = '';
                    if (cupon.fechaExpiracion) {
                        const fecha = new Date(cupon.fechaExpiracion);
                        fechaHTML = `
                            <div class="coupon-detail-item">
                                <span class="coupon-detail-label"><i class="fas fa-clock"></i> Expira:</span>
                                <span class="coupon-detail-value">${fecha.toLocaleDateString()} ${fecha.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>
                            </div>
                        `;
                    }
                    
                    return `
                        <div class="coupon-item-admin" style="${cupon.expirado ? 'opacity: 0.7;' : ''}">
                            <div class="coupon-header-admin">
                                <span class="coupon-code-admin" style="background: ${cupon.color}20; color: ${cupon.color};">
                                    <i class="fas ${cupon.icono || 'fa-ticket-alt'}"></i> ${cupon.codigo}
                                </span>
                                <div class="coupon-actions-admin">
                                    ${estadoHTML}
                                    ${cupon.fechaExpiracion && !cupon.expirado && !cupon.usado ? 
                                        `<span class="coupon-expiry-badge"><i class="fas fa-hourglass-half"></i> ${this.obtenerDiasRestantes(cupon.fechaExpiracion)}d</span>` : ''}
                                    <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarCupon('${cupon.id}')" style="width: 26px; height: 26px; margin-left: 5px;">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="coupon-details-admin">
                                <div class="coupon-detail-item">
                                    <span class="coupon-detail-label">Descripción:</span>
                                    <span class="coupon-detail-value">${cupon.descripcion}</span>
                                </div>
                                <div class="coupon-detail-item">
                                    <span class="coupon-detail-label">Tipo:</span>
                                    <span class="coupon-detail-value">${tipoTexto}</span>
                                </div>
                                <div class="coupon-detail-item">
                                    <span class="coupon-detail-label">Condición:</span>
                                    <span class="coupon-detail-value">${valorTexto}</span>
                                </div>
                                ${fechaHTML}
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            obtenerDiasRestantes(fechaExpiracion) {
                const ahora = new Date().getTime();
                const expiracion = new Date(fechaExpiracion).getTime();
                const diferencia = expiracion - ahora;
                const dias = Math.floor(diferencia / (1000 * 60 * 60 * 24));
                return dias > 0 ? dias : 0;
            }
            
            mostrarMensajeCupon(texto, tipo) {
                const mensaje = document.getElementById('couponMessage');
                mensaje.className = `status-message status-${tipo}`;
                mensaje.innerHTML = `<i class="fas fa-${tipo === 'success' ? 'check' : 'exclamation'}-circle"></i><span>${texto}</span>`;
                mensaje.style.display = 'flex';
                
                setTimeout(() => {
                    mensaje.style.display = 'none';
                }, 3000);
            }
            
            resetCouponForm() {
                document.getElementById('couponCode').value = '🚚 ENVÍO GRATIS';
                document.getElementById('couponDescription').value = 'Compras +$399';
                document.getElementById('couponMinAmount').value = '399';
                document.getElementById('couponColor').value = '#10b981';
                
                document.getElementById('couponCodePorcentaje').value = '💰 20% OFF';
                document.getElementById('couponDescriptionPorcentaje').value = 'Toda la tienda';
                document.getElementById('couponMinAmountPorcentaje').value = '0';
                document.getElementById('couponColorPorcentaje').value = '#059669';
                document.getElementById('couponPercent').value = '20';
                
                document.getElementById('couponCodeFijo').value = '$50 OFF';
                document.getElementById('couponDescriptionFijo').value = 'Descuento en toda la tienda';
                document.getElementById('couponMinAmountFijo').value = '0';
                document.getElementById('couponColorFijo').value = '#8b5cf6';
                document.getElementById('couponFixed').value = '50';
                
                document.getElementById('couponCodePromo').value = '2X1CAMISETAS';
                document.getElementById('couponDescriptionPromo').value = 'Camisetas básicas';
                document.getElementById('couponColorPromo').value = '#3b82f6';
                document.getElementById('couponPromoType').value = '2x1';
                document.getElementById('couponPromoCategory').value = '';
                
                this.setDefaultExpiryDate();
                document.getElementById('couponExpiryTime').value = '23:59';
                document.getElementById('couponExpiryPreset').value = '';
                
                this.seleccionarTipoCupon('envio');
            }
            
            seleccionarTipoBanner(tipo) {
                this.tipoBannerSeleccionado = tipo;
                
                document.querySelectorAll('[data-banner-type]').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                const selectedOpt = document.querySelector(`[data-banner-type="${tipo}"]`);
                if (selectedOpt) {
                    selectedOpt.classList.add('selected');
                    
                    document.querySelectorAll('.banner-type-selector .coupon-type-option').forEach(el => {
                        el.style.background = '';
                        el.style.color = '';
                    });
                    
                    selectedOpt.style.background = '#8B5CF6';
                    selectedOpt.style.color = 'white';
                }
            }
            
            cambiarColorBannerPreset(preset) {
                const customColorContainer = document.getElementById('customColorContainer');
                customColorContainer.style.display = preset === 'custom' ? 'block' : 'none';
            }
            
            cambiarAccionBanner(actionType) {
                const categorySelector = document.getElementById('bannerCategorySelector');
                const urlSelector = document.getElementById('bannerUrlSelector');
                
                if (actionType === 'category') {
                    categorySelector.style.display = 'block';
                    urlSelector.style.display = 'none';
                    
                    const categorySelect = document.getElementById('bannerCategory');
                    if (categorySelect) {
                        const currentValue = categorySelect.value;
                        
                        categorySelect.innerHTML = '<option value="todo">TODOS los productos</option>';
                        
                        categorias
                            .filter(c => c.id !== 'todo')
                            .forEach(categoria => {
                                const option = document.createElement('option');
                                option.value = categoria.id;
                                option.textContent = categoria.nombre;
                                categorySelect.appendChild(option);
                            });
                        
                        if (currentValue && Array.from(categorySelect.options).some(opt => opt.value === currentValue)) {
                            categorySelect.value = currentValue;
                        }
                    }
                } else if (actionType === 'products-oferta') {
                    categorySelector.style.display = 'none';
                    urlSelector.style.display = 'none';
                } else if (actionType === 'coupons') {
                    categorySelector.style.display = 'none';
                    urlSelector.style.display = 'none';
                } else if (actionType === 'url') {
                    categorySelector.style.display = 'none';
                    urlSelector.style.display = 'block';
                }
            }
            
            ejecutarAccionBanner(actionType, actionValue) {
                if (actionType === 'category') {
                    window.carrito.filterProducts(actionValue);
                    document.getElementById('productos').scrollIntoView({ behavior: 'smooth' });
                } else if (actionType === 'products-oferta') {
                    const productsGrid = document.getElementById('productsGrid');
                    const productosOferta = productos.filter(p => p.estado === 'oferta' || p.precioDescuento);
                    
                    if (productosOferta.length === 0) {
                        alert('No hay productos en oferta actualmente');
                    } else {
                        window.carrito.currentFilter = 'oferta';
                        const filteredProducts = productos.filter(p => p.estado === 'oferta' || p.precioDescuento);
                        window.carrito.renderFilteredProducts(filteredProducts);
                        
                        const sectionSubtitle = document.querySelector('#productos .section-subtitle');
                        if (sectionSubtitle) {
                            sectionSubtitle.textContent = `Mostrando ${filteredProducts.length} producto(s) en oferta`;
                            sectionSubtitle.style.color = '#8B5CF6';
                            sectionSubtitle.style.fontWeight = '600';
                        }
                    }
                    document.getElementById('productos').scrollIntoView({ behavior: 'smooth' });
                } else if (actionType === 'coupons') {
                    window.carrito.openCart();
                    const couponSection = document.getElementById('couponSection');
                    if (couponSection) {
                        couponSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                } else if (actionType === 'url' && actionValue) {
                    window.location.href = actionValue;
                }
            }
            
            ajustarFechaPorZonaHoraria(fechaStr) {
                if (!fechaStr) return null;
                
                const [fecha, hora] = fechaStr.split('T');
                const [year, month, day] = fecha.split('-').map(Number);
                const [hours, minutes] = (hora || '00:00').split(':').map(Number);
                
                const fechaLocal = new Date(year, month - 1, day, hours, minutes, 0);
                
                return fechaLocal;
            }

            guardarBanner() {
                const tipo = this.tipoBannerSeleccionado;
                let titulo = document.getElementById('bannerTitle').value.trim();
                let subtitulo = document.getElementById('bannerSubtitle').value.trim();
                let buttonText = document.getElementById('bannerButtonText').value.trim();
                let actionType = document.getElementById('bannerActionType').value;
                let textColor = document.getElementById('bannerTextColor').value;
                let expiryDate = document.getElementById('bannerExpiryDate').value;
                let isActive = document.getElementById('bannerActive').checked;
                
                let actionValue = '';
                if (actionType === 'category') {
                    actionValue = document.getElementById('bannerCategory').value;
                } else if (actionType === 'url') {
                    actionValue = document.getElementById('bannerCustomUrl').value.trim() || '#';
                } else if (actionType === 'products-oferta') {
                    actionValue = 'oferta';
                } else if (actionType === 'coupons') {
                    actionValue = 'coupons';
                }
                
                let backgroundColor = '';
                const preset = document.getElementById('bannerColorPreset').value;
                
                if (preset === 'custom') {
                    backgroundColor = document.getElementById('bannerCustomColor').value;
                } else {
                    const gradients = {
                        'gradient1': 'linear-gradient(135deg, #8B5CF6 0%, #6D28D9 100%)',
                        'gradient2': 'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
                        'gradient3': 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                        'gradient4': 'linear-gradient(135deg, #1a1a1a 0%, #D4AF37 100%)',
                        'gradient5': 'linear-gradient(135deg, #f43b47 0%, #453a94 100%)'
                    };
                    backgroundColor = gradients[preset] || gradients.gradient1;
                }
                
                if (!titulo) {
                    this.mostrarMensajeBanner('El título del banner es requerido', 'error');
                    return;
                }
                
                let fechaExpiracionCompleta = null;
                if (expiryDate) {
                    const expiryTime = document.getElementById('bannerExpiryTime')?.value || '23:59';
                    fechaExpiracionCompleta = `${expiryDate}T${expiryTime}:00`;
                }
                
                const nuevoBanner = {
                    id: this.bannerEditando ? this.bannerEditando.id : 'banner' + Date.now(),
                    tipo: tipo,
                    titulo: titulo,
                    subtitulo: subtitulo || '',
                    buttonText: buttonText || 'Ver más',
                    actionType: actionType,
                    actionValue: actionValue,
                    backgroundColor: backgroundColor,
                    textColor: textColor || '#ffffff',
                    expiryDate: fechaExpiracionCompleta,
                    active: isActive,
                    fechaCreacion: new Date().toISOString()
                };
                
                if (this.bannerEditando) {
                    const index = bannersDisponibles.findIndex(b => b.id === this.bannerEditando.id);
                    if (index !== -1) {
                        bannersDisponibles[index] = nuevoBanner;
                        this.mostrarMensajeBanner('Banner actualizado correctamente', 'success');
                    }
                    this.bannerEditando = null;
                } else {
                    bannersDisponibles.push(nuevoBanner);
                    this.mostrarMensajeBanner('Banner guardado correctamente', 'success');
                }
                
                this.guardarBannersEnStorage();
                this.renderBanners();
                this.renderBannersFrontend();
                this.iniciarContadorFlashBanners();
                this.resetBannerForm();
            }
            
            guardarBannersEnStorage() {
                localStorage.setItem('modastyle_banners', JSON.stringify(bannersDisponibles));
            }
            
            renderBanners() {
                const container = document.getElementById('bannersListAdmin');
                
                if (!bannersDisponibles || bannersDisponibles.length === 0) {
                    container.innerHTML = `
                        <div class="status-message status-info">
                            <i class="fas fa-info-circle"></i>
                            <span>No hay banners creados. Crea tu primer banner con el formulario de arriba.</span>
                        </div>
                    `;
                    return;
                }
                
                const ahora = new Date();
                const bannersActivos = bannersDisponibles.filter(b => {
                    if (!b.active) return false;
                    if (b.expiryDate) {
                        const expiracion = this.ajustarFechaPorZonaHoraria(b.expiryDate);
                        if (ahora >= expiracion) return false;
                    }
                    return true;
                });
                
                const bannersInactivos = bannersDisponibles.filter(b => {
                    if (!b.active) return true;
                    if (b.expiryDate) {
                        const expiracion = this.ajustarFechaPorZonaHoraria(b.expiryDate);
                        if (ahora >= expiracion) return true;
                    }
                    return false;
                });
                
                let html = '<h5 style="margin: 10px 0; color: var(--success);">Banners Activos</h5>';
                
                if (bannersActivos.length === 0) {
                    html += '<div class="status-message status-info" style="margin-bottom: 15px;">No hay banners activos</div>';
                } else {
                    bannersActivos.forEach(banner => {
                        html += this.renderBannerItemAdmin(banner, true);
                    });
                }
                
                if (bannersInactivos.length > 0) {
                    html += '<h5 style="margin: 15px 0 10px; color: var(--text-light);">Banners Inactivos / Expirados</h5>';
                    bannersInactivos.forEach(banner => {
                        html += this.renderBannerItemAdmin(banner, false);
                    });
                }
                
                container.innerHTML = html;
            }
            
            renderBannerItemAdmin(banner, isActive) {
                let tipoTexto = '';
                let tipoIcono = '';
                
                if (banner.tipo === 'hero') {
                    tipoTexto = 'Hero';
                    tipoIcono = 'fa-star';
                } else if (banner.tipo === 'oferta') {
                    tipoTexto = 'Oferta';
                    tipoIcono = 'fa-tag';
                } else if (banner.tipo === 'info') {
                    tipoTexto = 'Informativo';
                    tipoIcono = 'fa-info-circle';
                } else if (banner.tipo === 'flash') {
                    tipoTexto = 'Flash';
                    tipoIcono = 'fa-bolt';
                }
                
                const isGradient = banner.backgroundColor && banner.backgroundColor.includes('linear-gradient');
                
                let accionTexto = '';
                if (banner.actionType === 'category') {
                    const categoria = categorias.find(c => c.id === banner.actionValue);
                    accionTexto = `Ir a categoría: ${categoria ? categoria.nombre : banner.actionValue}`;
                } else if (banner.actionType === 'products-oferta') {
                    accionTexto = 'Ver productos en oferta';
                } else if (banner.actionType === 'coupons') {
                    accionTexto = 'Ver cupones disponibles';
                } else if (banner.actionType === 'url') {
                    accionTexto = `URL: ${banner.actionValue}`;
                }
                
                return `
                    <div class="banner-item-admin" style="border-left: 4px solid ${isActive ? '#2e8b57' : '#64748b'};">
                        <div class="banner-header-admin">
                            <div class="banner-title-admin">
                                <i class="fas ${tipoIcono}"></i> ${banner.titulo}
                                <span class="banner-badge-admin" style="background: ${isActive ? 'var(--success)' : '#64748b'};">${tipoTexto}</span>
                            </div>
                            <div class="banner-actions-admin">
                                <button class="product-action-btn edit-btn-admin" onclick="admin.editarBanner('${banner.id}')" style="background: linear-gradient(135deg, #4CAF50, #45a049);">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarBanner('${banner.id}')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="banner-preview">
                            <div class="banner-preview-color" style="background: ${isGradient ? banner.backgroundColor : banner.backgroundColor};"></div>
                            <div class="banner-preview-info">
                                <div><strong>Subtítulo:</strong> ${banner.subtitulo || 'Sin subtítulo'}</div>
                                <div><strong>Botón:</strong> ${banner.buttonText} → ${accionTexto}</div>
                                <div>
                                    <strong>Estado:</strong> 
                                    <span style="color: ${isActive ? '#2e8b57' : '#cc3333'};">
                                        ${isActive ? 'Activo' : 'Inactivo'}
                                    </span>
                                    ${banner.expiryDate ? ` | Expira: ${new Date(banner.expiryDate).toLocaleDateString()}` : ''}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            renderBannersFrontend() {
                const bannerSection = document.getElementById('bannerSection');
                const bannerContainer = document.getElementById('bannerContainer');
                
                const ahora = new Date();
                const bannersActivos = bannersDisponibles.filter(b => {
                    if (!b.active) return false;
                    if (b.expiryDate) {
                        const expiracion = this.ajustarFechaPorZonaHoraria(b.expiryDate);
                        if (ahora >= expiracion) return false;
                    }
                    return true;
                });
                
                if (bannersActivos.length === 0) {
                    bannerSection.style.display = 'none';
                    return;
                }
                
                bannerSection.style.display = 'block';
                
                bannerContainer.innerHTML = bannersActivos.map(banner => {
                    const isGradient = banner.backgroundColor && banner.backgroundColor.includes('linear-gradient');
                    const bgStyle = isGradient ? banner.backgroundColor : `linear-gradient(135deg, ${banner.backgroundColor}, ${this.darkenColor(banner.backgroundColor)})`;
                    
                    let onclickHandler = '';
                    if (banner.actionType === 'category') {
                        onclickHandler = `admin.ejecutarAccionBanner('category', '${banner.actionValue}')`;
                    } else if (banner.actionType === 'products-oferta') {
                        onclickHandler = `admin.ejecutarAccionBanner('products-oferta', '')`;
                    } else if (banner.actionType === 'coupons') {
                        onclickHandler = `admin.ejecutarAccionBanner('coupons', '')`;
                    } else if (banner.actionType === 'url') {
                        onclickHandler = `admin.ejecutarAccionBanner('url', '${banner.actionValue}')`;
                    }
                    
                    let counterHTML = '';
                    if (banner.expiryDate) {
                        counterHTML = `<div class="banner-flash-counter" id="flash-counter-${banner.id}" data-expiry="${banner.expiryDate}"><i class="fas fa-clock"></i> <span>Cargando...</span></div>`;
                    }
                    
                    return `
                        <div class="banner-card" style="background: ${bgStyle}; color: ${banner.textColor};" onclick="${onclickHandler}">
                            <div class="banner-content">
                                <h2 class="banner-title">${banner.titulo}</h2>
                                <p class="banner-subtitle">${banner.subtitulo}</p>
                                <span class="banner-button" style="color: ${banner.textColor}; background: rgba(255,255,255,0.2); border: 2px solid ${banner.textColor};">${banner.buttonText}</span>
                            </div>
                            <span class="banner-badge">${banner.tipo.toUpperCase()}</span>
                            ${counterHTML}
                            <button class="banner-close" onclick="event.stopPropagation(); admin.desactivarBanner('${banner.id}')">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    `;
                }).join('');
            }
            
            iniciarContadorFlashBanners() {
                this.bannerTimers.forEach(timer => clearInterval(timer));
                this.bannerTimers = [];
                
                bannersDisponibles.forEach(banner => {
                    if (banner.active && banner.expiryDate) {
                        const timer = setInterval(() => {
                            this.actualizarContadorBanner(banner.id);
                        }, 1000);
                        
                        this.bannerTimers.push(timer);
                    }
                });
            }
            
            actualizarContadorBanner(bannerId) {
                const banner = bannersDisponibles.find(b => b.id === bannerId);
                if (!banner || !banner.expiryDate) return;
                
                const ahora = new Date();
                const expiracion = this.ajustarFechaPorZonaHoraria(banner.expiryDate);
                const diferencia = expiracion - ahora;
                
                const counterElement = document.getElementById(`flash-counter-${bannerId}`);
                
                if (diferencia <= 0) {
                    if (counterElement) {
                        const bannerCard = counterElement.closest('.banner-card');
                        if (bannerCard) bannerCard.style.display = 'none';
                    }
                    
                    banner.active = false;
                    this.guardarBannersEnStorage();
                    
                    const index = this.bannerTimers.findIndex(t => t._id === bannerId);
                    if (index !== -1) {
                        clearInterval(this.bannerTimers[index]);
                        this.bannerTimers.splice(index, 1);
                    }
                    
                    this.renderBannersFrontend();
                    return;
                }
                
                if (counterElement) {
                    const dias = Math.floor(diferencia / (1000 * 60 * 60 * 24));
                    const horas = Math.floor((diferencia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutos = Math.floor((diferencia % (1000 * 60 * 60)) / (1000 * 60));
                    const segundos = Math.floor((diferencia % (1000 * 60)) / 1000);
                    
                    let tiempoTexto = '';
                    if (dias > 0) {
                        tiempoTexto = `${dias}d ${horas}h ${minutos}m`;
                    } else if (horas > 0) {
                        tiempoTexto = `${horas}h ${minutos}m ${segundos}s`;
                    } else {
                        tiempoTexto = `${minutos}m ${segundos}s`;
                    }
                    
                    const span = counterElement.querySelector('span');
                    if (span) span.textContent = tiempoTexto;
                }
            }
            
            desactivarBanner(bannerId) {
                const banner = bannersDisponibles.find(b => b.id === bannerId);
                if (banner) {
                    banner.active = false;
                    this.guardarBannersEnStorage();
                    this.renderBanners();
                    this.renderBannersFrontend();
                    this.mostrarMensajeBanner('Banner desactivado', 'success');
                }
            }
            
            editarBanner(bannerId) {
                const banner = bannersDisponibles.find(b => b.id === bannerId);
                if (!banner) return;
                
                this.bannerEditando = banner;
                
                this.seleccionarTipoBanner(banner.tipo);
                document.getElementById('bannerTitle').value = banner.titulo;
                document.getElementById('bannerSubtitle').value = banner.subtitulo || '';
                document.getElementById('bannerButtonText').value = banner.buttonText || 'Ver más';
                document.getElementById('bannerActionType').value = banner.actionType || 'category';
                this.cambiarAccionBanner(banner.actionType || 'category');
                
                if (banner.actionType === 'category') {
                    document.getElementById('bannerCategory').value = banner.actionValue || 'todo';
                } else if (banner.actionType === 'url') {
                    document.getElementById('bannerCustomUrl').value = banner.actionValue || '#';
                }
                
                document.getElementById('bannerTextColor').value = banner.textColor || '#ffffff';
                
                if (banner.expiryDate) {
                    const fechaPart = banner.expiryDate.split('T')[0];
                    document.getElementById('bannerExpiryDate').value = fechaPart;
                } else {
                    document.getElementById('bannerExpiryDate').value = '';
                }
                
                document.getElementById('bannerActive').checked = banner.active !== false;
                
                const isGradient = banner.backgroundColor && banner.backgroundColor.includes('linear-gradient');
                if (isGradient) {
                    if (banner.backgroundColor.includes('8B5CF6') && banner.backgroundColor.includes('6D28D9')) {
                        document.getElementById('bannerColorPreset').value = 'gradient1';
                    } else if (banner.backgroundColor.includes('4facfe') && banner.backgroundColor.includes('00f2fe')) {
                        document.getElementById('bannerColorPreset').value = 'gradient2';
                    } else if (banner.backgroundColor.includes('f093fb') && banner.backgroundColor.includes('f5576c')) {
                        document.getElementById('bannerColorPreset').value = 'gradient3';
                    } else if (banner.backgroundColor.includes('1a1a1a') && banner.backgroundColor.includes('D4AF37')) {
                        document.getElementById('bannerColorPreset').value = 'gradient4';
                    } else if (banner.backgroundColor.includes('f43b47') && banner.backgroundColor.includes('453a94')) {
                        document.getElementById('bannerColorPreset').value = 'gradient5';
                    } else {
                        document.getElementById('bannerColorPreset').value = 'custom';
                        document.getElementById('customColorContainer').style.display = 'block';
                        document.getElementById('bannerCustomColor').value = '#8B5CF6';
                    }
                } else {
                    document.getElementById('bannerColorPreset').value = 'custom';
                    document.getElementById('customColorContainer').style.display = 'block';
                    document.getElementById('bannerCustomColor').value = banner.backgroundColor || '#8B5CF6';
                }
                
                this.cambiarColorBannerPreset(document.getElementById('bannerColorPreset').value);
                this.switchTab('banners');
            }
            
            eliminarBanner(bannerId) {
                if (confirm('¿Eliminar este banner?')) {
                    const index = bannersDisponibles.findIndex(b => b.id === bannerId);
                    if (index !== -1) {
                        bannersDisponibles.splice(index, 1);
                        this.guardarBannersEnStorage();
                        this.renderBanners();
                        this.renderBannersFrontend();
                        this.mostrarMensajeBanner('Banner eliminado', 'success');
                    }
                }
            }
            
            resetBannerForm() {
                this.bannerEditando = null;
                this.seleccionarTipoBanner('hero');
                document.getElementById('bannerTitle').value = '¡Ofertas de Verano!';
                document.getElementById('bannerSubtitle').value = 'Hasta 50% de descuento';
                document.getElementById('bannerButtonText').value = 'Comprar Ahora';
                document.getElementById('bannerActionType').value = 'category';
                document.getElementById('bannerCategory').value = 'todo';
                document.getElementById('bannerCustomUrl').value = '#productos';
                this.cambiarAccionBanner('category');
                document.getElementById('bannerColorPreset').value = 'gradient1';
                document.getElementById('bannerTextColor').value = '#ffffff';
                document.getElementById('bannerExpiryDate').value = '';
                document.getElementById('bannerActive').checked = true;
                document.getElementById('customColorContainer').style.display = 'none';
                this.cambiarColorBannerPreset('gradient1');
            }
            
            mostrarMensajeBanner(texto, tipo) {
                const mensaje = document.getElementById('bannerMessage');
                mensaje.className = `status-message status-${tipo}`;
                mensaje.innerHTML = `<i class="fas fa-${tipo === 'success' ? 'check' : 'exclamation'}-circle"></i><span>${texto}</span>`;
                mensaje.style.display = 'flex';
                
                setTimeout(() => {
                    mensaje.style.display = 'none';
                }, 3000);
            }
            
            renderDeliveryPoints() {
                const list = document.getElementById('deliveryPointsList');
                if (!list) return;
                
                list.innerHTML = deliveryConfig.points.map(point => `
                    <div class="delivery-point-item" data-point-id="${point.id}">
                        <div class="delivery-point-info">
                            <div class="delivery-point-name">${point.name}</div>
                            <div class="delivery-point-address">${point.address}</div>
                        </div>
                        <div class="delivery-point-actions">
                            <button class="delivery-point-btn edit-delivery-btn" onclick="admin.editarPuntoEntrega('${point.id}')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="delivery-point-btn delete-delivery-btn" onclick="admin.eliminarPuntoEntrega('${point.id}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
            }
            
            agregarPuntoEntrega() {
                this.editingPointId = null;
                document.getElementById('deliveryPointName').value = '';
                document.getElementById('deliveryPointAddress').value = '';
                document.getElementById('deliveryPointMap').value = '';
                document.getElementById('editingPointId').value = '';
                document.getElementById('deliveryPointForm').style.display = 'block';
                document.getElementById('deliveryPointName').focus();
            }
            
            editarPuntoEntrega(pointId) {
                const point = deliveryConfig.points.find(p => p.id === pointId);
                if (!point) return;
                
                this.editingPointId = pointId;
                document.getElementById('deliveryPointName').value = point.name;
                document.getElementById('deliveryPointAddress').value = point.address;
                document.getElementById('deliveryPointMap').value = point.map || '';
                document.getElementById('editingPointId').value = pointId;
                document.getElementById('deliveryPointForm').style.display = 'block';
            }
            
            guardarPuntoEntrega() {
                const name = document.getElementById('deliveryPointName').value.trim();
                const address = document.getElementById('deliveryPointAddress').value.trim();
                const map = document.getElementById('deliveryPointMap').value.trim();
                const editingId = document.getElementById('editingPointId').value;
                
                if (!name || !address) {
                    this.mostrarMensajeDelivery('Completa nombre y dirección', 'error');
                    return;
                }
                
                if (editingId) {
                    const point = deliveryConfig.points.find(p => p.id === editingId);
                    if (point) {
                        point.name = name;
                        point.address = address;
                        point.map = map || point.map;
                    }
                } else {
                    const newId = 'point' + Date.now();
                    deliveryConfig.points.push({
                        id: newId,
                        name: name,
                        address: address,
                        map: map || '#'
                    });
                }
                
                this.guardarDeliveryConfig();
                this.renderDeliveryPoints();
                this.cancelarPuntoEntrega();
                this.mostrarMensajeDelivery('Punto de entrega guardado', 'success');
            }
            
            eliminarPuntoEntrega(pointId) {
                if (confirm('¿Eliminar este punto de entrega?')) {
                    deliveryConfig.points = deliveryConfig.points.filter(p => p.id !== pointId);
                    this.guardarDeliveryConfig();
                    this.renderDeliveryPoints();
                    this.mostrarMensajeDelivery('Punto eliminado', 'success');
                }
            }
            
            cancelarPuntoEntrega() {
                document.getElementById('deliveryPointForm').style.display = 'none';
                this.editingPointId = null;
            }
            
            renderDeliveryTimes() {
                const list = document.getElementById('deliveryTimesList');
                if (!list) return;
                
                list.innerHTML = deliveryConfig.times.map(time => {
                    const displayTime = time.label || this.formatTimeToAMPM(time.value);
                    return `
                        <div class="delivery-time-item" data-time-id="${time.id}">
                            <div class="delivery-time-value">${displayTime}</div>
                            <div class="delivery-time-actions">
                                <button class="delivery-point-btn edit-delivery-btn" onclick="admin.editarHorarioEntrega('${time.id}')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="delivery-point-btn delete-delivery-btn" onclick="admin.eliminarHorarioEntrega('${time.id}')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            agregarHorarioEntrega() {
                this.editingTimeId = null;
                document.getElementById('deliveryTimeValue').value = '12:00';
                document.getElementById('deliveryTimeLabel').value = '';
                document.getElementById('editingTimeId').value = '';
                document.getElementById('deliveryTimeForm').style.display = 'block';
            }
            
            editarHorarioEntrega(timeId) {
                const time = deliveryConfig.times.find(t => t.id === timeId);
                if (!time) return;
                
                this.editingTimeId = timeId;
                document.getElementById('deliveryTimeValue').value = time.value;
                document.getElementById('deliveryTimeLabel').value = time.label || '';
                document.getElementById('editingTimeId').value = timeId;
                document.getElementById('deliveryTimeForm').style.display = 'block';
            }
            
            guardarHorarioEntrega() {
                const value = document.getElementById('deliveryTimeValue').value;
                const label = document.getElementById('deliveryTimeLabel').value.trim();
                const editingId = document.getElementById('editingTimeId').value;
                
                if (!value) {
                    this.mostrarMensajeDelivery('Selecciona un horario', 'error');
                    return;
                }
                
                const displayLabel = label || this.formatTimeToAMPM(value);
                
                if (editingId) {
                    const time = deliveryConfig.times.find(t => t.id === editingId);
                    if (time) {
                        time.value = value;
                        time.label = displayLabel;
                    }
                } else {
                    deliveryConfig.times.push({
                        id: 'time' + Date.now(),
                        value: value,
                        label: displayLabel
                    });
                }
                
                this.guardarDeliveryConfig();
                this.renderDeliveryTimes();
                this.cancelarHorarioEntrega();
                this.mostrarMensajeDelivery('Horario guardado', 'success');
            }
            
            eliminarHorarioEntrega(timeId) {
                if (confirm('¿Eliminar este horario?')) {
                    deliveryConfig.times = deliveryConfig.times.filter(t => t.id !== timeId);
                    this.guardarDeliveryConfig();
                    this.renderDeliveryTimes();
                    this.mostrarMensajeDelivery('Horario eliminado', 'success');
                }
            }
            
            cancelarHorarioEntrega() {
                document.getElementById('deliveryTimeForm').style.display = 'none';
                this.editingTimeId = null;
            }
            
            formatTimeToAMPM(time24) {
                if (!time24) return '';
                
                if (time24.includes('AM') || time24.includes('PM') || time24.includes('am') || time24.includes('pm')) {
                    return time24;
                }
                
                const [hours, minutes] = time24.split(':').map(Number);
                
                if (isNaN(hours) || isNaN(minutes)) return time24;
                
                const period = hours >= 12 ? 'PM' : 'AM';
                
                let hours12 = hours % 12;
                hours12 = hours12 === 0 ? 12 : hours12;
                
                const minutesStr = minutes.toString().padStart(2, '0');
                
                return `${hours12}:${minutesStr} ${period}`;
            }
            
            cargarTransferencia() {
                document.getElementById('transferNombre').value = deliveryConfig.transfer.nombre;
                document.getElementById('transferBanco').value = deliveryConfig.transfer.banco;
                document.getElementById('transferClabe').value = deliveryConfig.transfer.clabe;
            }
            
            guardarTransferencia() {
                deliveryConfig.transfer.nombre = document.getElementById('transferNombre').value.trim() || 'Saul Flores';
                deliveryConfig.transfer.banco = document.getElementById('transferBanco').value.trim() || 'STP';
                deliveryConfig.transfer.clabe = document.getElementById('transferClabe').value.trim() || '721180100001101243';
                
                this.guardarDeliveryConfig();
                this.mostrarMensajeDelivery('Datos de transferencia guardados', 'success');
            }
            
            guardarDeliveryConfig() {
                localStorage.setItem('modastyle_delivery_config', JSON.stringify(deliveryConfig));
                if (window.carrito) {
                    window.carrito.renderDeliveryOptions();
                    window.carrito.renderDeliveryTimesSelect();
                }
            }
            
            mostrarMensajeDelivery(texto, tipo) {
                const mensaje = document.getElementById('deliveryMessage');
                mensaje.className = `status-message status-${tipo}`;
                mensaje.innerHTML = `<i class="fas fa-${tipo === 'success' ? 'check' : 'exclamation'}-circle"></i><span>${texto}</span>`;
                mensaje.style.display = 'flex';
                
                setTimeout(() => {
                    mensaje.style.display = 'none';
                }, 3000);
            }
            
            agregarEspecificacion() {
                const specInput = document.getElementById('specInput');
                const spec = specInput.value.trim();
                
                if (spec) {
                    this.especificaciones.push(spec);
                    this.renderEspecificaciones();
                    specInput.value = '';
                    specInput.focus();
                }
            }
            
            renderEspecificaciones() {
                const container = document.getElementById('specsContainer');
                container.innerHTML = this.especificaciones.map((spec, index) => `
                    <div class="tag">
                        ${spec}
                        <span class="tag-remove" onclick="admin.eliminarEspecificacion(${index})">
                            <i class="fas fa-times"></i>
                        </span>
                    </div>
                `).join('');
            }
            
            eliminarEspecificacion(index) {
                this.especificaciones.splice(index, 1);
                this.renderEspecificaciones();
            }
            
            agregarVariantField() {
                const variantId = Date.now();
                const variantField = document.createElement('div');
                variantField.className = 'variant-field';
                variantField.innerHTML = `
                    <div class="variant-field-header">
                        <div class="variant-field-title">
                            <i class="fas fa-cog"></i>
                            Campo de Variante
                        </div>
                        <button type="button" class="remove-variant-btn" onclick="admin.eliminarVariantField(${variantId})">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="form-row">
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-tag"></i> Nombre del campo:
                            </label>
                            <input type="text" class="form-input-admin variant-name" placeholder="Ej: Talla, Color, Material" required>
                        </div>
                        <div class="form-group-admin">
                            <label class="form-label-admin">
                                <i class="fas fa-asterisk"></i> Requerido:
                            </label>
                            <select class="form-select variant-required" required>
                                <option value="true">Sí</option>
                                <option value="false">No</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group-admin">
                        <label class="form-label-admin">
                            <i class="fas fa-list"></i> Opciones (separadas por comas):
                        </label>
                        <input type="text" class="form-input-admin variant-options" placeholder="Ej: Negro, Azul, Rojo, S, M, L" required>
                    </div>
                `;
                
                document.getElementById('variantSystemContainer').appendChild(variantField);
                this.variantes.push({ id: variantId });
            }
            
            eliminarVariantField(variantId) {
                const variantField = document.querySelector(`.variant-field [onclick="admin.eliminarVariantField(${variantId})"]`)?.closest('.variant-field');
                if (variantField) {
                    variantField.remove();
                    this.variantes = this.variantes.filter(v => v.id !== variantId);
                }
            }
            
            resetForm() {
                document.getElementById('productForm').reset();
                this.especificaciones = [];
                this.variantes = [];
                this.productosEditando = null;
                
                this.renderEspecificaciones();
                document.getElementById('variantSystemContainer').innerHTML = '';
                document.getElementById('stockSystemContainer').innerHTML = '';
                
                document.getElementById('saveProductBtn').innerHTML = '<i class="fas fa-save"></i> Guardar Producto';
                document.getElementById('formMessage').style.display = 'none';
            }
            
            obtenerDatosVariantes() {
                const variantFields = document.querySelectorAll('.variant-field');
                const variantes = [];
                
                variantFields.forEach(field => {
                    const nombre = field.querySelector('.variant-name').value.trim();
                    const required = field.querySelector('.variant-required').value === 'true';
                    const opcionesText = field.querySelector('.variant-options').value.trim();
                    
                    if (nombre && opcionesText) {
                        const opciones = opcionesText.split(',').map(o => o.trim()).filter(o => o);
                        variantes.push({
                            nombre: nombre,
                            tipo: 'select',
                            opciones: opciones,
                            required: required
                        });
                    }
                });
                
                return variantes;
            }
            
            obtenerStock() {
                const stockGeneral = document.getElementById('stockGeneral');
                if (stockGeneral) {
                    return parseInt(stockGeneral.value) || 0;
                }
                
                const stockInputs = document.querySelectorAll('.stock-input');
                const stock = {};
                
                stockInputs.forEach(input => {
                    const key = input.dataset.key;
                    const value = parseInt(input.value) || 0;
                    if (key && !isNaN(value)) {
                        stock[key] = value;
                    }
                });
                
                return stock;
            }
            
            guardarProducto() {
                const nombre = document.getElementById('productName').value.trim();
                const categoria = document.getElementById('productCategory').value;
                const subcategoria = document.getElementById('productSubcategory').value.trim();
                const precio = document.getElementById('productPrice').value.trim();
                const imagen = document.getElementById('productImage').value.trim();
                const descripcion = document.getElementById('productDescription').value.trim();
                
                if (!nombre || !categoria || !subcategoria || !precio || !imagen || !descripcion) {
                    this.mostrarMensaje('Por favor completa todos los campos requeridos', 'error');
                    return;
                }
                
                const variantes = this.obtenerDatosVariantes();
                const stock = this.obtenerStock();
                
                const imagesText = document.getElementById('productImages').value.trim();
                const galeriaPorVariante = {};
                
                if (imagesText) {
                    const lines = imagesText.split('\n');
                    lines.forEach(line => {
                        const trimmedLine = line.trim();
                        if (trimmedLine) {
                            const parts = trimmedLine.split('|');
                            if (parts.length >= 2) {
                                const variantValue = parts[0].trim();
                                const imageUrl = parts[1].trim();
                                if (variantValue && imageUrl) {
                                    if (!galeriaPorVariante[variantValue]) {
                                        galeriaPorVariante[variantValue] = [];
                                    }
                                    galeriaPorVariante[variantValue].push(imageUrl);
                                }
                            }
                        }
                    });
                }
                
                const nuevoProducto = {
                    id: this.productosEditando ? this.productosEditando.id : this.generarId(),
                    nombre: nombre,
                    precioRegular: precio,
                    precioDescuento: document.getElementById('productDiscountPrice').value.trim() || undefined,
                    imagen: imagen,
                    categoria: categoria,
                    subcategoria: subcategoria,
                    descripcion: descripcion,
                    estado: document.getElementById('productEstado').value,
                    especificaciones: [...this.especificaciones],
                    variantes: variantes,
                    stock: stock,
                    galeriaPorVariante: Object.keys(galeriaPorVariante).length > 0 ? galeriaPorVariante : undefined
                };
                
                if (this.productosEditando) {
                    const index = productos.findIndex(p => p.id === this.productosEditando.id);
                    if (index !== -1) {
                        productos[index] = nuevoProducto;
                        this.mostrarMensaje('Producto actualizado correctamente', 'success');
                    }
                } else {
                    productos.push(nuevoProducto);
                    this.mostrarMensaje('Producto agregado correctamente', 'success');
                }
                
                this.guardarProductosEnStorage();
                if (window.carrito) {
                    window.carrito.renderProducts();
                    window.carrito.renderCategoryFilters();
                }
                
                this.renderProductosAdmin();
                
                setTimeout(() => {
                    this.resetForm();
                    this.switchTab('products');
                }, 1500);
            }
            
            generarId() {
                return Math.max(...productos.map(p => p.id), 0) + 1;
            }
            
            guardarProductosEnStorage() {
                localStorage.setItem('modastyle_productos', JSON.stringify(productos));
            }
            
            renderProductosAdmin() {
                const container = document.getElementById('productsListAdmin');
                
                if (productos.length === 0) {
                    container.innerHTML = `
                        <div class="status-message status-info">
                            <i class="fas fa-info-circle"></i>
                            <span>No hay productos. Agrega algunos desde la pestaña "Agregar".</span>
                        </div>
                    `;
                    return;
                }

                container.innerHTML = '';

                if (this.currentProductView === 'compact') {
                    this.renderProductosCompact(container);
                } else {
                    this.renderProductosList(container);
                }

                this.setupDragAndDrop();
            }

            renderProductosList(container) {
                container.className = 'products-list-admin';
                container.style.display = 'block';
                
                productos.forEach(producto => {
                    const precio = producto.precioDescuento ? producto.precioDescuento : producto.precioRegular;
                    const categoria = categorias.find(c => c.id === producto.categoria)?.nombre || producto.categoria;
                    
                    const item = document.createElement('div');
                    item.className = 'product-item-admin';
                    item.setAttribute('data-product-id', producto.id);
                    item.setAttribute('draggable', 'true');
                    item.innerHTML = `
                        <img src="${producto.imagen}" alt="${producto.nombre}" class="product-image-admin">
                        <div class="product-info-admin">
                            <div class="product-name-admin">${producto.nombre}</div>
                            <div class="product-category-admin">
                                <i class="fas fa-tag"></i>
                                ${producto.subcategoria} | ${categoria}
                            </div>
                            <div class="product-price-admin">${precio}</div>
                        </div>
                        <div class="product-actions-admin">
                            <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(${producto.id})" title="Editar producto">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(${producto.id})" title="Clonar producto">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(${producto.id})" title="Eliminar producto">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `;
                    container.appendChild(item);
                });
            }

            renderProductosCompact(container) {
                container.className = '';
                container.style.display = 'block';
                
                const table = document.createElement('table');
                table.style.cssText = `
                    width: 100%;
                    border-collapse: collapse;
                    background: rgba(0, 0, 0, 0.3);
                    border-radius: var(--border-radius);
                    overflow: hidden;
                    font-size: 0.8rem;
                    border: 1px solid rgba(139, 92, 246, 0.2);
                `;
                
                table.innerHTML = `
                    <thead style="background: #8B5CF6; color: white;">
                        <tr>
                            <th style="padding: 8px; text-align: left;">Imagen</th>
                            <th style="padding: 8px; text-align: left;">Nombre</th>
                            <th style="padding: 8px; text-align: left;">Categoría</th>
                            <th style="padding: 8px; text-align: left;">Precio</th>
                            <th style="padding: 8px; text-align: center;">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                `;
                
                productos.forEach(producto => {
                    const precio = producto.precioDescuento ? producto.precioDescuento : producto.precioRegular;
                    const categoria = categorias.find(c => c.id === producto.categoria)?.nombre || producto.categoria;
                    
                    table.innerHTML += `
                        <tr style="border-bottom: 1px solid rgba(139, 92, 246, 0.2);">
                            <td style="padding: 8px;"><img src="${producto.imagen}" alt="${producto.nombre}" style="width: 40px; height: 40px; object-fit: cover; border-radius: var(--border-radius-sm); border: 1px solid rgba(139, 92, 246, 0.3);"></td>
                            <td style="padding: 8px; font-weight: 600; color: #ffffff;">${producto.nombre}</td>
                            <td style="padding: 8px; color: #8B5CF6;">${producto.subcategoria} | ${categoria}</td>
                            <td style="padding: 8px; font-weight: 700; color: #D4AF37;">${precio}</td>
                            <td style="padding: 8px; text-align: center;">
                                <button class="product-action-btn edit-btn-admin" onclick="admin.editarProducto(${producto.id})" style="display: inline-block; margin-right: 3px;" title="Editar producto"><i class="fas fa-edit"></i></button>
                                <button class="product-action-btn clone-btn-admin" onclick="admin.clonarProducto(${producto.id})" style="display: inline-block; margin-right: 3px;" title="Clonar producto"><i class="fas fa-copy"></i></button>
                                <button class="product-action-btn delete-btn-admin" onclick="admin.eliminarProducto(${producto.id})" style="display: inline-block;" title="Eliminar producto"><i class="fas fa-trash"></i></button>
                            </td>
                        </tr>
                    `;
                });
                
                table.innerHTML += '</tbody>';
                container.appendChild(table);
            }
            
            setupDragAndDrop() {
                const container = document.getElementById('productsListAdmin');
                if (!container || this.currentProductView !== 'list') return;
                
                let draggingItem = null;
                
                container.querySelectorAll('.product-item-admin').forEach(item => {
                    item.addEventListener('dragstart', (e) => {
                        draggingItem = e.currentTarget;
                        e.currentTarget.classList.add('dragging');
                    });
                    
                    item.addEventListener('dragend', () => {
                        draggingItem.classList.remove('dragging');
                        draggingItem = null;
                    });
                });
                
                container.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    const afterElement = this.getDragAfterElement(container, e.clientY);
                    
                    if (afterElement == null) {
                        container.appendChild(draggingItem);
                    } else {
                        container.insertBefore(draggingItem, afterElement);
                    }
                });
                
                container.addEventListener('drop', () => {
                    this.reordenarProductos();
                });
            }
            
            getDragAfterElement(container, y) {
                const draggableElements = [...container.querySelectorAll('.product-item-admin:not(.dragging)')];
                
                return draggableElements.reduce((closest, child) => {
                    const box = child.getBoundingClientRect();
                    const offset = y - box.top - box.height / 2;
                    
                    if (offset < 0 && offset > closest.offset) {
                        return { offset: offset, element: child };
                    } else {
                        return closest;
                    }
                }, { offset: Number.NEGATIVE_INFINITY }).element;
            }
            
            reordenarProductos() {
                const container = document.getElementById('productsListAdmin');
                const newOrder = [...container.querySelectorAll('.product-item-admin')].map(item => 
                    parseInt(item.dataset.productId)
                );
                
                const productosOrdenados = [];
                newOrder.forEach(id => {
                    const producto = productos.find(p => p.id === id);
                    if (producto) productosOrdenados.push(producto);
                });
                
                productos.forEach(producto => {
                    if (!newOrder.includes(producto.id)) {
                        productosOrdenados.push(producto);
                    }
                });
                
                productos = productosOrdenados;
                this.guardarProductosEnStorage();
                
                if (window.carrito) window.carrito.renderProducts();
                
                this.mostrarMensaje('Productos reordenados', 'success');
            }
            
            editarProducto(id) {
                const producto = productos.find(p => p.id === id);
                if (producto) {
                    this.productosEditando = producto;
                    this.cargarProductoEnFormulario(producto);
                }
            }
            
            clonarProducto(id) {
                const productoOriginal = productos.find(p => p.id === id);
                if (!productoOriginal) return;
                
                const productoClonado = JSON.parse(JSON.stringify(productoOriginal));
                
                productoClonado.id = this.generarId();
                
                productoClonado.nombre = productoOriginal.nombre + " (Copia)";
                
                productos.push(productoClonado);
                
                this.guardarProductosEnStorage();
                
                this.renderProductosAdmin();
                if (window.carrito) {
                    window.carrito.renderProducts();
                }
                
                this.mostrarMensaje(`Producto "${productoOriginal.nombre}" clonado correctamente`, 'success');
            }
            
            cargarProductoEnFormulario(producto) {
                document.getElementById('productName').value = producto.nombre;
                document.getElementById('productCategory').value = producto.categoria;
                document.getElementById('productSubcategory').value = producto.subcategoria;
                document.getElementById('productPrice').value = producto.precioRegular;
                document.getElementById('productDiscountPrice').value = producto.precioDescuento || '';
                document.getElementById('productImage').value = producto.imagen;
                document.getElementById('productDescription').value = producto.descripcion || '';
                
                const imagesText = producto.galeriaPorVariante ? 
                    Object.entries(producto.galeriaPorVariante)
                        .flatMap(([key, urls]) => urls.map(url => `${key}|${url}`))
                        .join('\n') : '';
                document.getElementById('productImages').value = imagesText;
                
                this.especificaciones = producto.especificaciones || [];
                this.renderEspecificaciones();
                
                document.getElementById('productEstado').value = producto.estado || 'normal';
                
                document.getElementById('variantSystemContainer').innerHTML = '';
                this.variantes = [];
                
                if (producto.variantes && producto.variantes.length > 0) {
                    producto.variantes.forEach(variant => {
                        this.agregarVariantField();
                        const lastVariant = document.querySelector('.variant-field:last-child');
                        if (lastVariant) {
                            lastVariant.querySelector('.variant-name').value = variant.nombre;
                            lastVariant.querySelector('.variant-required').value = variant.required;
                            lastVariant.querySelector('.variant-options').value = variant.opciones.join(', ');
                        }
                    });
                }
                
                this.generarSistemaStock(producto);
                
                document.getElementById('saveProductBtn').innerHTML = '<i class="fas fa-save"></i> Actualizar Producto';
                this.switchTab('add');
            }
            
            generarSistemaStock(producto) {
                const container = document.getElementById('stockSystemContainer');
                
                if (!producto.variantes || producto.variantes.length === 0) {
                    container.innerHTML = `
                        <label class="form-label-admin">
                            <i class="fas fa-boxes"></i> Stock General:
                        </label>
                        <input type="number" id="stockGeneral" class="form-input-admin" placeholder="Cantidad en stock" value="${producto.stock && typeof producto.stock === 'number' ? producto.stock : 0}">
                    `;
                    return;
                }
                
                const combinaciones = this.generarCombinaciones(producto.variantes);
                
                let html = `
                    <div class="stock-header">
                        <label class="form-label-admin">
                            <i class="fas fa-boxes"></i> Stock por Combinaciones:
                        </label>
                    </div>
                    <div class="stock-table-container">
                        <table class="stock-table">
                            <thead>
                                <tr>
                `;
                
                producto.variantes.forEach(variant => {
                    html += `<th>${variant.nombre}</th>`;
                });
                html += `<th>Stock</th></tr></thead><tbody>`;
                
                combinaciones.forEach(combinacion => {
                    const key = combinacion.join('|');
                    const stock = producto.stock ? (producto.stock[key] || 0) : 0;
                    
                    html += `<tr>`;
                    combinacion.forEach(valor => {
                        html += `<td>${valor}</td>`;
                    });
                    html += `<td><input type="number" class="stock-input" data-key="${key}" value="${stock}"></td></tr>`;
                });
                
                html += `</tbody></table></div>`;
                container.innerHTML = html;
            }
            
            generarCombinaciones(variantes, index = 0, current = [], combinaciones = []) {
                if (index === variantes.length) {
                    combinaciones.push([...current]);
                    return combinaciones;
                }
                
                const variant = variantes[index];
                variant.opciones.forEach(opcion => {
                    current.push(opcion);
                    this.generarCombinaciones(variantes, index + 1, current, combinaciones);
                    current.pop();
                });
                
                return combinaciones;
            }
            
            eliminarProducto(id) {
                if (confirm('¿Estás seguro de que quieres eliminar este producto?')) {
                    const index = productos.findIndex(p => p.id === id);
                    if (index !== -1) {
                        productos.splice(index, 1);
                        this.guardarProductosEnStorage();
                        
                        if (window.carrito) window.carrito.renderProducts();
                        
                        this.renderProductosAdmin();
                        this.mostrarMensaje('Producto eliminado', 'success');
                    }
                }
            }
            
            renderCategoriasSelect() {
                const select = document.getElementById('productCategory');
                select.innerHTML = '<option value="">Selecciona categoría</option>';
                
                categorias.filter(c => c.id !== 'todo').forEach(categoria => {
                    const option = document.createElement('option');
                    option.value = categoria.id;
                    option.textContent = categoria.nombre;
                    select.appendChild(option);
                });
            }
            
            renderCategoriasAdmin() {
                const container = document.getElementById('categoriesListAdmin');
                
                if (categorias.length === 0) {
                    container.innerHTML = `
                        <div class="status-message status-info">
                            <i class="fas fa-info-circle"></i>
                            <span>No hay categorías. Agrega algunas desde el formulario.</span>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = categorias.filter(c => c.id !== 'todo').sort((a, b) => a.orden - b.orden).map(categoria => {
                    const productosEnCategoria = productos.filter(p => p.categoria === categoria.id).length;
                    
                    return `
                        <div class="category-item-admin" data-category-id="${categoria.id}" draggable="true">
                            <div class="category-info-admin">
                                <div class="category-icon-admin" style="background: ${categoria.color};">
                                    <i class="fas ${categoria.icono}"></i>
                                </div>
                                <div class="category-details-admin">
                                    <div class="category-name-admin">${categoria.nombre}</div>
                                    <div class="category-stats-admin">
                                        <span class="category-product-count">${productosEnCategoria} productos</span>
                                        <span class="category-color" style="background: ${categoria.color};"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="category-actions-admin">
                                <button class="category-action-btn edit-category-btn" onclick="admin.editarCategoria('${categoria.id}')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="category-action-btn delete-category-btn" onclick="admin.eliminarCategoria('${categoria.id}')" ${productosEnCategoria > 0 ? 'disabled' : ''}>
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
                
                this.setupCategoriesDragAndDrop();
            }
            
            setupCategoriesDragAndDrop() {
                const container = document.getElementById('categoriesListAdmin');
                if (!container) return;
                
                let draggingItem = null;
                
                container.querySelectorAll('.category-item-admin').forEach(item => {
                    item.addEventListener('dragstart', (e) => {
                        draggingItem = e.currentTarget;
                        e.currentTarget.classList.add('dragging');
                    });
                    
                    item.addEventListener('dragend', () => {
                        draggingItem.classList.remove('dragging');
                        draggingItem = null;
                    });
                });
                
                container.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    const afterElement = this.getDragAfterElement(container, e.clientY);
                    
                    if (afterElement == null) {
                        container.appendChild(draggingItem);
                    } else {
                        container.insertBefore(draggingItem, afterElement);
                    }
                });
                
                container.addEventListener('drop', () => {
                    this.reordenarCategorias();
                });
            }
            
            reordenarCategorias() {
                const container = document.getElementById('categoriesListAdmin');
                const newOrder = [...container.querySelectorAll('.category-item-admin')].map(item => 
                    item.dataset.categoryId
                );
                
                const categoriasFiltradas = categorias.filter(c => c.id !== 'todo');
                
                newOrder.forEach((catId, index) => {
                    const categoria = categorias.find(c => c.id === catId);
                    if (categoria) categoria.orden = index + 1;
                });
                
                categorias.sort((a, b) => {
                    if (a.id === 'todo') return -1;
                    if (b.id === 'todo') return 1;
                    return a.orden - b.orden;
                });
                
                this.guardarCategoriasEnStorage();
                
                this.renderCategoriasSelect();
                this.renderCategoriasAdmin();
                
                if (window.carrito) {
                    window.carrito.renderCategoryFilters();
                    window.carrito.renderCategories();
                }
                
                this.mostrarMensaje('Categorías reordenadas', 'success');
            }
            
            agregarCategoria() {
                const nombre = document.getElementById('newCategoryName').value.trim();
                const color = document.getElementById('newCategoryColor').value;
                const icono = document.getElementById('newCategoryIcon').value.trim() || 'fa-tag';
                
                if (!nombre) {
                    this.mostrarMensaje('Ingresa un nombre para la categoría', 'error');
                    return;
                }
                
                if (categorias.some(c => c.nombre.toLowerCase() === nombre.toLowerCase())) {
                    this.mostrarMensaje('Ya existe una categoría con ese nombre', 'error');
                    return;
                }
                
                const id = this.crearSlug(nombre);
                if (categorias.some(c => c.id === id)) {
                    this.mostrarMensaje('Ya existe una categoría con un nombre similar', 'error');
                    return;
                }
                
                const nuevaCategoria = {
                    id: id,
                    nombre: nombre,
                    color: color,
                    icono: icono,
                    orden: categorias.filter(c => c.id !== 'todo').length + 1
                };
                
                categorias.push(nuevaCategoria);
                this.guardarCategoriasEnStorage();
                
                this.renderCategoriasSelect();
                this.renderCategoriasAdmin();
                
                if (window.carrito) {
                    window.carrito.renderCategoryFilters();
                    window.carrito.renderCategories();
                }
                
                this.resetCategoriaForm();
                this.mostrarMensaje('Categoría agregada', 'success');
            }
            
            editarCategoria(categoriaId) {
                const categoria = categorias.find(c => c.id === categoriaId);
                if (!categoria) return;
                
                this.categoriaEditando = categoria;
                
                document.getElementById('newCategoryName').value = categoria.nombre;
                document.getElementById('newCategoryColor').value = categoria.color;
                document.getElementById('newCategoryIcon').value = categoria.icono;
                
                document.getElementById('addCategoryBtn').innerHTML = '<i class="fas fa-save"></i> Actualizar Categoría';
                document.getElementById('newCategoryName').focus();
                
                this.switchTab('categories');
            }
            
            eliminarCategoria(categoriaId) {
                const categoria = categorias.find(c => c.id === categoriaId);
                if (!categoria) return;
                
                const productosEnCategoria = productos.filter(p => p.categoria === categoriaId);
                
                if (productosEnCategoria.length > 0) {
                    this.mostrarMensaje(`No se puede eliminar porque tiene ${productosEnCategoria.length} productos`, 'error');
                    return;
                }
                
                if (confirm(`¿Eliminar categoría "${categoria.nombre}"?`)) {
                    categorias = categorias.filter(c => c.id !== categoriaId);
                    
                    categorias.filter(c => c.id !== 'todo').forEach((c, index) => {
                        c.orden = index + 1;
                    });
                    
                    this.guardarCategoriasEnStorage();
                    this.renderCategoriasSelect();
                    this.renderCategoriasAdmin();
                    
                    if (window.carrito) {
                        window.carrito.renderCategoryFilters();
                        window.carrito.renderCategories();
                    }
                    
                    this.mostrarMensaje('Categoría eliminada', 'success');
                }
            }
            
            resetCategoriaForm() {
                document.getElementById('newCategoryName').value = '';
                document.getElementById('newCategoryColor').value = '#D4AF37';
                document.getElementById('newCategoryIcon').value = 'fa-tag';
                this.categoriaEditando = null;
                
                document.getElementById('addCategoryBtn').innerHTML = '<i class="fas fa-plus"></i> Agregar Nueva Categoría';
                document.getElementById('categoriesMessage').style.display = 'none';
            }
            
            guardarCategoriasEnStorage() {
                localStorage.setItem('modastyle_categorias', JSON.stringify(categorias));
            }
            
            crearSlug(texto) {
                return texto
                    .toLowerCase()
                    .normalize('NFD')
                    .replace(/[\u0300-\u036f]/g, '')
                    .replace(/[^a-z0-9]+/g, '-')
                    .replace(/^-+|-+$/g, '');
            }
            
            loadSectionConfig() {
                document.getElementById('sectionTitle').value = sectionConfig.title;
                document.getElementById('sectionSubtitle').value = sectionConfig.subtitle;
            }
            
            renderSectionCategories() {
                const container = document.getElementById('sectionCategoriesList');
                
                if (sectionCategories.length === 0) {
                    container.innerHTML = `
                        <div class="status-message status-info">
                            <i class="fas fa-info-circle"></i>
                            <span>No hay categorías en esta sección. Agrega algunas desde el botón "Agregar Categoría".</span>
                        </div>
                    `;
                    return;
                }
                
                const sortedCategories = [...sectionCategories].sort((a, b) => a.order - b.order);
                
                container.innerHTML = sortedCategories.map((cat, index) => `
                    <div class="editor-category-item" data-category-id="${cat.id}" draggable="true">
                        <div class="editor-category-header">
                            <div class="editor-category-title">
                                <i class="fas fa-tag"></i> ${cat.name}
                                <span class="color-preview" style="background: ${cat.buttonColor};"></span>
                            </div>
                            <div class="editor-category-actions">
                                <button class="category-action-btn edit-category-btn" onclick="admin.editarSectionCategory(${cat.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="category-action-btn delete-category-btn" onclick="admin.eliminarSectionCategory(${cat.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="editor-category-content">
                            <div class="editor-category-preview">
                                <img src="${cat.image}" alt="${cat.name}">
                            </div>
                            <div class="editor-category-fields">
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-font"></i> Nombre:
                                    </label>
                                    <input type="text" class="form-input-admin" value="${cat.name}" readonly>
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-align-left"></i> Descripción:
                                    </label>
                                    <input type="text" class="form-input-admin" value="${cat.description}" readonly>
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-link"></i> Acción:
                                    </label>
                                    <input type="text" class="form-input-admin" value="${cat.action}" readonly>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                this.setupSectionCategoriesDragAndDrop();
            }
            
            setupSectionCategoriesDragAndDrop() {
                const container = document.getElementById('sectionCategoriesList');
                if (!container) return;
                
                let draggingItem = null;
                
                container.querySelectorAll('.editor-category-item').forEach(item => {
                    item.addEventListener('dragstart', (e) => {
                        draggingItem = e.currentTarget;
                        e.currentTarget.classList.add('dragging');
                    });
                    
                    item.addEventListener('dragend', () => {
                        draggingItem.classList.remove('dragging');
                        draggingItem = null;
                    });
                });
                
                container.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    const afterElement = this.getDragAfterElement(container, e.clientY);
                    
                    if (afterElement == null) {
                        container.appendChild(draggingItem);
                    } else {
                        container.insertBefore(draggingItem, afterElement);
                    }
                });
                
                container.addEventListener('drop', () => {
                    this.reordenarSectionCategories();
                });
            }
            
            reordenarSectionCategories() {
                const container = document.getElementById('sectionCategoriesList');
                const newOrder = [...container.querySelectorAll('.editor-category-item')].map(item => 
                    parseInt(item.dataset.categoryId)
                );
                
                const categoriasOrdenadas = [];
                newOrder.forEach(id => {
                    const categoria = sectionCategories.find(c => c.id === id);
                    if (categoria) categoriasOrdenadas.push(categoria);
                });
                
                sectionCategories.forEach(categoria => {
                    if (!newOrder.includes(categoria.id)) {
                        categoriasOrdenadas.push(categoria);
                    }
                });
                
                categoriasOrdenadas.forEach((cat, index) => {
                    cat.order = index + 1;
                });
                
                sectionCategories = categoriasOrdenadas;
                this.guardarSectionCategoriesEnStorage();
                
                if (window.carrito) window.carrito.updateSectionCategories();
                
                this.mostrarEditorMensaje('Categorías reordenadas', 'success');
            }
            
            addSectionCategory() {
                if (this.sectionCategoryEditando) {
                    this.actualizarSectionCategory();
                    return;
                }
                
                const id = sectionCategories.length > 0 ? Math.max(...sectionCategories.map(c => c.id)) + 1 : 1;
                const nuevaCategoria = {
                    id: id,
                    name: `Nueva Categoría ${id}`,
                    description: "Descripción de la categoría",
                    image: "https://images.unsplash.com/photo-1556821840-3a63f95609a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
                    buttonColor: "#8B5CF6",
                    action: "carrito.filterProducts('todo')",
                    order: sectionCategories.length + 1
                };
                
                sectionCategories.push(nuevaCategoria);
                this.guardarSectionCategoriesEnStorage();
                this.renderSectionCategories();
                
                if (window.carrito) window.carrito.updateSectionCategories();
                
                this.mostrarEditorMensaje('Categoría agregada', 'success');
                this.editarSectionCategory(id);
            }
            
            editarSectionCategory(categoryId) {
                const categoria = sectionCategories.find(c => c.id === categoryId);
                if (!categoria) return;
                
                this.sectionCategoryEditando = categoria;
                
                const container = document.getElementById('sectionCategoriesList');
                const categoryItem = container.querySelector(`[data-category-id="${categoryId}"]`);
                
                if (categoryItem) {
                    categoryItem.innerHTML = `
                        <div class="editor-category-header">
                            <div class="editor-category-title">
                                <i class="fas fa-edit"></i> Editando: ${categoria.name}
                            </div>
                            <div class="editor-category-actions">
                                <button class="category-action-btn edit-category-btn" style="background: linear-gradient(135deg, #4CAF50, #45a049);" onclick="admin.guardarSectionCategoryEdit(${categoryId})">
                                    <i class="fas fa-save"></i>
                                </button>
                                <button class="category-action-btn delete-category-btn" onclick="admin.cancelarSectionCategoryEdit(${categoryId})">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div class="editor-category-content">
                            <div class="editor-category-preview">
                                <img src="${categoria.image}" alt="${categoria.name}" id="sectionCategoryImagePreview">
                            </div>
                            <div class="editor-category-fields">
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-font"></i> Nombre:
                                    </label>
                                    <input type="text" id="sectionCategoryName" class="form-input-admin" value="${categoria.name}" placeholder="Nombre de la categoría">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-align-left"></i> Descripción:
                                    </label>
                                    <input type="text" id="sectionCategoryDescription" class="form-input-admin" value="${categoria.description}" placeholder="Descripción breve">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-image"></i> URL de Imagen:
                                    </label>
                                    <input type="text" id="sectionCategoryImage" class="form-input-admin" value="${categoria.image}" placeholder="URL de la imagen" oninput="admin.actualizarPreviewImagen('${categoryId}')">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-palette"></i> Color del Botón:
                                    </label>
                                    <input type="color" id="sectionCategoryColor" class="form-input-admin" style="height: 38px; padding: 4px;" value="${categoria.buttonColor}">
                                </div>
                                <div class="form-group-admin">
                                    <label class="form-label-admin">
                                        <i class="fas fa-link"></i> Acción (JavaScript):
                                    </label>
                                    <input type="text" id="sectionCategoryAction" class="form-input-admin" value="${categoria.action}" placeholder="Ej: carrito.filterProducts('hombre')">
                                    <div style="font-size: 0.7rem; color: var(--text-light); margin-top: 4px;">
                                        <i class="fas fa-info-circle"></i> Código JavaScript que se ejecuta al hacer clic
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    categoryItem.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }
            }
            
            actualizarPreviewImagen(categoryId) {
                const imageUrl = document.getElementById('sectionCategoryImage')?.value;
                const preview = document.getElementById('sectionCategoryImagePreview');
                if (preview && imageUrl) preview.src = imageUrl;
            }
            
            guardarSectionCategoryEdit(categoryId) {
                const categoria = sectionCategories.find(c => c.id === categoryId);
                if (!categoria) return;
                
                const name = document.getElementById('sectionCategoryName')?.value.trim();
                const description = document.getElementById('sectionCategoryDescription')?.value.trim();
                const image = document.getElementById('sectionCategoryImage')?.value.trim();
                const buttonColor = document.getElementById('sectionCategoryColor')?.value;
                const action = document.getElementById('sectionCategoryAction')?.value.trim();
                
                if (!name || !description || !image || !action) {
                    this.mostrarEditorMensaje('Por favor completa todos los campos', 'error');
                    return;
                }
                
                categoria.name = name;
                categoria.description = description;
                categoria.image = image;
                categoria.buttonColor = buttonColor;
                categoria.action = action;
                
                this.guardarSectionCategoriesEnStorage();
                this.renderSectionCategories();
                
                if (window.carrito) window.carrito.updateSectionCategories();
                
                this.sectionCategoryEditando = null;
                this.mostrarEditorMensaje('Categoría actualizada', 'success');
            }
            
            cancelarSectionCategoryEdit(categoryId) {
                this.sectionCategoryEditando = null;
                this.renderSectionCategories();
            }
            
            eliminarSectionCategory(categoryId) {
                const categoria = sectionCategories.find(c => c.id === categoryId);
                if (!categoria) return;
                
                if (confirm(`¿Eliminar categoría "${categoria.name}"?`)) {
                    sectionCategories = sectionCategories.filter(c => c.id !== categoryId);
                    
                    sectionCategories.forEach((cat, index) => {
                        cat.order = index + 1;
                    });
                    
                    this.guardarSectionCategoriesEnStorage();
                    this.renderSectionCategories();
                    
                    if (window.carrito) window.carrito.updateSectionCategories();
                    
                    this.mostrarEditorMensaje('Categoría eliminada', 'success');
                }
            }
            
            actualizarSectionCategory() {
                this.mostrarEditorMensaje('Por favor, guarda los cambios primero', 'info');
            }
            
            resetSectionCategoryForm() {
                this.sectionCategoryEditando = null;
                document.getElementById('editorMessage').style.display = 'none';
            }
            
            saveSectionConfig() {
                const title = document.getElementById('sectionTitle').value.trim();
                const subtitle = document.getElementById('sectionSubtitle').value.trim();
                
                if (!title) {
                    this.mostrarEditorMensaje('El título de la sección es requerido', 'error');
                    return;
                }
                
                sectionConfig.title = title;
                sectionConfig.subtitle = subtitle;
                
                this.guardarSectionConfigEnStorage();
                
                if (window.carrito) window.carrito.updateSectionCategories();
                
                this.mostrarEditorMensaje('Configuración de sección guardada', 'success');
            }
            
            guardarSectionCategoriesEnStorage() {
                localStorage.setItem('modastyle_section_categories', JSON.stringify(sectionCategories));
            }
            
            guardarSectionConfigEnStorage() {
                localStorage.setItem('modastyle_section_config', JSON.stringify(sectionConfig));
            }
            
            mostrarEditorMensaje(texto, tipo) {
                const mensaje = document.getElementById('editorMessage');
                mensaje.className = `status-message status-${tipo}`;
                mensaje.innerHTML = `<i class="fas fa-${tipo === 'success' ? 'check' : 'exclamation'}-circle"></i><span>${texto}</span>`;
                mensaje.style.display = 'flex';
                
                setTimeout(() => {
                    mensaje.style.display = 'none';
                }, 3000);
            }
            
            darkenColor(color) {
                if (color.startsWith('#')) {
                    let r = parseInt(color.slice(1, 3), 16);
                    let g = parseInt(color.slice(3, 5), 16);
                    let b = parseInt(color.slice(5, 7), 16);
                    
                    r = Math.floor(r * 0.8);
                    g = Math.floor(g * 0.8);
                    b = Math.floor(b * 0.8);
                    
                    return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
                }
                return color;
            }
            
            // ==================== FUNCIONES DE CONFIGURACIÓN GENERAL ====================
            cargarConfiguracionGeneral() {
                const stored = localStorage.getItem('modastyle_general_config');
                if (stored) {
                    try {
                        generalConfig = JSON.parse(stored);
                    } catch (e) {}
                }
                
                // Cargar valores en los campos
                document.getElementById('shippingFreeMinimum').value = generalConfig.shipping.freeMinimum;
                document.getElementById('shippingCost').value = generalConfig.shipping.cost;
                document.getElementById('shippingTime').value = generalConfig.shipping.estimatedTime;
                
                document.getElementById('contactPhone').value = generalConfig.contact.phone;
                document.getElementById('contactWhatsapp').value = generalConfig.contact.whatsapp;
                document.getElementById('contactEmail').value = generalConfig.contact.email;
                document.getElementById('contactAddress').value = generalConfig.contact.address;
                document.getElementById('contactHours').value = generalConfig.contact.hours;
                
                document.getElementById('storeName').value = generalConfig.store.name;
                document.getElementById('storeSlogan').value = generalConfig.store.slogan;
                document.getElementById('storeCurrency').value = generalConfig.store.currency;
                document.getElementById('storeLanguage').value = generalConfig.store.language;
                document.getElementById('storeMaintenance').checked = generalConfig.store.maintenance;
                document.getElementById('storeTrackingNotifications').checked = generalConfig.store.trackingNotifications;
                
                this.renderSocialMedia();
                this.actualizarFooter();
            }
            
            guardarConfiguracionEnvios() {
                generalConfig.shipping.freeMinimum = parseFloat(document.getElementById('shippingFreeMinimum').value) || 300;
                generalConfig.shipping.cost = parseFloat(document.getElementById('shippingCost').value) || 50;
                generalConfig.shipping.estimatedTime = document.getElementById('shippingTime').value.trim() || '24-48 horas';
                
                this.guardarConfiguracionGeneral();
                
                if (window.carrito) {
                    window.carrito.FREE_SHIPPING_MINIMUM = generalConfig.shipping.freeMinimum;
                    window.carrito.SHIPPING_COST = generalConfig.shipping.cost;
                    window.carrito.updateCartSummary();
                }
                
                this.mostrarMensajeGeneral('Configuración de envíos guardada', 'success');
            }
            
            guardarConfiguracionContacto() {
                generalConfig.contact.phone = document.getElementById('contactPhone').value.trim() || '(55) 1234-5678';
                generalConfig.contact.whatsapp = document.getElementById('contactWhatsapp').value.trim() || '5567416073';
                generalConfig.contact.email = document.getElementById('contactEmail').value.trim() || 'info@modastyle.com';
                generalConfig.contact.address = document.getElementById('contactAddress').value.trim() || 'Ciudad de México';
                generalConfig.contact.hours = document.getElementById('contactHours').value.trim() || 'Lunes a Viernes 9:00 - 18:00';
                
                this.guardarConfiguracionGeneral();
                this.actualizarFooter();
                
                this.mostrarMensajeGeneral('Información de contacto guardada', 'success');
            }
            
            renderSocialMedia() {
                const container = document.getElementById('socialMediaList');
                if (!container) return;
                
                const activeSocial = generalConfig.socialMedia.filter(s => s.active !== false);
                
                if (activeSocial.length === 0) {
                    container.innerHTML = `
                        <div class="status-message status-info">
                            <i class="fas fa-info-circle"></i>
                            <span>No hay redes sociales configuradas. Agrega una desde el botón "Agregar Red Social".</span>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = activeSocial.map(social => {
                    const iconMap = {
                        'facebook': 'fa-facebook',
                        'instagram': 'fa-instagram',
                        'twitter': 'fa-twitter',
                        'tiktok': 'fa-tiktok',
                        'youtube': 'fa-youtube',
                        'pinterest': 'fa-pinterest',
                        'linkedin': 'fa-linkedin',
                        'whatsapp': 'fa-whatsapp',
                        'telegram': 'fa-telegram'
                    };
                    
                    const iconClass = social.icon || iconMap[social.name] || 'fa-share-alt';
                    const displayName = social.customName || this.capitalizeFirst(social.name);
                    
                    return `
                        <div class="general-social-item">
                            <div class="general-social-icon" style="background: ${social.color || '#1877f2'};">
                                <i class="fab ${iconClass}"></i>
                            </div>
                            <div class="general-social-info">
                                <div class="general-social-name">${displayName}</div>
                                <div class="general-social-url">${social.url}</div>
                            </div>
                            <div class="general-social-actions">
                                <button class="general-btn-small general-btn-edit" onclick="admin.editarRedSocial('${social.id}')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="general-btn-small general-btn-delete" onclick="admin.eliminarRedSocial('${social.id}')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }
            
            agregarRedSocial() {
                this.editingSocialId = null;
                document.getElementById('socialMediaName').value = 'facebook';
                document.getElementById('socialMediaColor').value = '#1877f2';
                document.getElementById('socialMediaUrl').value = 'https://facebook.com/';
                document.getElementById('socialMediaCustomName').value = '';
                document.getElementById('socialMediaIcon').value = '';
                document.getElementById('editingSocialId').value = '';
                document.getElementById('socialMediaOtherName').style.display = 'none';
                document.getElementById('socialMediaForm').style.display = 'block';
            }
            
            editarRedSocial(socialId) {
                const social = generalConfig.socialMedia.find(s => s.id === socialId);
                if (!social) return;
                
                this.editingSocialId = socialId;
                document.getElementById('socialMediaName').value = social.name;
                document.getElementById('socialMediaColor').value = social.color || '#1877f2';
                document.getElementById('socialMediaUrl').value = social.url;
                document.getElementById('socialMediaCustomName').value = social.customName || '';
                document.getElementById('socialMediaIcon').value = social.icon || '';
                document.getElementById('editingSocialId').value = socialId;
                
                document.getElementById('socialMediaOtherName').style.display = social.name === 'otro' ? 'block' : 'none';
                document.getElementById('socialMediaForm').style.display = 'block';
            }
            
            guardarRedSocial() {
                const name = document.getElementById('socialMediaName').value;
                const color = document.getElementById('socialMediaColor').value;
                const url = document.getElementById('socialMediaUrl').value.trim();
                const customName = document.getElementById('socialMediaCustomName').value.trim();
                const icon = document.getElementById('socialMediaIcon').value.trim();
                const editingId = document.getElementById('editingSocialId').value;
                
                if (!url) {
                    this.mostrarMensajeGeneral('La URL es requerida', 'error');
                    return;
                }
                
                const iconMap = {
                    'facebook': 'fa-facebook',
                    'instagram': 'fa-instagram',
                    'twitter': 'fa-twitter',
                    'tiktok': 'fa-tiktok',
                    'youtube': 'fa-youtube',
                    'pinterest': 'fa-pinterest',
                    'linkedin': 'fa-linkedin',
                    'whatsapp': 'fa-whatsapp',
                    'telegram': 'fa-telegram'
                };
                
                const finalIcon = icon || iconMap[name] || 'fa-share-alt';
                
                if (editingId) {
                    const social = generalConfig.socialMedia.find(s => s.id === editingId);
                    if (social) {
                        social.name = name;
                        social.color = color;
                        social.url = url;
                        social.customName = customName || null;
                        social.icon = finalIcon;
                    }
                } else {
                    const newSocial = {
                        id: 'social' + Date.now(),
                        name: name,
                        color: color,
                        url: url,
                        customName: customName || null,
                        icon: finalIcon,
                        active: true
                    };
                    generalConfig.socialMedia.push(newSocial);
                }
                
                this.guardarConfiguracionGeneral();
                this.renderSocialMedia();
                this.actualizarFooter();
                this.cancelarRedSocial();
                this.mostrarMensajeGeneral('Red social guardada', 'success');
            }
            
            eliminarRedSocial(socialId) {
                if (confirm('¿Eliminar esta red social?')) {
                    generalConfig.socialMedia = generalConfig.socialMedia.filter(s => s.id !== socialId);
                    this.guardarConfiguracionGeneral();
                    this.renderSocialMedia();
                    this.actualizarFooter();
                    this.mostrarMensajeGeneral('Red social eliminada', 'success');
                }
            }
            
            cancelarRedSocial() {
                document.getElementById('socialMediaForm').style.display = 'none';
                this.editingSocialId = null;
            }
            
            guardarOtrosAjustes() {
                generalConfig.store.name = document.getElementById('storeName').value.trim() || 'ModaStyle';
                generalConfig.store.slogan = document.getElementById('storeSlogan').value.trim() || 'Tienda de Ropa, Accesorios y Hogar';
                generalConfig.store.currency = document.getElementById('storeCurrency').value;
                generalConfig.store.language = document.getElementById('storeLanguage').value;
                generalConfig.store.maintenance = document.getElementById('storeMaintenance').checked;
                generalConfig.store.trackingNotifications = document.getElementById('storeTrackingNotifications').checked;
                
                this.guardarConfiguracionGeneral();
                this.actualizarFooter();
                
                this.mostrarMensajeGeneral('Otros ajustes guardados', 'success');
            }
            
            guardarTodaConfiguracionGeneral() {
                this.guardarConfiguracionEnvios();
                this.guardarConfiguracionContacto();
                this.guardarOtrosAjustes();
                
                this.mostrarMensajeGeneral('Toda la configuración ha sido guardada', 'success');
            }
            
            resetearConfiguracionGeneral() {
                if (confirm('¿Restablecer todos los valores de configuración a los valores por defecto?')) {
                    generalConfig = {
                        shipping: { freeMinimum: 300, cost: 50, estimatedTime: "24-48 horas" },
                        contact: {
                            phone: "(55) 1234-5678",
                            whatsapp: "5567416073",
                            email: "info@modastyle.com",
                            address: "Ciudad de México",
                            hours: "Lunes a Viernes 9:00 - 18:00"
                        },
                        socialMedia: [
                            {id:"fb1", name:"facebook", url:"https://facebook.com/", icon:"fa-facebook", color:"#1877f2", active:true},
                            {id:"ig1", name:"instagram", url:"https://instagram.com/", icon:"fa-instagram", color:"#e4405f", active:true}
                        ],
                        store: {
                            name: "ModaStyle",
                            slogan: "Tienda de Ropa, Accesorios y Hogar",
                            currency: "MXN",
                            language: "es",
                            maintenance: false,
                            trackingNotifications: true
                        }
                    };
                    
                    this.guardarConfiguracionGeneral();
                    this.cargarConfiguracionGeneral();
                    this.renderSocialMedia();
                    this.actualizarFooter();
                    
                    if (window.carrito) {
                        window.carrito.FREE_SHIPPING_MINIMUM = generalConfig.shipping.freeMinimum;
                        window.carrito.SHIPPING_COST = generalConfig.shipping.cost;
                        window.carrito.updateCartSummary();
                    }
                    
                    this.mostrarMensajeGeneral('Configuración restablecida a valores por defecto', 'success');
                }
            }
            
            guardarConfiguracionGeneral() {
                localStorage.setItem('modastyle_general_config', JSON.stringify(generalConfig));
            }
            
            mostrarMensajeGeneral(texto, tipo) {
                const mensaje = document.getElementById('generalMessage');
                mensaje.className = `status-message status-${tipo}`;
                mensaje.innerHTML = `<i class="fas fa-${tipo === 'success' ? 'check' : 'exclamation'}-circle"></i><span>${texto}</span>`;
                mensaje.style.display = 'flex';
                
                setTimeout(() => {
                    mensaje.style.display = 'none';
                }, 3000);
            }
            
            actualizarFooter() {
                document.getElementById('footerStoreName').textContent = generalConfig.store.name;
                document.getElementById('footerStoreDescription').textContent = `${generalConfig.store.name} - ${generalConfig.store.slogan}`;
                
                document.getElementById('footerPhone').innerHTML = `<i class="fas fa-phone"></i> ${generalConfig.contact.phone}`;
                document.getElementById('footerEmail').innerHTML = `<i class="fas fa-envelope"></i> ${generalConfig.contact.email}`;
                document.getElementById('footerAddress').innerHTML = `<i class="fas fa-map-marker-alt"></i> ${generalConfig.contact.address}`;
                document.getElementById('footerHours').innerHTML = `<i class="fas fa-clock"></i> ${generalConfig.contact.hours}`;
                
                const year = new Date().getFullYear();
                document.getElementById('footerCopyright').textContent = `© ${year} ${generalConfig.store.name} - ${generalConfig.store.slogan}. Todos los derechos reservados.`;
                
                document.getElementById('storeNameDisplay').textContent = generalConfig.store.name;
                
                const socialFooter = document.getElementById('socialMediaFooter');
                if (socialFooter) {
                    const activeSocial = generalConfig.socialMedia.filter(s => s.active !== false);
                    
                    if (activeSocial.length > 0) {
                        socialFooter.innerHTML = activeSocial.map(social => {
                            const iconMap = {
                                'facebook': 'fa-facebook',
                                'instagram': 'fa-instagram',
                                'twitter': 'fa-twitter',
                                'tiktok': 'fa-tiktok',
                                'youtube': 'fa-youtube',
                                'pinterest': 'fa-pinterest',
                                'linkedin': 'fa-linkedin',
                                'whatsapp': 'fa-whatsapp',
                                'telegram': 'fa-telegram'
                            };
                            
                            const iconClass = social.icon || iconMap[social.name] || 'fa-share-alt';
                            
                            return `
                                <a href="${social.url}" target="_blank" style="display: inline-block; width: 30px; height: 30px; border-radius: 50%; background: ${social.color || '#1877f2'}; color: white; display: flex; align-items: center; justify-content: center; transition: var(--transition);" title="${social.customName || this.capitalizeFirst(social.name)}">
                                    <i class="fab ${iconClass}"></i>
                                </a>
                            `;
                        }).join('');
                    } else {
                        socialFooter.innerHTML = '';
                    }
                }
            }
            
            capitalizeFirst(string) {
                return string.charAt(0).toUpperCase() + string.slice(1);
            }
            
            exportarDatos() {
                const datos = {
                    productos: productos,
                    categorias: categorias,
                    sectionCategories: sectionCategories,
                    sectionConfig: sectionConfig,
                    cuponesDisponibles: cuponesDisponibles,
                    cuponesUsados: cuponesUsados,
                    cuponesExpirados: cuponesExpirados,
                    bannersDisponibles: bannersDisponibles,
                    deliveryConfig: deliveryConfig,
                    generalConfig: generalConfig,
                    version: CURRENT_VERSION,
                    fechaExportacion: new Date().toISOString()
                };
                
                const datosJson = JSON.stringify(datos, null, 2);
                const blob = new Blob([datosJson], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `modastyle_backup_${new Date().toISOString().slice(0,10)}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                
                URL.revokeObjectURL(url);
                
                this.mostrarMensaje('Datos exportados correctamente', 'success');
            }
            
            exportarDatosComprimidos() {
                const datos = {
                    productos: this.comprimirArray(productos, ['id', 'nombre', 'precioRegular', 'precioDescuento', 'categoria', 'subcategoria', 'estado']),
                    categorias: this.comprimirArray(categorias, ['id', 'nombre', 'color', 'icono']),
                    cupones: this.comprimirArray(cuponesDisponibles, ['id', 'codigo', 'tipo', 'valor', 'minimo', 'descripcion', 'fechaExpiracion']),
                    banners: this.comprimirArray(bannersDisponibles, ['id', 'titulo', 'subtitulo', 'tipo', 'buttonText', 'actionType', 'actionValue', 'expiryDate']),
                    delivery: {
                        points: this.comprimirArray(deliveryConfig.points, ['id', 'name', 'address', 'map']),
                        times: deliveryConfig.times,
                        transfer: deliveryConfig.transfer
                    },
                    general: {
                        shipping: generalConfig.shipping,
                        contact: generalConfig.contact,
                        socialMedia: this.comprimirArray(generalConfig.socialMedia, ['id', 'name', 'url', 'color', 'icon', 'customName']),
                        store: generalConfig.store
                    },
                    version: CURRENT_VERSION,
                    fechaExportacion: new Date().toISOString().slice(0,10)
                };
                
                const datosJson = JSON.stringify(datos);
                const blob = new Blob([datosJson], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `modastyle_backup_min_${new Date().toISOString().slice(0,10)}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                
                URL.revokeObjectURL(url);
                
                this.mostrarMensaje('Datos comprimidos exportados', 'success');
            }
            
            comprimirArray(array, campos) {
                return array.map(item => {
                    const comprimido = {};
                    campos.forEach(campo => {
                        if (item[campo] !== undefined) {
                            comprimido[campo] = item[campo];
                        }
                    });
                    return comprimido;
                });
            }
            
            importarDatos() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json,application/json';
                
                input.onchange = (e) => {
                    const file = e.target.files[0];
                    if (!file) return;
                    
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        try {
                            const datos = JSON.parse(event.target.result);
                            
                            if (!datos.productos || !datos.categorias || !datos.deliveryConfig) {
                                throw new Error('El archivo no tiene el formato correcto');
                            }
                            
                            if (confirm(`¿Estás seguro de importar estos datos?\n\nSe reemplazarán:\n- ${datos.productos.length} productos\n- ${datos.categorias.length} categorías\n- ${datos.cupones?.length || 0} cupones\n- ${datos.banners?.length || 0} banners`)) {
                                
                                productos = datos.productos || [];
                                categorias = datos.categorias || [];
                                sectionCategories = datos.sectionCategories || [];
                                sectionConfig = datos.sectionConfig || { title: "Nuestras Categorías", subtitle: "Explora nuestra variedad de productos organizados por categorías" };
                                cuponesDisponibles = datos.cuponesDisponibles || [];
                                cuponesUsados = datos.cuponesUsados || [];
                                cuponesExpirados = datos.cuponesExpirados || [];
                                bannersDisponibles = datos.bannersDisponibles || [];
                                deliveryConfig = datos.deliveryConfig || { points: [], times: [], transfer: { nombre: "Saul Flores", banco: "STP", clabe: "721180100001101243" } };
                                generalConfig = datos.generalConfig || generalConfig;
                                
                                localStorage.setItem('modastyle_productos', JSON.stringify(productos));
                                localStorage.setItem('modastyle_categorias', JSON.stringify(categorias));
                                localStorage.setItem('modastyle_section_categories', JSON.stringify(sectionCategories));
                                localStorage.setItem('modastyle_section_config', JSON.stringify(sectionConfig));
                                localStorage.setItem('modastyle_cupones', JSON.stringify(cuponesDisponibles));
                                localStorage.setItem('modastyle_cupones_usados', JSON.stringify(cuponesUsados));
                                localStorage.setItem('modastyle_cupones_expirados', JSON.stringify(cuponesExpirados));
                                localStorage.setItem('modastyle_banners', JSON.stringify(bannersDisponibles));
                                localStorage.setItem('modastyle_delivery_config', JSON.stringify(deliveryConfig));
                                localStorage.setItem('modastyle_general_config', JSON.stringify(generalConfig));
                                
                                if (window.carrito) {
                                    window.carrito.renderProducts();
                                    window.carrito.renderCategoryFilters();
                                    window.carrito.renderCategories();
                                    window.carrito.cargarCupones();
                                    window.carrito.renderDeliveryOptions();
                                    window.carrito.renderDeliveryTimesSelect();
                                }
                                
                                this.renderProductosAdmin();
                                this.renderCategoriasSelect();
                                this.renderCategoriasAdmin();
                                this.renderCuponesAdmin();
                                this.renderBanners();
                                this.renderBannersFrontend();
                                this.renderDeliveryPoints();
                                this.renderDeliveryTimes();
                                this.cargarTransferencia();
                                this.cargarConfiguracionGeneral();
                                this.renderSocialMedia();
                                this.actualizarFooter();
                                
                                this.mostrarMensaje('Datos importados correctamente. La página se recargará en 3 segundos...', 'success');
                                
                                setTimeout(() => {
                                    location.reload();
                                }, 3000);
                            }
                        } catch (error) {
                            this.mostrarMensaje('Error al importar: ' + error.message, 'error');
                        }
                    };
                    
                    reader.readAsText(file);
                };
                
                input.click();
            }
            
            exportHtml() {
                const cleanHtml = document.getElementById('exportClean').checked;
                const includeData = document.getElementById('exportIncludeData').checked;
                
                let htmlContent = this.generateHtmlContent(cleanHtml, includeData);
                
                const blob = new Blob([htmlContent], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = 'tienda_modastyle_con_configuracion_general.html';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                
                URL.revokeObjectURL(url);
                
                this.mostrarMensaje('HTML exportado correctamente con configuración general', 'success');
            }
            
            generateHtmlContent(cleanHtml, includeData) {
                const docClone = document.cloneNode(true);
                
                if (cleanHtml) {
                    const adminPanel = docClone.getElementById('adminPanel');
                    const authModal = docClone.getElementById('authModal');
                    const adminBtn = docClone.getElementById('adminBtn');
                    
                    if (adminPanel) adminPanel.remove();
                    if (authModal) authModal.remove();
                    if (adminBtn) adminBtn.remove();
                }
                
                if (includeData) {
                    const scripts = docClone.querySelectorAll('script');
                    const lastScript = scripts[scripts.length - 1];
                    
                    if (lastScript) {
                        const productosJson = JSON.stringify(productos);
                        const categoriasJson = JSON.stringify(categorias);
                        const sectionCategoriesJson = JSON.stringify(sectionCategories);
                        const sectionConfigJson = JSON.stringify(sectionConfig);
                        const cuponesJson = JSON.stringify(cuponesDisponibles);
                        const cuponesUsadosJson = JSON.stringify(cuponesUsados);
                        const cuponesExpiradosJson = JSON.stringify(cuponesExpirados);
                        const bannersJson = JSON.stringify(bannersDisponibles);
                        const deliveryJson = JSON.stringify(deliveryConfig);
                        const generalJson = JSON.stringify(generalConfig);
                        
                        let scriptContent = lastScript.textContent;
                        scriptContent = scriptContent.replace(/let productos = \[[\s\S]*?\];/, `let productos = ${productosJson};`);
                        scriptContent = scriptContent.replace(/let categorias = \[[\s\S]*?\];/, `let categorias = ${categoriasJson};`);
                        scriptContent = scriptContent.replace(/let sectionCategories = \[[\s\S]*?\];/, `let sectionCategories = ${sectionCategoriesJson};`);
                        scriptContent = scriptContent.replace(/let sectionConfig = \{[\s\S]*?\};/, `let sectionConfig = ${sectionConfigJson};`);
                        scriptContent = scriptContent.replace(/let cuponesDisponibles = \[[\s\S]*?\];/, `let cuponesDisponibles = ${cuponesJson};`);
                        scriptContent = scriptContent.replace(/let cuponesUsados = \[[\s\S]*?\];/, `let cuponesUsados = ${cuponesUsadosJson};`);
                        scriptContent = scriptContent.replace(/let cuponesExpirados = \[[\s\S]*?\];/, `let cuponesExpirados = ${cuponesExpiradosJson};`);
                        scriptContent = scriptContent.replace(/let bannersDisponibles = \[[\s\S]*?\];/, `let bannersDisponibles = ${bannersJson};`);
                        scriptContent = scriptContent.replace(/let deliveryConfig = \{[\s\S]*?\};/, `let deliveryConfig = ${deliveryJson};`);
                        scriptContent = scriptContent.replace(/let generalConfig = \{[\s\S]*?\};/, `let generalConfig = ${generalJson};`);
                        
                        lastScript.textContent = scriptContent;
                    }
                }
                
                return docClone.documentElement.outerHTML;
            }
            
            mostrarMensaje(texto, tipo) {
                const mensaje = document.getElementById('formMessage');
                mensaje.className = `status-message status-${tipo}`;
                mensaje.innerHTML = `<i class="fas fa-${tipo === 'success' ? 'check' : 'exclamation'}-circle"></i><span>${texto}</span>`;
                mensaje.style.display = 'flex';
                
                setTimeout(() => {
                    mensaje.style.display = 'none';
                }, 3000);
            }
        }

        // ==================== INICIALIZACIÓN ====================
        const carrito = new Carrito();
        const admin = new Administracion();
        const trackingSystem = new TrackingSystem();
        const confirmModal = new ConfirmModal();
        
        window.carrito = carrito;
        window.admin = admin;
        window.trackingSystem = trackingSystem;
        window.confirmModal = confirmModal;
        window.filterProducts = (categoriaId) => carrito.filterProducts(categoriaId);
        window.buscador = window.buscador || null;
        
        setTimeout(() => {
            admin.renderBannersFrontend();
            admin.actualizarFooter();
        }, 100);
        
        console.log('✅ Sistema de tienda ModaStyle con CONFIGURACIÓN GENERAL');
        console.log('✅ Versión 3.14.0 - Configuración de envíos, contacto y redes sociales');
        console.log('✅ Las redes sociales se muestran en el footer con colores personalizados');
        console.log('✅ El cliente puede agregar, editar y eliminar redes sociales');
        console.log('✅ La configuración se guarda en localStorage y se exporta en el backup');
    </script>

</body></html>
